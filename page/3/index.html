<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="baidu-site-verification" content="ggTdcuuNh2" />
  <link rel="dns-prefetch" href="http://Jasonellen.github.io">
  <title>å¥‹æ–—èšğŸœ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="å¥‹æ–—èšğŸœ">
<meta property="og:url" content="http://Jasonellen.github.io/page/3/index.html">
<meta property="og:site_name" content="å¥‹æ–—èšğŸœ">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¥‹æ–—èšğŸœ">
  
    <link rel="alternative" href="/atom.xml" title="å¥‹æ–—èšğŸœ" type="application/atom+xml">
  
  
    <link rel="icon" href="http://ww1.sinaimg.cn/small/908edb0ejw8fa0vrjx3bbj2050050jrg.jpg">
  
  <link rel="stylesheet" href="/main.css">
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://ww1.sinaimg.cn/small/908edb0ejw8fa0vrjx3bbj2050050jrg.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Jasonellen</a></h1>
		</hgroup>

		
		<p class="header-subtitle">å‰ç«¯æ‹¼æä¸­çš„å°å°èšğŸœ</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">æ–‡ç« åˆ—è¡¨</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">æ ‡ç­¾</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">å‹é“¾</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="//github.com/Jasonellen/" title="github">github</a>
		        
			</div>
		</nav>
	</header>			
</div>



      <div class="ball" style=' width:100px;
            height:100px;
            position: absolute;
            bottom:0;
            left:200px;
            background: url(http://img3.imgtn.bdimg.com/it/u=2342940863,4159168232&fm=23&gp=0.jpg) no-repeat;
            background-size:contain;
            border-radius:50%;
      '>
      </div>

        <script>
            var ball = document.querySelector(".ball");
            gravBall(ball);

            function gravBall(obj){
                var timer = null;
                var speedX =0, speedY=0,x=0,y=0;
                var gapX =0, gapY=0;

                // obj.onmousedown = down;
                addHandler(obj,'mousedown',down);
                addHandler(obj,'mouseup',up);

                function down(ev){           
                    clearInterval(timer); 
                    var ev = ev || window.event;
                    gapX = ev.clientX - obj.offsetLeft;
                    gapY = ev.clientY - obj.offsetTop;
                    addHandler(document,'mousemove',move);    
                }
                function up(){
                    var currentX=0,currentY=0,l=0,t=0;
                    removeHandler(document,'mousemove',move)
                    clearInterval(timer); 
                    timer = setInterval(function(){
                        speedY +=3;  //ä¸€ç›´æœ‰ä¸€ä¸ªYæ–¹å‘çš„å¢åŠ ï¼Œä»¿é‡åŠ›
                        currentX = window.innerWidth - obj.offsetWidth;
                        currentY = window.innerHeight - obj.offsetHeight;
                        l = obj.offsetLeft + speedX;
                        t = obj.offsetTop + speedY;
                        //speedY +=3;  //æ”¾åœ¨è¿™é‡Œå°±æ˜¯å…ˆåˆ¤æ–­å†+3ï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥
                        if(l > currentX){
                            speedX *= -0.8;
                            l =currentX;
                        }
                        if(l < 0){
                            speedX *= -0.8;
                            l = 0;
                        }
                        if(t > currentY){
                            speedY *= -0.8;
                            speedX *= 0.8;
                            t = currentY;
                        }
                        if(t < 0){
                            speedY *= -0.8;
                            speedX *= 0.8;
                            t = 0;
                        }
                        if( Math.abs(t-currentY)<1 && Math.abs(speedY)<1.5 && Math.abs(speedX)<1.5){
                            clearInterval(timer);
                        }
                        obj.style.left = l  + "px";
                        obj.style.top = t  + "px";
                    },30)
                }

                function move(ev){
                    var ev = ev || window.event;
                    //éš¾ç‚¹ä¸€ï¼Œè®°å½•å½“å‰é€Ÿåº¦ æ˜¯æœ€åä¸€æ¬¡çš„offsetLeftå‡å»ä¸Šä¸€æ¬¡çš„offsetLeft
                    speedX = ev.clientX - x - gapX;
                    speedY = ev.clientY - y - gapY;
                    //è®°å½•æœ¬æ¬¡çš„offsetLeftä½œä¸ºä¸‹ä¸€æ¬¡ç§»åŠ¨çš„çš„ä¸Šä¸€æ¬¡çš„offsetLeftï¼›
                    x = obj.offsetLeft;
                    y = obj.offsetTop;
                    var evX = ev.clientX;
                    var evY = ev.clientY;
                    if(ev.clientX<gapX || ev.clientX>window.innerWidth-gapX || ev.clientY<0 || ev.clientY>window.innerHeight){
                        up();
                    }
                    obj.style.left = evX - gapX  + "px";
                    obj.style.top = evY - gapY  + "px";
                }
            }


            function addHandler(element,type,handler){
                if(element.addEventListener){//æ£€æµ‹æ˜¯å¦ä¸ºDOM2çº§æ–¹æ³•
                    element.addEventListener(type, handler, false);
                }else if (element.attachEvent){//æ£€æµ‹æ˜¯å¦ä¸ºIEçº§æ–¹æ³•
                    element.attachEvent("on" + type, handler);
                } else {//æ£€æµ‹æ˜¯å¦ä¸ºDOM0çº§æ–¹æ³•
                    element["on" + type] = handler;
                }
            }
             function removeHandler(element, type, handler){
                if (element.removeEventListener){
                    element.removeEventListener(type, handler, false);
                } else if (element.detachEvent){
                    element.detachEvent("on" + type, handler);
                } else {
                    element["on" + type] = null;
                }
            }  
        </script>  
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Jasonellen</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://ww1.sinaimg.cn/small/908edb0ejw8fa0vrjx3bbj2050050jrg.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Jasonellen</h1>
			</hgroup>
			
			<p class="header-subtitle">å‰ç«¯æ‹¼æä¸­çš„å°å°èšğŸœ</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="//github.com/Jasonellen/" title="github">github</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-eslintä½¿ç”¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/06/eslintä½¿ç”¨/">é…ç½®ç›¸å…³-eslint</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>ESLint æ˜¯åœ¨ ECMAScript/JavaScript ä»£ç ä¸­è¯†åˆ«å’ŒæŠ¥å‘Šæ¨¡å¼åŒ¹é…çš„å·¥å…·ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ä¿è¯ä»£ç çš„ä¸€è‡´æ€§å’Œé¿å…é”™è¯¯ã€‚åœ¨è®¸å¤šæ–¹é¢ï¼Œå®ƒå’Œ JSLintã€JSHint ç›¸ä¼¼ï¼Œé™¤äº†å°‘æ•°çš„ä¾‹å¤–ï¼š</p>
</blockquote>
<h4 id="ESlintçš„å®‰è£…ä½¿ç”¨è¿˜æ˜¯æ¨èç”¨ç¼–è¾‘å™¨æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªåŠ¨æ£€æµ‹ï¼Œæ›´ä¸è¦å¼€å¤šä½™çš„å‘½ä»¤è¡Œï¼Œè¯¦æƒ…å‚è§å„ç§ç¼–è¾‘å™¨é…ç½®"><a href="#ESlintçš„å®‰è£…ä½¿ç”¨è¿˜æ˜¯æ¨èç”¨ç¼–è¾‘å™¨æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªåŠ¨æ£€æµ‹ï¼Œæ›´ä¸è¦å¼€å¤šä½™çš„å‘½ä»¤è¡Œï¼Œè¯¦æƒ…å‚è§å„ç§ç¼–è¾‘å™¨é…ç½®" class="headerlink" title="ESlintçš„å®‰è£…ä½¿ç”¨è¿˜æ˜¯æ¨èç”¨ç¼–è¾‘å™¨æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªåŠ¨æ£€æµ‹ï¼Œæ›´ä¸è¦å¼€å¤šä½™çš„å‘½ä»¤è¡Œï¼Œè¯¦æƒ…å‚è§å„ç§ç¼–è¾‘å™¨é…ç½®"></a>ESlintçš„å®‰è£…ä½¿ç”¨è¿˜æ˜¯æ¨èç”¨ç¼–è¾‘å™¨æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªåŠ¨æ£€æµ‹ï¼Œæ›´ä¸è¦å¼€å¤šä½™çš„å‘½ä»¤è¡Œï¼Œè¯¦æƒ…å‚è§å„ç§ç¼–è¾‘å™¨é…ç½®</h4><h2 id="è§„åˆ™å®šä¹‰"><a href="#è§„åˆ™å®šä¹‰" class="headerlink" title="è§„åˆ™å®šä¹‰:"></a>è§„åˆ™å®šä¹‰:</h2><h4 id="ESLint-æ”¯æŒå‡ ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåŒä¸€ä¸ªç›®å½•ä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒESLint-åªä¼šä½¿ç”¨ä¸€ä¸ªã€‚ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š"><a href="#ESLint-æ”¯æŒå‡ ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåŒä¸€ä¸ªç›®å½•ä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒESLint-åªä¼šä½¿ç”¨ä¸€ä¸ªã€‚ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š" class="headerlink" title="ESLint æ”¯æŒå‡ ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåŒä¸€ä¸ªç›®å½•ä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒESLint åªä¼šä½¿ç”¨ä¸€ä¸ªã€‚ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š"></a>ESLint æ”¯æŒå‡ ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåŒä¸€ä¸ªç›®å½•ä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒESLint åªä¼šä½¿ç”¨ä¸€ä¸ªã€‚ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š</h4><ol>
<li>JavaScript - ä½¿ç”¨ .eslintrc.js ç„¶åè¾“å‡ºä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚</li>
<li>YAML - ä½¿ç”¨ .eslintrc.yaml æˆ– .eslintrc.yml å»å®šä¹‰é…ç½®çš„ç»“æ„ã€‚</li>
<li>JSON -ä½¿ç”¨ .eslintrc.json å»å®šä¹‰é…ç½®çš„ç»“æ„ï¼ŒESLint çš„ JSON æ–‡ä»¶å…è®¸ JavaScript é£æ ¼çš„æ³¨é‡Šã€‚</li>
<li>Deprecated -ä½¿ç”¨ .eslintrcï¼Œå¯ä»¥ä½¿ JSON ä¹Ÿå¯ä»¥æ˜¯ YAMLã€‚</li>
<li>package.json - åœ¨ package.json é‡Œåˆ›å»ºä¸€ä¸ª eslintConfigå±æ€§ï¼Œåœ¨é‚£é‡Œå®šä¹‰ä½ çš„é…ç½®ã€‚</li>
</ol>
<h4 id="è§„åˆ™é‡Šä¹‰ï¼š"><a href="#è§„åˆ™é‡Šä¹‰ï¼š" class="headerlink" title="è§„åˆ™é‡Šä¹‰ï¼š"></a>è§„åˆ™é‡Šä¹‰ï¼š</h4><pre><code>{
    // ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚
    &quot;env&quot;: {
        //ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚æ›´å¤šåœ¨å®˜ç½‘æŸ¥çœ‹
        &quot;browser&quot;:true,
        &quot;node&quot;:true,
        &quot;commonjs&quot;:true,
        &quot;amd&quot;:true,
        &quot;es6&quot;:true,
        &quot;mocha&quot;:true
    },
    // JavaScript è¯­è¨€é€‰é¡¹
    &quot;parserOptions&quot;: {
        // ECMAScript ç‰ˆæœ¬
        &quot;ecmaVersion&quot;:6,
        &quot;sourceType&quot;:&quot;script&quot;,//module
        // æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§:
        &quot;ecmaFeatures&quot;: {
            // å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥
            &quot;globalReturn&quot;:true,
            // impliedStric
            &quot;impliedStrict&quot;:true,
            // å¯ç”¨ JSX
            &quot;jsx&quot;:true
        }
     },
    /**
     * &quot;off&quot; æˆ– 0 - å…³é—­è§„åˆ™
     * &quot;warn&quot; æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º),
     * &quot;error&quot; æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)
     */
    &quot;rules&quot;: {
        // ç¦æ­¢æ¡ä»¶è¡¨è¾¾å¼ä¸­å‡ºç°èµ‹å€¼æ“ä½œç¬¦
        &quot;no-cond-assign&quot;:2,
        // ç¦ç”¨ console
        &quot;no-console&quot;:0,
        // ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼
        // if (false) {
        // doSomethingUnfinished();
        // } //cuowu
        &quot;no-constant-condition&quot;:2,
        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦ ï¼šnew RegExp(&quot;\x1f&quot;)
        &quot;no-control-regex&quot;:2,
        // æ•°ç»„å’Œå¯¹è±¡é”®å€¼å¯¹æœ€åä¸€ä¸ªé€—å·ï¼Œ neverå‚æ•°ï¼šä¸èƒ½å¸¦æœ«å°¾çš„é€—å·, alwayså‚æ•°ï¼šå¿…é¡»å¸¦æœ«å°¾çš„é€—å·ï¼Œ
        // always-multilineï¼šå¤šè¡Œæ¨¡å¼å¿…é¡»å¸¦é€—å·ï¼Œå•è¡Œæ¨¡å¼ä¸èƒ½å¸¦é€—å·
        &quot;comma-dangle&quot;: [1,&quot;always-multiline&quot;],
        // ç¦ç”¨ debugger
        &quot;no-debugger&quot;:2,
        // ç¦æ­¢ function å®šä¹‰ä¸­å‡ºç°é‡åå‚æ•°
        &quot;no-dupe-args&quot;:2,
        // ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­å‡ºç°é‡å¤çš„ key
        &quot;no-dupe-keys&quot;:2,
        // ç¦æ­¢é‡å¤çš„ case æ ‡ç­¾
        &quot;no-duplicate-case&quot;:2,
        // ç¦æ­¢ç©ºè¯­å¥å—
        &quot;no-empty&quot;:2,
        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºå­—ç¬¦é›† (/^abc[]/)
        &quot;no-empty-character-class&quot;:2,
        // ç¦æ­¢å¯¹ catch å­å¥çš„å‚æ•°é‡æ–°èµ‹å€¼
        &quot;no-ex-assign&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢
        &quot;no-extra-boolean-cast&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„æ‹¬å· //(a * b) + c;//æŠ¥é”™
        &quot;no-extra-parens&quot;:0,
        // ç¦æ­¢ä¸å¿…è¦çš„åˆ†å·
        &quot;no-extra-semi&quot;:2,
        // ç¦æ­¢å¯¹ function å£°æ˜é‡æ–°èµ‹å€¼
        &quot;no-func-assign&quot;:2,
        // ç¦æ­¢åœ¨åµŒå¥—çš„å—ä¸­å‡ºç° function æˆ– var å£°æ˜
        &quot;no-inner-declarations&quot;: [2,&quot;functions&quot;],
        // ç¦æ­¢ RegExp æ„é€ å‡½æ•°ä¸­æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²
        &quot;no-invalid-regexp&quot;:2,
        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²å’Œæ³¨é‡Šä¹‹å¤–ä¸è§„åˆ™çš„ç©ºç™½
        &quot;no-irregular-whitespace&quot;:2,
        // ç¦æ­¢åœ¨ in è¡¨è¾¾å¼ä¸­å‡ºç°å¦å®šçš„å·¦æ“ä½œæ•°
        &quot;no-negated-in-lhs&quot;:2,
        // ç¦æ­¢æŠŠå…¨å±€å¯¹è±¡ (Math å’Œ JSON) ä½œä¸ºå‡½æ•°è°ƒç”¨ é”™è¯¯ï¼švar math = Math();
        &quot;no-obj-calls&quot;:2,
        // ç¦æ­¢ç›´æ¥ä½¿ç”¨ Object.prototypes çš„å†…ç½®å±æ€§
        &quot;no-prototype-builtins&quot;:0,
        // ç¦æ­¢æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­å‡ºç°å¤šä¸ªç©ºæ ¼
        &quot;no-regex-spaces&quot;:2,
        // ç¦ç”¨ç¨€ç–æ•°ç»„
        &quot;no-sparse-arrays&quot;:2,
        // ç¦æ­¢å‡ºç°ä»¤äººå›°æƒ‘çš„å¤šè¡Œè¡¨è¾¾å¼
        &quot;no-unexpected-multiline&quot;:2,
        // ç¦æ­¢åœ¨returnã€throwã€continue å’Œ breakè¯­å¥ä¹‹åå‡ºç°ä¸å¯è¾¾ä»£ç 
        /*
         function foo() {
         return true;
         console.log(&quot;done&quot;);
         }//é”™è¯¯
         */
        &quot;no-unreachable&quot;:2,
        // è¦æ±‚ä½¿ç”¨ isNaN() æ£€æŸ¥ NaN
        &quot;use-isnan&quot;:2,
        // å¼ºåˆ¶ä½¿ç”¨æœ‰æ•ˆçš„ JSDoc æ³¨é‡Š
        &quot;valid-jsdoc&quot;:1,
        // å¼ºåˆ¶ typeof è¡¨è¾¾å¼ä¸æœ‰æ•ˆçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ
        // typeof foo === &quot;undefimed&quot; é”™è¯¯
        &quot;valid-typeof&quot;:2,
        // å®šä¹‰å¯¹è±¡çš„setå­˜å–å™¨å±æ€§æ—¶ï¼Œå¼ºåˆ¶å®šä¹‰get
        &quot;accessor-pairs&quot;:2,
        // å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥
        &quot;array-callback-return&quot;:0,
        // å¼ºåˆ¶æŠŠå˜é‡çš„ä½¿ç”¨é™åˆ¶åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸèŒƒå›´å†…
        &quot;block-scoped-var&quot;:0,
        // é™åˆ¶åœˆå¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼if elseèƒ½è¿ç»­æ¥å¤šå°‘ä¸ª
        &quot;complexity&quot;: [2,9],
        // è¦æ±‚ return è¯­å¥è¦ä¹ˆæ€»æ˜¯æŒ‡å®šè¿”å›çš„å€¼ï¼Œè¦ä¹ˆä¸æŒ‡å®š
        &quot;consistent-return&quot;:0,
        // å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼
        &quot;curly&quot;: [2,&quot;all&quot;],
        // switch è¯­å¥å¼ºåˆ¶ default åˆ†æ”¯ï¼Œä¹Ÿå¯æ·»åŠ  // no default æ³¨é‡Šå–æ¶ˆæ­¤æ¬¡è­¦å‘Š
        &quot;default-case&quot;:2,
        // å¼ºåˆ¶object.key ä¸­ . çš„ä½ç½®ï¼Œå‚æ•°:
        // propertyï¼Œ&apos;.&apos;å·åº”ä¸å±æ€§åœ¨åŒä¸€è¡Œ
        // object, &apos;.&apos; å·åº”ä¸å¯¹è±¡ååœ¨åŒä¸€è¡Œ
        &quot;dot-location&quot;: [2,&quot;property&quot;],
        // å¼ºåˆ¶ä½¿ç”¨.å·å–å±æ€§
        // å‚æ•°ï¼š allowKeywordsï¼štrue ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶ï¼Œåªèƒ½ä½¿ç”¨.æ–¹å¼å–å±æ€§
        // false ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶, åªèƒ½ä½¿ç”¨[]æ–¹å¼å–å±æ€§ e.g [2, {&quot;allowKeywords&quot;: false}]
        // allowPattern: å½“å±æ€§ååŒ¹é…æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå…è®¸ä½¿ç”¨[]æ–¹å¼å–å€¼,å¦åˆ™åªèƒ½ç”¨.å·å–å€¼ e.g [2, {&quot;allowPattern&quot;: &quot;^[a-z]+(_[a-z]+)+$&quot;}]
        &quot;dot-notation&quot;: [2, {&quot;allowKeywords&quot;:false}],
        // ä½¿ç”¨ === æ›¿ä»£ == allow-nullå…è®¸nullå’Œundefined==
        &quot;eqeqeq&quot;: [2,&quot;allow-null&quot;],
        // è¦æ±‚ for-in å¾ªç¯ä¸­æœ‰ä¸€ä¸ª if è¯­å¥
        &quot;guard-for-in&quot;:2,
        // ç¦ç”¨ alertã€confirm å’Œ prompt
        &quot;no-alert&quot;:0,
        // ç¦ç”¨ arguments.caller æˆ– arguments.callee
        &quot;no-caller&quot;:2,
        // ä¸å…è®¸åœ¨ case å­å¥ä¸­ä½¿ç”¨è¯æ³•å£°æ˜
        &quot;no-case-declarations&quot;:2,
        // ç¦æ­¢é™¤æ³•æ“ä½œç¬¦æ˜¾å¼çš„å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„ä½ç½®
        &quot;no-div-regex&quot;:2,
        // ç¦æ­¢ if è¯­å¥ä¸­æœ‰ return ä¹‹åæœ‰ else
        &quot;no-else-return&quot;:0,
        // ç¦æ­¢å‡ºç°ç©ºå‡½æ•°.å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€æ¡æ³¨é‡Šï¼Œå®ƒå°†ä¸ä¼šè¢«è®¤ä¸ºæœ‰é—®é¢˜ã€‚
        &quot;no-empty-function&quot;:2,
        // ç¦æ­¢ä½¿ç”¨ç©ºè§£æ„æ¨¡å¼no-empty-pattern
        &quot;no-empty-pattern&quot;:2,
        // ç¦æ­¢åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥æ“ä½œç¬¦çš„æƒ…å†µä¸‹ä¸ null è¿›è¡Œæ¯”è¾ƒ
        &quot;no-eq-null&quot;:1,
        // ç¦ç”¨ eval()
        &quot;no-eval&quot;:2,
        // ç¦æ­¢æ‰©å±•åŸç”Ÿç±»å‹
        &quot;no-extend-native&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„ .bind() è°ƒç”¨
        &quot;no-extra-bind&quot;:2,
        // ç¦ç”¨ä¸å¿…è¦çš„æ ‡ç­¾
        &quot;no-extra-label:&quot;:0,
        // ç¦æ­¢ case è¯­å¥è½ç©º
        &quot;no-fallthrough&quot;:2,
        // ç¦æ­¢æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨å‰å¯¼å’Œæœ«å°¾å°æ•°ç‚¹
        &quot;no-floating-decimal&quot;:2,
        // ç¦æ­¢ä½¿ç”¨çŸ­ç¬¦å·è¿›è¡Œç±»å‹è½¬æ¢(!!fOO)
        &quot;no-implicit-coercion&quot;:0,
        // ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨ var å’Œå‘½åçš„ function å£°æ˜
        &quot;no-implicit-globals&quot;:1,
        // ç¦æ­¢ä½¿ç”¨ç±»ä¼¼ eval() çš„æ–¹æ³•
        &quot;no-implied-eval&quot;:2,
        // ç¦æ­¢ this å…³é”®å­—å‡ºç°åœ¨ç±»å’Œç±»å¯¹è±¡ä¹‹å¤–
        &quot;no-invalid-this&quot;:0,
        // ç¦ç”¨ __iterator__ å±æ€§
        &quot;no-iterator&quot;:2,
        // ç¦ç”¨æ ‡ç­¾è¯­å¥
        &quot;no-labels&quot;:2,
        // ç¦ç”¨ä¸å¿…è¦çš„åµŒå¥—å—
        &quot;no-lone-blocks&quot;:2,
        // ç¦æ­¢åœ¨å¾ªç¯ä¸­å‡ºç° function å£°æ˜å’Œè¡¨è¾¾å¼
        &quot;no-loop-func&quot;:1,
        // ç¦ç”¨é­”æœ¯æ•°å­—(3.14ä»€ä¹ˆçš„ç”¨å¸¸é‡ä»£æ›¿)
        &quot;no-magic-numbers&quot;:[1,{&quot;ignore&quot;: [0,-1,1] }],
        // ç¦æ­¢ä½¿ç”¨å¤šä¸ªç©ºæ ¼
        &quot;no-multi-spaces&quot;:2,
        // ç¦æ­¢ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ–°è¡Œä¹‹å‰ä½¿ç”¨æ–œçº¿åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²
        &quot;no-multi-str&quot;:2,
        // ç¦æ­¢å¯¹åŸç”Ÿå¯¹è±¡èµ‹å€¼
        &quot;no-native-reassign&quot;:2,
        // ç¦æ­¢åœ¨éèµ‹å€¼æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ new æ“ä½œç¬¦
        &quot;no-new&quot;:2,
        // ç¦æ­¢å¯¹ Function å¯¹è±¡ä½¿ç”¨ new æ“ä½œç¬¦
        &quot;no-new-func&quot;:0,
        // ç¦æ­¢å¯¹ Stringï¼ŒNumber å’Œ Boolean ä½¿ç”¨ new æ“ä½œç¬¦
        &quot;no-new-wrappers&quot;:2,
        // ç¦ç”¨å…«è¿›åˆ¶å­—é¢é‡
        &quot;no-octal&quot;:2,
        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—
        &quot;no-octal-escape&quot;:2,
        // ä¸å…è®¸å¯¹ function çš„å‚æ•°è¿›è¡Œé‡æ–°èµ‹å€¼
        &quot;no-param-reassign&quot;:0,
        // ç¦ç”¨ __proto__ å±æ€§
        &quot;no-proto&quot;:2,
        // ç¦æ­¢ä½¿ç”¨ var å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡
        &quot;no-redeclare&quot;:2,
        // ç¦ç”¨æŒ‡å®šçš„é€šè¿‡ require åŠ è½½çš„æ¨¡å—
        &quot;no-return-assign&quot;:0,
        // ç¦æ­¢ä½¿ç”¨ javascript: url
        &quot;no-script-url&quot;:0,
        // ç¦æ­¢è‡ªæˆ‘èµ‹å€¼
        &quot;no-self-assign&quot;:2,
        // ç¦æ­¢è‡ªèº«æ¯”è¾ƒ
        &quot;no-self-compare&quot;:2,
        // ç¦ç”¨é€—å·æ“ä½œç¬¦
        &quot;no-sequences&quot;:2,
        // ç¦æ­¢æŠ›å‡ºéå¼‚å¸¸å­—é¢é‡
        &quot;no-throw-literal&quot;:2,
        // ç¦ç”¨ä¸€æˆä¸å˜çš„å¾ªç¯æ¡ä»¶
        &quot;no-unmodified-loop-condition&quot;:2,
        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„è¡¨è¾¾å¼
        &quot;no-unused-expressions&quot;:0,
        // ç¦ç”¨æœªä½¿ç”¨è¿‡çš„æ ‡ç­¾
        &quot;no-unused-labels&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„ .call() å’Œ .apply()
        &quot;no-useless-call&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ¨¡æ¿å­—é¢é‡çš„è¿æ¥
        &quot;no-useless-concat&quot;:2,
        // ç¦ç”¨ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦
        &quot;no-useless-escape&quot;:0,
        // ç¦ç”¨ void æ“ä½œç¬¦
        &quot;no-void&quot;:0,
        // ç¦æ­¢åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç‰¹å®šçš„è­¦å‘Šæœ¯è¯­
        &quot;no-warning-comments&quot;:0,
        // ç¦ç”¨ with è¯­å¥
        &quot;no-with&quot;:2,
        // å¼ºåˆ¶åœ¨parseInt()ä½¿ç”¨åŸºæ•°å‚æ•°
        &quot;radix&quot;:2,
        // è¦æ±‚æ‰€æœ‰çš„ var å£°æ˜å‡ºç°åœ¨å®ƒä»¬æ‰€åœ¨çš„ä½œç”¨åŸŸé¡¶éƒ¨
        &quot;vars-on-top&quot;:0,
        // è¦æ±‚ IIFE ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥
        &quot;wrap-iife&quot;: [2,&quot;any&quot;],
        // è¦æ±‚æˆ–ç¦æ­¢ â€œYodaâ€ æ¡ä»¶
        &quot;yoda&quot;: [2,&quot;never&quot;],
        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æŒ‡ä»¤
        &quot;strict&quot;:0,
        //////////////
        // å˜é‡å£°æ˜ //
        //////////////

        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜ä¸­çš„åˆå§‹åŒ–(åˆå€¼)
        &quot;init-declarations&quot;:0,
        // ä¸å…è®¸ catch å­å¥çš„å‚æ•°ä¸å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡åŒå
        &quot;no-catch-shadow&quot;:0,
        // ç¦æ­¢åˆ é™¤å˜é‡
        &quot;no-delete-var&quot;:2,
        // ä¸å…è®¸æ ‡ç­¾ä¸å˜é‡åŒå
        &quot;no-label-var&quot;:2,
        // ç¦ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡
        &quot;no-restricted-globals&quot;:0,
        // ç¦æ­¢ var å£°æ˜ ä¸å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡åŒå
        &quot;no-shadow&quot;:0,
        // ç¦æ­¢è¦†ç›–å—é™åˆ¶çš„æ ‡è¯†ç¬¦
        &quot;no-shadow-restricted-names&quot;:2,
        // ç¦ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œé™¤éå®ƒä»¬åœ¨ /*global */ æ³¨é‡Šä¸­è¢«æåˆ°
        &quot;no-undef&quot;:2,
        // ç¦æ­¢å°†å˜é‡åˆå§‹åŒ–ä¸º undefined
        &quot;no-undef-init&quot;:2,
        // ç¦æ­¢å°† undefined ä½œä¸ºæ ‡è¯†ç¬¦
        &quot;no-undefined&quot;:0,
        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡
        &quot;no-unused-vars&quot;: [2, {&quot;vars&quot;:&quot;all&quot;,&quot;args&quot;:&quot;none&quot;}],
        // ä¸å…è®¸åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬
        &quot;no-use-before-define&quot;:0,

        //////////////////////////
        // Node.js and CommonJS //
        //////////////////////////

        // require return statements after callbacks
        &quot;callback-return&quot;:0,
        // è¦æ±‚ require() å‡ºç°åœ¨é¡¶å±‚æ¨¡å—ä½œç”¨åŸŸä¸­
        &quot;global-require&quot;:1,
        // è¦æ±‚å›è°ƒå‡½æ•°ä¸­æœ‰å®¹é”™å¤„ç†
        &quot;handle-callback-err&quot;: [2,&quot;^(err|error)$&quot;],
        // ç¦æ­¢æ··åˆå¸¸è§„ var å£°æ˜å’Œ require è°ƒç”¨
        &quot;no-mixed-requires&quot;:0,
        // ç¦æ­¢è°ƒç”¨ require æ—¶ä½¿ç”¨ new æ“ä½œç¬¦
        &quot;no-new-require&quot;:2,
        // ç¦æ­¢å¯¹ __dirname å’Œ __filenameè¿›è¡Œå­—ç¬¦ä¸²è¿æ¥
        &quot;no-path-concat&quot;:0,
        // ç¦ç”¨ process.env
        &quot;no-process-env&quot;:0,
        // ç¦ç”¨ process.exit()
        &quot;no-process-exit&quot;:0,
        // ç¦ç”¨åŒæ­¥æ–¹æ³•
        &quot;no-sync&quot;:0,

        //////////////
        // é£æ ¼æŒ‡å— //
        //////////////

        // æŒ‡å®šæ•°ç»„çš„å…ƒç´ ä¹‹é—´è¦ä»¥ç©ºæ ¼éš”å¼€(, åé¢)ï¼Œ neverå‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åä¸èƒ½å¸¦ç©ºæ ¼ï¼Œalwayså‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åå¿…é¡»å¸¦ç©ºæ ¼
        &quot;array-bracket-spacing&quot;: [2,&quot;never&quot;],
        // ç¦æ­¢æˆ–å¼ºåˆ¶åœ¨å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼(ç¦ç”¨)
        &quot;block-spacing&quot;:[1,&quot;never&quot;],
        //å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„ç¼©è¿› ç¬¬äºŒä¸ªå‚æ•°ä¸º &quot;tab&quot; æ—¶ï¼Œä¼šä½¿ç”¨tabï¼Œ
        // if while function åé¢çš„{å¿…é¡»ä¸ifåœ¨åŒä¸€è¡Œï¼Œjavaé£æ ¼ã€‚
        &quot;brace-style&quot;: [2,&quot;1tbs&quot;, {&quot;allowSingleLine&quot;:true}],
        // åŒå³°é©¼å‘½åæ ¼å¼
        &quot;camelcase&quot;:2,
        // æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼
        &quot;comma-spacing&quot;: [2, {&quot;before&quot;:false,&quot;after&quot;:true}],
        // æ§åˆ¶é€—å·åœ¨è¡Œå°¾å‡ºç°è¿˜æ˜¯åœ¨è¡Œé¦–å‡ºç° (é»˜è®¤è¡Œå°¾)
        // http://eslint.org/docs/rules/comma-style
        &quot;comma-style&quot;: [2,&quot;last&quot;],
        //&quot;SwitchCase&quot; (é»˜è®¤ï¼š0) å¼ºåˆ¶ switch è¯­å¥ä¸­çš„ case å­å¥çš„ç¼©è¿›æ°´å¹³
        // ä»¥æ–¹æ‹¬å·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ[ åé¢å’Œ ] å‰é¢æ˜¯å¦éœ€è¦ç©ºæ ¼, å¯é€‰å‚æ•° never, always
        &quot;computed-property-spacing&quot;: [2,&quot;never&quot;],
        // ç”¨äºæŒ‡ç»Ÿä¸€åœ¨å›è°ƒå‡½æ•°ä¸­æŒ‡å‘thisçš„å˜é‡åï¼Œç®­å¤´å‡½æ•°ä¸­çš„thiså·²ç»å¯ä»¥æŒ‡å‘å¤–å±‚è°ƒç”¨è€…ï¼Œåº”è¯¥æ²¡åµç”¨äº†
        // e.g [0,&quot;that&quot;] æŒ‡å®šåªèƒ½ var that = this. thatä¸èƒ½æŒ‡å‘å…¶ä»–ä»»ä½•å€¼ï¼Œthisä¹Ÿä¸èƒ½èµ‹å€¼ç»™thatä»¥å¤–çš„å…¶ä»–å€¼
        &quot;consistent-this&quot;: [1,&quot;that&quot;],
        // å¼ºåˆ¶ä½¿ç”¨å‘½åçš„ function è¡¨è¾¾å¼
        &quot;func-names&quot;:0,
        // æ–‡ä»¶æœ«å°¾å¼ºåˆ¶æ¢è¡Œ
        &quot;eol-last&quot;:2,
        &quot;indent&quot;: [2,4, {&quot;SwitchCase&quot;:1}],
        // å¼ºåˆ¶åœ¨å¯¹è±¡å­—é¢é‡çš„å±æ€§ä¸­é”®å’Œå€¼ä¹‹é—´ä½¿ç”¨ä¸€è‡´çš„é—´è·
        &quot;key-spacing&quot;: [2, {&quot;beforeColon&quot;:false,&quot;afterColon&quot;:true}],
        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œé£æ ¼
        &quot;linebreak-style&quot;: [1,&quot;unix&quot;],
        // è¦æ±‚åœ¨æ³¨é‡Šå‘¨å›´æœ‰ç©ºè¡Œ ( è¦æ±‚åœ¨å—çº§æ³¨é‡Šä¹‹å‰æœ‰ä¸€ç©ºè¡Œ)
        &quot;lines-around-comment&quot;: [1,{&quot;beforeBlockComment&quot;:true}],
        // å¼ºåˆ¶ä¸€è‡´åœ°ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°è¡¨è¾¾å¼ï¼Œæ–¹æ³•å®šä¹‰é£æ ¼ï¼Œå‚æ•°ï¼š
        // declaration: å¼ºåˆ¶ä½¿ç”¨æ–¹æ³•å£°æ˜çš„æ–¹å¼ï¼Œfunction f(){} e.g [2, &quot;declaration&quot;]
        // expressionï¼šå¼ºåˆ¶ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œvar f = function() {} e.g [2, &quot;expression&quot;]
        // allowArrowFunctions: declarationé£æ ¼ä¸­å…è®¸ç®­å¤´å‡½æ•°ã€‚ e.g [2, &quot;declaration&quot;, { &quot;allowArrowFunctions&quot;: true }]
        &quot;func-style&quot;:0,
        // å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦ 5å±‚
        &quot;max-nested-callbacks&quot;: [1,5],
        // ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„æ ‡è¯†ç¬¦
        &quot;id-blacklist&quot;:0,
        // å¼ºåˆ¶æ ‡è¯†ç¬¦çš„æœ€æ–°å’Œæœ€å¤§é•¿åº¦
        &quot;id-length&quot;:0,
        // è¦æ±‚æ ‡è¯†ç¬¦åŒ¹é…ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼
        &quot;id-match&quot;:0,
        // å¼ºåˆ¶åœ¨ JSX å±æ€§ä¸­ä¸€è‡´åœ°ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·
        &quot;jsx-quotes&quot;:0,
        // å¼ºåˆ¶åœ¨å…³é”®å­—å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼ (å‰åè…°éœ€è¦)
        &quot;keyword-spacing&quot;:2,
        // å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦
        &quot;max-len&quot;:[1,200],
        // å¼ºåˆ¶æœ€å¤§è¡Œæ•°
        &quot;max-lines&quot;:0,
        // å¼ºåˆ¶ function å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡
        &quot;max-params&quot;:[1,7],
        // å¼ºåˆ¶ function å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡
        &quot;max-statements&quot;:[1,200],
        // å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡
        &quot;max-statements-per-line&quot;:0,
        // è¦æ±‚æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ ï¼ˆè¦æ±‚è°ƒç”¨ new æ“ä½œç¬¦æ—¶æœ‰é¦–å­—æ¯å¤§å°çš„å‡½æ•°ï¼Œå…è®¸è°ƒç”¨é¦–å­—æ¯å¤§å†™çš„å‡½æ•°æ—¶æ²¡æœ‰ new æ“ä½œç¬¦ã€‚ï¼‰
        &quot;new-cap&quot;: [2, {&quot;newIsCap&quot;:true,&quot;capIsNew&quot;:false}],
        // è¦æ±‚è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶æœ‰åœ†æ‹¬å·
        &quot;new-parens&quot;:2,
        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜è¯­å¥åæœ‰ä¸€è¡Œç©ºè¡Œ
        &quot;newline-after-var&quot;:0,
        // ç¦æ­¢ä½¿ç”¨ Array æ„é€ å‡½æ•°
        &quot;no-array-constructor&quot;:2,
        // ç¦ç”¨æŒ‰ä½è¿ç®—ç¬¦
        &quot;no-bitwise&quot;:0,
        // è¦æ±‚ return è¯­å¥ä¹‹å‰æœ‰ä¸€ç©ºè¡Œ
        &quot;newline-before-return&quot;:0,
        // è¦æ±‚æ–¹æ³•é“¾ä¸­æ¯ä¸ªè°ƒç”¨éƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦
        &quot;newline-per-chained-call&quot;:1,
        // ç¦ç”¨ continue è¯­å¥
        &quot;no-continue&quot;:0,
        // ç¦æ­¢åœ¨ä»£ç è¡Œåä½¿ç”¨å†…è”æ³¨é‡Š
        &quot;no-inline-comments&quot;:0,
        // ç¦æ­¢ if ä½œä¸ºå”¯ä¸€çš„è¯­å¥å‡ºç°åœ¨ else è¯­å¥ä¸­
        &quot;no-lonely-if&quot;:0,
        // ç¦æ­¢æ··åˆä½¿ç”¨ä¸åŒçš„æ“ä½œç¬¦
        &quot;no-mixed-operators&quot;:0,
        // ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆç¼©è¿›
        &quot;no-mixed-spaces-and-tabs&quot;:2,
        // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ
        &quot;no-multiple-empty-lines&quot;: [2, {&quot;max&quot;:2}],
        // ä¸å…è®¸å¦å®šçš„è¡¨è¾¾å¼
        &quot;no-negated-condition&quot;:0,
        // ä¸å…è®¸ä½¿ç”¨åµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼
        &quot;no-nested-ternary&quot;:0,
        // ç¦æ­¢ä½¿ç”¨ Object çš„æ„é€ å‡½æ•°
        &quot;no-new-object&quot;:2,
        // ç¦æ­¢ä½¿ç”¨ä¸€å…ƒæ“ä½œç¬¦ ++ å’Œ --
        &quot;no-plusplus&quot;:0,
        // ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•
        &quot;no-restricted-syntax&quot;:0,
        // ç¦æ­¢ function æ ‡è¯†ç¬¦å’Œæ‹¬å·ä¹‹é—´å‡ºç°ç©ºæ ¼
        &quot;no-spaced-func&quot;:2,
        // ä¸å…è®¸ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦
        &quot;no-ternary&quot;:0,
        // ç¦ç”¨è¡Œå°¾ç©ºæ ¼
        &quot;no-trailing-spaces&quot;:2,
        // ç¦æ­¢æ ‡è¯†ç¬¦ä¸­æœ‰æ‚¬ç©ºä¸‹åˆ’çº¿_bar
        &quot;no-underscore-dangle&quot;:0,
        // ç¦æ­¢å¯ä»¥åœ¨æœ‰æ›´ç®€å•çš„å¯æ›¿ä»£çš„è¡¨è¾¾å¼æ—¶ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦
        &quot;no-unneeded-ternary&quot;:2,
        // ç¦æ­¢å±æ€§å‰æœ‰ç©ºç™½
        &quot;no-whitespace-before-property&quot;:0,
        // å¼ºåˆ¶èŠ±æ‹¬å·å†…æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§
        &quot;object-curly-newline&quot;:0,
        // å¼ºåˆ¶åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;object-curly-spacing&quot;:0,
        // å¼ºåˆ¶å°†å¯¹è±¡çš„å±æ€§æ”¾åœ¨ä¸åŒçš„è¡Œä¸Š
        &quot;object-property-newline&quot;:0,
        // å¼ºåˆ¶å‡½æ•°ä¸­çš„å˜é‡è¦ä¹ˆä¸€èµ·å£°æ˜è¦ä¹ˆåˆ†å¼€å£°æ˜
        &quot;one-var&quot;: [2, {&quot;initialized&quot;:&quot;never&quot;}],
        // è¦æ±‚æˆ–ç¦æ­¢åœ¨ var å£°æ˜å‘¨å›´æ¢è¡Œ
        &quot;one-var-declaration-per-line&quot;:0,
        // è¦æ±‚æˆ–ç¦æ­¢åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¦æ±‚ä½¿ç”¨ç®€åŒ–çš„èµ‹å€¼æ“ä½œç¬¦
        &quot;operator-assignment&quot;:0,
        // å¼ºåˆ¶æ“ä½œç¬¦ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œç¬¦
        &quot;operator-linebreak&quot;: [2,&quot;after&quot;, {&quot;overrides&quot;: {&quot;?&quot;:&quot;before&quot;,&quot;:&quot;:&quot;before&quot;} }],
        // è¦æ±‚æˆ–ç¦æ­¢å—å†…å¡«å……
        &quot;padded-blocks&quot;:0,
        // è¦æ±‚å¯¹è±¡å­—é¢é‡å±æ€§åç§°ç”¨å¼•å·æ‹¬èµ·æ¥
        &quot;quote-props&quot;:0,
        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„åå‹¾å·ã€åŒå¼•å·æˆ–å•å¼•å·
        &quot;quotes&quot;: [2,&quot;single&quot;,&quot;avoid-escape&quot;],
        // è¦æ±‚ä½¿ç”¨ JSDoc æ³¨é‡Š
        &quot;require-jsdoc&quot;:1,
        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨åˆ†å·è€Œä¸æ˜¯ ASIï¼ˆè¿™ä¸ªæ‰æ˜¯æ§åˆ¶è¡Œå°¾éƒ¨åˆ†å·çš„ï¼Œï¼‰
        &quot;semi&quot;: [2,&quot;always&quot;],
        // å¼ºåˆ¶åˆ†å·ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;semi-spacing&quot;:0,
        // è¦æ±‚åŒä¸€ä¸ªå£°æ˜å—ä¸­çš„å˜é‡æŒ‰é¡ºåºæ’åˆ—
        &quot;sort-vars&quot;:0,
        // å¼ºåˆ¶åœ¨å—ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;space-before-blocks&quot;: [2,&quot;always&quot;],
        // å¼ºåˆ¶åœ¨ functionçš„å·¦æ‹¬å·ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;space-before-function-paren&quot;: [2,&quot;always&quot;],
        // å¼ºåˆ¶åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;space-in-parens&quot;: [2,&quot;never&quot;],
        // è¦æ±‚æ“ä½œç¬¦å‘¨å›´æœ‰ç©ºæ ¼
        &quot;space-infix-ops&quot;:2,
        // å¼ºåˆ¶åœ¨ä¸€å…ƒæ“ä½œç¬¦å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;space-unary-ops&quot;: [2, {&quot;words&quot;:true,&quot;nonwords&quot;:false}],
        // å¼ºåˆ¶åœ¨æ³¨é‡Šä¸­ // æˆ– /* ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;spaced-comment&quot;: [2,&quot;always&quot;, {&quot;markers&quot;: [&quot;global&quot;,&quot;globals&quot;,&quot;eslint&quot;,&quot;eslint-disable&quot;,&quot;*package&quot;,&quot;!&quot;] }],
        // è¦æ±‚æˆ–ç¦æ­¢ Unicode BOM
        &quot;unicode-bom&quot;:0,
        // è¦æ±‚æ­£åˆ™è¡¨è¾¾å¼è¢«æ‹¬å·æ‹¬èµ·æ¥
        &quot;wrap-regex&quot;:0,

        //////////////
        // ES6.ç›¸å…³ //
        //////////////

        // è¦æ±‚ç®­å¤´å‡½æ•°ä½“ä½¿ç”¨å¤§æ‹¬å·
        &quot;arrow-body-style&quot;:2,
        // è¦æ±‚ç®­å¤´å‡½æ•°çš„å‚æ•°ä½¿ç”¨åœ†æ‹¬å·
        &quot;arrow-parens&quot;:2,
        &quot;arrow-spacing&quot;:[2,{&quot;before&quot;:true,&quot;after&quot;:true}],
        // å¼ºåˆ¶åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ç”¨super()è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ŒTypeScripçš„ç¼–è¯‘å™¨ä¹Ÿä¼šæç¤º
        &quot;constructor-super&quot;:0,
        // å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‘¨å›´ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼
        &quot;generator-star-spacing&quot;: [2, {&quot;before&quot;:true,&quot;after&quot;:true}],
        // ç¦æ­¢ä¿®æ”¹ç±»å£°æ˜çš„å˜é‡
        &quot;no-class-assign&quot;:2,
        // ä¸å…è®¸ç®­å¤´åŠŸèƒ½ï¼Œåœ¨é‚£é‡Œä»–ä»¬å¯ä»¥æ··æ·†çš„æ¯”è¾ƒ
        &quot;no-confusing-arrow&quot;:0,
        // ç¦æ­¢ä¿®æ”¹ const å£°æ˜çš„å˜é‡
        &quot;no-const-assign&quot;:2,
        // ç¦æ­¢ç±»æˆå‘˜ä¸­å‡ºç°é‡å¤çš„åç§°
        &quot;no-dupe-class-members&quot;:2,
        // ä¸å…è®¸å¤åˆ¶æ¨¡å—çš„è¿›å£
        &quot;no-duplicate-imports&quot;:0,
        // ç¦æ­¢ Symbol çš„æ„é€ å‡½æ•°
        &quot;no-new-symbol&quot;:2,
        // å…è®¸æŒ‡å®šæ¨¡å—åŠ è½½æ—¶çš„è¿›å£
        &quot;no-restricted-imports&quot;:0,
        // ç¦æ­¢åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ super() ä¹‹å‰ä½¿ç”¨ this æˆ– super
        &quot;no-this-before-super&quot;:2,
        // ç¦æ­¢ä¸å¿…è¦çš„è®¡ç®—æ€§èƒ½é”®å¯¹è±¡çš„æ–‡å­—
        &quot;no-useless-computed-key&quot;:0,
        // è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var
        &quot;no-var&quot;:0,
        // è¦æ±‚æˆ–ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­æ–¹æ³•å’Œå±æ€§ä½¿ç”¨ç®€å†™è¯­æ³•
        &quot;object-shorthand&quot;:0,
        // è¦æ±‚ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒ
        &quot;prefer-arrow-callback&quot;:0,
        // è¦æ±‚ä½¿ç”¨ const å£°æ˜é‚£äº›å£°æ˜åä¸å†è¢«ä¿®æ”¹çš„å˜é‡
        &quot;prefer-const&quot;:0,
        // è¦æ±‚åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ Reflect æ–¹æ³•
        &quot;prefer-reflect&quot;:0,
        // è¦æ±‚ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è€Œé .apply()
        &quot;prefer-spread&quot;:0,
        // è¦æ±‚ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è€Œéå­—ç¬¦ä¸²è¿æ¥
        &quot;prefer-template&quot;:0,
        // Suggest using the rest parameters instead of arguments
        &quot;prefer-rest-params&quot;:0,
        // è¦æ±‚generator å‡½æ•°å†…æœ‰ yield
        &quot;require-yield&quot;:0,
        // enforce spacing between rest and spread operators and their expressions
        &quot;rest-spread-spacing&quot;:0,
        // å¼ºåˆ¶æ¨¡å—å†…çš„ import æ’åº
        &quot;sort-imports&quot;:0,
        // è¦æ±‚æˆ–ç¦æ­¢æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„åµŒå…¥è¡¨è¾¾å¼å‘¨å›´ç©ºæ ¼çš„ä½¿ç”¨
        &quot;template-curly-spacing&quot;:1,
        // å¼ºåˆ¶åœ¨ yield* è¡¨è¾¾å¼ä¸­ * å‘¨å›´ä½¿ç”¨ç©ºæ ¼
        &quot;yield-star-spacing&quot;:2
     }
}
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/04/06/eslintä½¿ç”¨/" class="archive-article-date">
  	<time datetime="2017-04-06T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-04-06</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eslint/">eslint</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-saga-begining" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/04/saga-begining/">saga-begining</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>redux-saga æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† Redux åº”ç”¨å¼‚æ­¥æ“ä½œçš„ä¸­é—´ä»¶ï¼ˆåˆç§°å¼‚æ­¥ actionï¼‰ã€‚ redux-saga é€šè¿‡åˆ›å»º <em>Sagas</em> å°†æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œé€»è¾‘æ”¶é›†åœ¨ä¸€ä¸ªåœ°æ–¹é›†ä¸­å¤„ç†ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ <code>redux-thunk</code> ä¸­é—´ä»¶ã€‚</p>
<p>è¿™æ„å‘³ç€åº”ç”¨çš„é€»è¾‘ä¼šå­˜åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š</p>
<ul>
<li>Reducers è´Ÿè´£å¤„ç† action çš„ state æ›´æ–°ã€‚</li>
<li>Sagas è´Ÿè´£åè°ƒé‚£äº›å¤æ‚æˆ–å¼‚æ­¥çš„æ“ä½œã€‚</li>
</ul>
</blockquote>
<ul>
<li>æ­¤ç¯‡æ–‡ç« é‡åœ¨å®Œæˆsagaçš„åŸºæœ¬åº”ç”¨ï¼Œå…¶ä¸­ä¼šç”¨åˆ°ä¸€äº›å…¶ä»–å¾ˆæœ‰ç”¨çš„æ’ä»¶ï¼Œ<code>saga</code>è¯¦ç»†è¯´æ˜è¯·å‚è€ƒæ–‡æ¡£<a href="http://leonshi.com/redux-saga-in-chinese/" target="_blank" rel="external">Redux-sagaä¸­æ–‡æ–‡æ¡£</a></li>
<li>æ–‡ç« é¡¹ç›®æºç æˆ³<a href="https://github.com/Jasonellen/saga-begining" target="_blank" rel="external">github</a></li>
</ul>
<h3 id="è¿™é‡Œæˆ‘ä»¬ç”¨sagaå®Œæ•´ä¸€ä¸ªCounterçš„ä½¿ç”¨"><a href="#è¿™é‡Œæˆ‘ä»¬ç”¨sagaå®Œæ•´ä¸€ä¸ªCounterçš„ä½¿ç”¨" class="headerlink" title="è¿™é‡Œæˆ‘ä»¬ç”¨sagaå®Œæ•´ä¸€ä¸ªCounterçš„ä½¿ç”¨"></a>è¿™é‡Œæˆ‘ä»¬ç”¨sagaå®Œæ•´ä¸€ä¸ªCounterçš„ä½¿ç”¨</h3><h4 id="index-jsâ€”æŒ‚åœ¨åˆ°é¡¹ç›®å…ƒç´ rootä¸Š"><a href="#index-jsâ€”æŒ‚åœ¨åˆ°é¡¹ç›®å…ƒç´ rootä¸Š" class="headerlink" title="index.jsâ€”æŒ‚åœ¨åˆ°é¡¹ç›®å…ƒç´ rootä¸Š"></a>index.jsâ€”æŒ‚åœ¨åˆ°é¡¹ç›®å…ƒç´ rootä¸Š</h4><pre><code>import React from &apos;react&apos;;
import ReactDOM from &apos;react-dom&apos;;
import {Provider} from &apos;react-redux&apos;;
import createStore from &apos;./store/configureStore&apos;
import App from &apos;./App&apos;;

const store = createStore();
ReactDOM.render(
  &lt;Provider store={store}&gt;
      &lt;App /&gt;
  &lt;/Provider&gt;,
  document.getElementById(&apos;root&apos;)
);
</code></pre><h4 id="ä¸Šé¢index-jsç”¨åˆ°çš„creatrStore-js"><a href="#ä¸Šé¢index-jsç”¨åˆ°çš„creatrStore-js" class="headerlink" title="ä¸Šé¢index.jsç”¨åˆ°çš„creatrStore.js"></a>ä¸Šé¢index.jsç”¨åˆ°çš„creatrStore.js</h4><pre><code>import {createLogger} from &apos;redux-logger&apos;;
// const createLogger = require(&apos;redux-logger&apos;);
import createSagaMiddleware from &apos;redux-saga&apos;;
import {createStore, applyMiddleware } from &apos;redux&apos;;
import rootReducer from &apos;../redux&apos;
import rootSaga from &apos;../saga&apos;

const middlewares = [];
// åˆ›å»ºä¸­é—´ä»¶saga
const sagaMiddleware = createSagaMiddleware();
middlewares.push(sagaMiddleware)

if (process.env.NODE_ENV === &apos;development&apos;) {
    //åˆ›å»ºä¸­é—´ä»¶logger
    const logger = createLogger();
    middlewares.push(logger);
}

export default function configureStore(initialState) {
   const store = createStore(rootReducer, initialState, applyMiddleware(...middlewares));
   sagaMiddleware.run(rootSaga) //sagaä¸­é—´é”®æŒ‚åœ¨åˆ°storeåéœ€è¦runä¸€ä¸‹ æ‰€æœ‰çš„sagaæ–‡ä»¶
   return store;
}
</code></pre><h4 id="createStoreç”¨åˆ°çš„rootRedux"><a href="#createStoreç”¨åˆ°çš„rootRedux" class="headerlink" title="createStoreç”¨åˆ°çš„rootRedux"></a>createStoreç”¨åˆ°çš„rootRedux</h4><pre><code>import {combineReducers} from &apos;redux&apos;;
const rootReducer = combineReducers({
  counterReducer1: require(&apos;./counterReducer1&apos;).reducer,
  counterReducer2: require(&apos;./counterReducer2&apos;).reducer,
})
export default rootReducer
</code></pre><h4 id="createStoreç”¨åˆ°çš„rootSaga"><a href="#createStoreç”¨åˆ°çš„rootSaga" class="headerlink" title="createStoreç”¨åˆ°çš„rootSaga"></a>createStoreç”¨åˆ°çš„rootSaga</h4><pre><code>import { takeLatest } from &apos;redux-saga/effects&apos;
/* ------------- Types ------------- */
import { CounterTypes1 } from &apos;../redux/counterReducer1&apos;
import { CounterTypes2 } from &apos;../redux/counterReducer2&apos;
/* ------------- Sagas ------------- */
import { counterPlus1, counterMinus1 } from &apos;./counterSaga1&apos;
import { counterPlus2, counterMinus2 } from &apos;./counterSaga2&apos;
/* ------------- Connect Types To Sagas ------------- */
export default function * rootSaga () {
  yield [
    takeLatest(CounterTypes1.PLUS_NUM_SAGA, counterPlus1),
    takeLatest(CounterTypes1.MINUS_NUM_SAGA, counterMinus1),
    takeLatest(CounterTypes2.PLUS_NUM_SAGA2, counterPlus2),
    takeLatest(CounterTypes2.MINUS_NUM_SAGA2, counterMinus2),
  ]
}
</code></pre><h4 id="rootRedux-å¼•å…¥çš„counterReducer1"><a href="#rootRedux-å¼•å…¥çš„counterReducer1" class="headerlink" title="rootRedux å¼•å…¥çš„counterReducer1"></a>rootRedux å¼•å…¥çš„counterReducer1</h4><pre><code>import { createReducer, createActions } from &apos;reduxsauce&apos;
import Immutable from &apos;seamless-immutable&apos;
/* ------------- Types and Action Creators ------------- */
const { Types, Creators } = createActions({
  plusNum: [&apos;text&apos;], //typeåé©¼å³°ï¼Œç”Ÿæˆçš„æ˜¯å…¨å¤§å†™PLUS_NUM
  minusNum: null,
  plusNumSaga: [&apos;text&apos;],
  minusNumSaga: [&apos;text&apos;],
})

export const CounterTypes1 = Types //è¿™é‡Œå¯¼å‡ºæ˜¯ç»™sagaç›‘å¬ä½¿ç”¨
export default Creators
//å¯¼å‡ºactionç”Ÿæˆå™¨ Creatorsï¼Œ
//Creators.plusNum =(text) =&gt; {type:&apos;PLUS_NUM&apos; ,text:text}
/* ------------- Initial State ------------- */
export const INITIAL_STATE = Immutable({
  value:0
})
/* ------------- Reducers ------------- */
export const plus = (state,action) =&gt; {
  const { text } = action
  return state.merge({ value:state.value+text })
}
export const minus = (state,action) =&gt; {
  return state.merge({ value:state.value-1 })
}
/* ------------- Hookup Reducers To Types ------------- */
export const reducer = createReducer(INITIAL_STATE, {
  [Types.PLUS_NUM]: plus,
  [Types.MINUS_NUM]: minus
  //è¿™é‡Œreducerç›‘å¬Typesæ˜¯PLUS_NUMçš„action,æ‰§è¡Œå¯¹åº”çš„plusæ”¾æ³•
})
// reducerç”Ÿæˆå™¨ï¼Œç”Ÿæˆå¯¹åº”typeçš„reducer
</code></pre><h4 id="rootSagaå¼•å…¥çš„counterSaga1"><a href="#rootSagaå¼•å…¥çš„counterSaga1" class="headerlink" title="rootSagaå¼•å…¥çš„counterSaga1"></a>rootSagaå¼•å…¥çš„counterSaga1</h4><pre><code>import { put,select,call } from &apos;redux-saga/effects&apos;
import CounterActions1 from &apos;../redux/counterReducer1&apos;

// attempts to get state
// const getState = (state) =&gt; state.login

// let API={
//     request:(text)=&gt;{
//         return fetch(...)
//     }
// }

export function * counterPlus1 (action) {
    // const data = yield select(selectState) //é€šè¿‡selectå¯ä»¥è·å–å…¨å±€state

  // const check = yield call(API.request, text) //å¦‚æœæœ‰å¼‚æ­¥è¯·æ±‚ï¼Œç”¨callè°ƒç”¨
  // if(check.ok == &apos;ok&apos;){
  //     yield put(CounterActions1.xxx(xxx, xxx))
  // }
   const {text} = action
   alert(text)
   yield put(CounterActions1.plusNum(2))

}

export function * counterMinus1 (action) {
   const {text} = action
   alert(text)
   yield put(CounterActions1.minusNum())
}
</code></pre><h2 id="è°¨è®°"><a href="#è°¨è®°" class="headerlink" title="è°¨è®°"></a>è°¨è®°</h2><ul>
<li><code>saga</code>å’Œ<code>reducer</code>éƒ½ä¼šç›‘å¬<code>action</code>ç›‘å¬çš„é¡ºåºæ˜¯å…ˆ<code>reducer</code>å<code>saga</code>,æ‰€ä»¥å¦‚æœ<code>reducer</code>å’Œ<code>saga</code>éƒ½ç›‘å¬äº†ç›¸åŒçš„<code>action</code>,é‚£ä¹ˆ<code>saga</code>é€»è¾‘æ‰§è¡Œåœ¨<code>reducer</code>æ”¹å˜åçš„çŠ¶æ€åŸºç¡€ä¸Šï¼Œå°½é‡ä¸è¦ç”¨<code>saga</code>å’Œ<code>reducer</code>ç›‘å¬ç›¸åŒçš„reducer</li>
<li>ç›¸åŒçš„<code>action</code>å†…å®¹ï¼Œä¸ç®¡æ˜¯è°è§¦å‘çš„ï¼Œæ‰€æœ‰ç›‘å¬æ­¤<code>action</code>çš„<code>reducer</code>å’Œ<code>action</code>éƒ½ä¼šè§¦å‘ï¼Œæ‰€ä»¥è¯·åŒºåˆ†å¥½<code>action</code>çš„è§¦å‘åŠç›‘å¬æ“ä½œ</li>
<li>å’Œ<code>thunk</code>ä¸€æ ·<code>(dispatch,getState)</code> ç¬¬äºŒä¸ªå‚æ•°ä¼šå°†å…¨å±€çš„<code>state</code>å‡½æ•°å½“å‚æ•°ä¼ é€’è¿›æ¥ï¼Œ<code>saga</code>çš„<code>select(()=&gt;fn(state))</code>ä¹Ÿå¯ä»¥è°ƒç”¨å…¨å±€<code>state</code></li>
</ul>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/04/04/saga-begining/" class="archive-article-date">
  	<time datetime="2017-04-04T02:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-04-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-imgClipUpload" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/27/imgClipUpload/">imgClipUpload</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>å¾ˆå¤šæƒ…å†µä¸‹ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡éƒ½éœ€è¦ç»è¿‡è£å‰ªï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¤´åƒäº†ã€‚HTML5 çš„å‡ºç°è®©æˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿çš„å®ç°è¿™ä¸€éœ€æ±‚ã€‚</p>
</blockquote>
<h3 id="ç›´æ¥åœ¨gitHubæŸ¥çœ‹imgClipUploadğŸš˜"><a href="#ç›´æ¥åœ¨gitHubæŸ¥çœ‹imgClipUploadğŸš˜" class="headerlink" title="ç›´æ¥åœ¨gitHubæŸ¥çœ‹imgClipUploadğŸš˜"></a>ç›´æ¥åœ¨gitHubæŸ¥çœ‹<a href="https://github.com/Jasonellen/imgClipUpload" target="_blank" rel="external">imgClipUpload</a>ğŸš˜</h3><h4 id="âœ¨HTMLï¼š"><a href="#âœ¨HTMLï¼š" class="headerlink" title="âœ¨HTMLï¼š"></a>âœ¨HTMLï¼š</h4><pre><code>&lt;!-- å¸¦Idçš„æ ‡ç­¾æ˜¯å¿…é¡»è¦çš„ --&gt;
&lt;canvas id=&quot;canvas&quot; &gt;&lt;/canvas&gt; //ç”»å¸ƒ
&lt;div class=&quot;file rake&quot;&gt;
    &lt;input type=&quot;file&quot; id=&quot;file&quot;/&gt;ä¸Šä¼ å›¾ç‰‡
&lt;/div&gt;
&lt;div id=&quot;rotateR&quot; class=&quot;rake&quot;&gt;æ—‹è½¬&lt;/div&gt;
&lt;div class=&quot;cancle rake&quot;&gt;å–æ¶ˆ&lt;/div&gt;
&lt;div id=&quot;save&quot; class=&quot;rake&quot;&gt;æˆªå›¾&lt;/div&gt;
&lt;div class=&quot;upload rake&quot;&gt;ä¸Šä¼ &lt;/div&gt;
&lt;img src=&quot;&quot; alt=&quot;&quot; id=&quot;img&quot;/&gt; //æˆªå›¾æˆ–ä¿å­˜çš„å›¾ç‰‡
</code></pre><h4 id="âœ¨JSï¼š"><a href="#âœ¨JSï¼š" class="headerlink" title="âœ¨JSï¼š"></a>âœ¨JSï¼š</h4><ul>
<li><p>æŒ‰é’®ç§»å…¥ç§»é™¤åŠ¨ç”»æ•ˆæœ</p>
<pre><code>$(&apos;.rake&apos;).mouseenter(function(){
    $(this).addClass(&apos;rubberBand animated infinite&apos;)
})
.mouseleave(function(){
    $(this).removeClass(&apos;rubberBand animated infinite&apos;)
})
</code></pre></li>
<li><p>åˆ›å»ºæˆªå›¾</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var cut = new ImgClip(&#123;</div><div class="line">  canvas : &apos;canvas&apos;, // canvas id</div><div class="line">  width:$(window).width(), //canvas å®½åº¦</div><div class="line">  height:$(window).height(), //canvas é«˜åº¦</div><div class="line">  fileObj : &apos;file&apos;, // file id</div><div class="line">  cutBtn : &apos;save&apos;, // cut btn id</div><div class="line">  resultObj : &apos;img&apos;, // result img id</div><div class="line">  rotateR : &apos;rotateR&apos;,</div><div class="line">  cutScale : 3/4, // é«˜:å®½</div><div class="line">  cutW : &apos;300&apos; // &apos;æ•°å­—&apos;æˆ–è€…&apos;winW&apos;å…³é”®å­—ï¼Œè£åˆ‡å®½åº¦ï¼Œéšå±å¹•å®½æˆ–è‡ªå·±è®¾ç½®</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>ç‚¹å‡»é€‰æ‹©æœ¬åœ°å›¾ç‰‡é¢„è§ˆ</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(&apos;.file&apos;).on(&apos;change&apos;,&apos;#file&apos;,function()&#123;</div><div class="line">  $(&apos;#canvas&apos;).css(&apos;display&apos;,&apos;block&apos;)</div><div class="line">  $(&apos;#img&apos;).css(&apos;display&apos;,&apos;none&apos;)</div><div class="line">  $(this)[0].value=&apos;&apos;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>å–æ¶ˆé¢„è§ˆ</p>
<pre><code>$(&apos;.cancle&apos;).click(function(){
  $(&apos;#canvas&apos;).css(&apos;display&apos;,&apos;none&apos;)
  $(&apos;#img&apos;).css(&apos;display&apos;,&apos;block&apos;)
})
</code></pre><p>  â€‹</p>
</li>
<li><p>ä¿å­˜æˆªå›¾</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(&apos;#save&apos;).click(function()&#123;</div><div class="line">  $(&apos;#canvas&apos;).css(&apos;display&apos;,&apos;none&apos;)</div><div class="line">  $(&apos;#img&apos;).css(&apos;display&apos;,&apos;block&apos;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$(&apos;.upload&apos;).click(function()&#123;</div><div class="line">  var url = $(&apos;#img&apos;).attr(&apos;src&apos;)</div><div class="line">  var file = dataURItoBlob(url)</div><div class="line">  var fd=new FormData();</div><div class="line">  fd.append(&apos;file&apos;,file);</div><div class="line">  //å¦‚æœéœ€è¦å¤šå›¾ä¸Šä¼ åªéœ€è¦æŠŠå¯¹è±¡æ·»åŠ è¿›æ•°ç»„å°±å¯ä»¥äº†ï¼Œå‘è¿™æ ·ï¼šfd.append(&apos;file[]&apos;,file);</div><div class="line">  $.ajax(&#123;</div><div class="line">     url:&quot;php/upload.php&quot;,</div><div class="line">     type:&quot;POST&quot;,</div><div class="line">     data:fd,</div><div class="line">     processData: false,</div><div class="line">     contentType: false,</div><div class="line">     success:function(data)&#123;</div><div class="line">         console.log(data)</div><div class="line">     &#125;</div><div class="line">  &#125;); </div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>base64è½¬Blob</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function dataURItoBlob (base64Data) &#123;</div><div class="line">   var byteString;</div><div class="line">   if (base64Data.split(&apos;,&apos;)[0].indexOf(&apos;base64&apos;) &gt;= 0)</div><div class="line">       byteString = atob(base64Data.split(&apos;,&apos;)[1]);</div><div class="line">   else</div><div class="line">       byteString = unescape(base64Data.split(&apos;,&apos;)[1]);</div><div class="line">   var type = base64Data.split(&apos;,&apos;)[0].split(&apos;:&apos;)[1].split(&apos;;&apos;)[0];</div><div class="line">   var ia = new Uint8Array(byteString.length);</div><div class="line">   for (var i = 0; i &lt; byteString.length; i++) &#123;</div><div class="line">       ia[i] = byteString.charCodeAt(i);</div><div class="line">   &#125;</div><div class="line">   // canvas.toDataURL è¿”å›çš„é»˜è®¤æ ¼å¼æ˜¯ image/png</div><div class="line">   return new Blob([ia], &#123;type: type&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="âœ¨php"><a href="#âœ¨php" class="headerlink" title="âœ¨php:"></a>âœ¨php:</h4><pre><code>&lt;?php
  header(&apos;Access-Control-Allow-Origin:*&apos;);
  //å¤„ç†æ–‡ä»¶
  if(!file_exists(&apos;./img&apos;)){
      mkdir(&apos;./img&apos;);
  }
  $file = $_FILES[&apos;file&apos;][&apos;tmp_name&apos;];  //è·å–æ–‡ä»¶è·¯å¾„
  $newName = $_FILES[&apos;file&apos;][&apos;name&apos;]; //è·å–æ–‡ä»¶çš„åå­—
  $res = move_uploaded_file($file,&quot;./img/{$newName}&quot;); //åŸåä¸Šä¼ åˆ°æŒ‡å®šæ–‡ä»¶å¤¹
  print_r($_FILES)
?&gt;
</code></pre><p>ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/03/27/imgClipUpload/" class="archive-article-date">
  	<time datetime="2017-03-26T17:01:40.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-03-27</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-package" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/11/package/">é…ç½®ç›¸å…³â€”package.json</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><p>åœ¨package.jsonä¸­<em>æœ€</em>é‡è¦çš„å°±æ˜¯nameå’Œversionå­—æ®µã€‚ä»–ä»¬éƒ½æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæ²¡æœ‰å°±æ— æ³•installã€‚nameå’Œversionä¸€èµ·ç»„æˆçš„æ ‡è¯†åœ¨å‡è®¾ä¸­æ˜¯å”¯ä¸€çš„ã€‚æ”¹å˜åŒ…åº”è¯¥åŒæ—¶æ”¹å˜versionã€‚</p>
<p>nameæ˜¯è¿™ä¸ªä¸œè¥¿çš„åå­—ã€‚æ³¨æ„ï¼š</p>
<ul>
<li>ä¸è¦æŠŠnodeæˆ–è€…jsæ”¾åœ¨åå­—ä¸­ã€‚å› ä¸ºä½ å†™äº†package.jsonå®ƒå°±è¢«å‡å®šæˆä¸ºäº†jsï¼Œä¸è¿‡ä½ å¯ä»¥ç”¨â€engineâ€å­—æ®µæŒ‡å®šä¸€ä¸ªå¼•æ“ï¼ˆè§åæ–‡ï¼‰ã€‚</li>
<li>è¿™ä¸ªåå­—ä¼šä½œä¸ºåœ¨URLçš„ä¸€éƒ¨åˆ†ã€å‘½ä»¤è¡Œçš„å‚æ•°æˆ–è€…æ–‡ä»¶å¤¹çš„åå­—ã€‚ä»»ä½•non-url-safeçš„å­—ç¬¦éƒ½æ˜¯ä¸èƒ½ç”¨çš„ã€‚</li>
<li>è¿™ä¸ªåå­—å¯èƒ½ä¼šä½œä¸ºå‚æ•°è¢«ä¼ å…¥require()ï¼Œæ‰€ä»¥å®ƒåº”è¯¥æ¯”è¾ƒçŸ­ï¼Œä½†ä¹Ÿè¦æ„ä¹‰æ¸…æ™°ã€‚</li>
<li>åœ¨ä½ çˆ±ä¸Šä½ çš„åå­—ä¹‹å‰ï¼Œä½ å¯èƒ½è¦å»npm registryæŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªåå­—æ˜¯å¦å·²ç»è¢«ä½¿ç”¨äº†ã€‚ <a href="http://registry.npmjs.org/" target="_blank" rel="external">http://registry.npmjs.org/</a></li>
</ul>
<h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><p>åœ¨package.jsonä¸­<em>æœ€</em>é‡è¦çš„å°±æ˜¯nameå’Œversionå­—æ®µã€‚ä»–ä»¬éƒ½æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæ²¡æœ‰å°±æ— æ³•installã€‚nameå’Œversionä¸€èµ·ç»„æˆçš„æ ‡è¯†åœ¨å‡è®¾ä¸­æ˜¯å”¯ä¸€çš„ã€‚æ”¹å˜åŒ…åº”è¯¥åŒæ—¶æ”¹å˜versionã€‚</p>
<p>versionå¿…é¡»èƒ½è¢« <a href="https://github.com/isaacs/node-semver" target="_blank" rel="external">node-semver</a>è§£æï¼Œå®ƒè¢«åŒ…åœ¨npmçš„ä¾èµ–ä¸­ã€‚ï¼ˆè¦è‡ªå·±ç”¨å¯ä»¥æ‰§è¡Œ<code>npm install semver</code>ï¼‰</p>
<p>æ›´å¤šå¯ç”¨çš„â€œæ•°å­—â€æˆ–è€…â€œèŒƒå›´â€è§<a href="https://npmjs.org/doc/misc/semver.html" target="_blank" rel="external">semver(7)</a>.</p>
<h2 id="description"><a href="#description" class="headerlink" title="description"></a>description</h2><p>Put a description in it. Itâ€™s a string. This helps people discover your package, as itâ€™s listed in <code>npm search</code>.</p>
<h2 id="keywords"><a href="#keywords" class="headerlink" title="keywords"></a>keywords</h2><p>æ”¾ç®€ä»‹ï¼Œå­—ç¬¦ä¸²ã€‚æ–¹ä¾¿å±Œä¸ä»¬åœ¨ <code>npm search</code>ä¸­æœç´¢ã€‚</p>
<h2 id="homepage"><a href="#homepage" class="headerlink" title="homepage"></a>homepage</h2><p>é¡¹ç›®å®˜ç½‘çš„urlã€‚</p>
<h2 id="bugs"><a href="#bugs" class="headerlink" title="bugs"></a>bugs</h2><p>ä½ é¡¹ç›®çš„æäº¤é—®é¢˜çš„urlå’Œï¼ˆæˆ–ï¼‰é‚®ä»¶åœ°å€ã€‚è¿™å¯¹é‡åˆ°é—®é¢˜çš„å±Œä¸å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å·®ä¸å¤šé•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;url&quot; : &quot;http://github.com/owner/project/issues&quot;</div><div class="line">, &quot;email&quot; : &quot;project@hostname.com&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–è€…æŒ‡å®šä¸¤ä¸ªã€‚å¦‚æœä½ åªæƒ³æä¾›ä¸€ä¸ªurlï¼Œé‚£å°±ä¸ç”¨å¯¹è±¡äº†ï¼Œå­—ç¬¦ä¸²å°±è¡Œã€‚</p>
<p>å¦‚æœæä¾›äº†urlï¼Œå®ƒä¼šè¢«<code>npm bugs</code>å‘½ä»¤ä½¿ç”¨ã€‚</p>
<h2 id="license"><a href="#license" class="headerlink" title="license"></a>license</h2><p>ä½ åº”è¯¥è¦æŒ‡å®šä¸€ä¸ªè®¸å¯è¯ï¼Œè®©äººçŸ¥é“ä½¿ç”¨çš„æƒåˆ©å’Œé™åˆ¶çš„ã€‚</p>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œå‡å¦‚ä½ ç”¨ä¸€ä¸ªåƒBSDæˆ–è€…MITè¿™æ ·é€šç”¨çš„è®¸å¯è¯ï¼Œå°±åªéœ€è¦æŒ‡å®šä¸€ä¸ªè®¸å¯è¯çš„åå­—ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;license&quot; : &quot;BSD&quot; &#125;</div></pre></td></tr></table></figure>
<h2 id="people-fields-author-contributors"><a href="#people-fields-author-contributors" class="headerlink" title="people fields: author, contributors"></a>people fields: author, contributors</h2><p>authoræ˜¯ä¸€ä¸ªäººã€‚contributorsæ˜¯ä¸€å †äººçš„æ•°ç»„ã€‚personæ˜¯ä¸€ä¸ªæœ‰nameå­—æ®µï¼Œå¯é€‰çš„æœ‰urlã€emailå­—æ®µçš„å¯¹è±¡ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;Barney Rubble&quot;</div><div class="line">, &quot;email&quot; : &quot;b@rubble.com&quot;</div><div class="line">, &quot;url&quot; : &quot;http://barnyrubble.tumblr.com/&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="files"><a href="#files" class="headerlink" title="files"></a>files</h2><p>filesæ˜¯ä¸€ä¸ªåŒ…å«é¡¹ç›®ä¸­çš„æ–‡ä»¶çš„æ•°ç»„ã€‚å¦‚æœå‘½åäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‚£ä¹Ÿä¼šåŒ…å«æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ã€‚ï¼ˆé™¤éè¢«å…¶ä»–æ¡ä»¶å¿½ç•¥äº†ï¼‰</p>
<p>ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª.npmignoreæ–‡ä»¶ï¼Œå³,ä½¿è¢«åŒ…å«åœ¨fileså­—æ®µä¸­å¾—æ–‡ä»¶è¢«ç•™ä¸‹ã€‚å…¶å®å°±åƒ.gitignoreä¸€æ ·ã€‚</p>
<h2 id="main"><a href="#main" class="headerlink" title="main"></a>main</h2><p>mainå­—æ®µé…ç½®ä¸€ä¸ªæ–‡ä»¶åæŒ‡å‘æ¨¡å—çš„å…¥å£ç¨‹åºã€‚å¦‚æœä½ åŒ…çš„åå­—å«fooï¼Œç„¶åç”¨æˆ·require(â€œfooâ€)ï¼Œmainé…ç½®çš„æ¨¡å—çš„exportså¯¹è±¡ä¼šè¢«è¿”å›ã€‚</p>
<p>è¿™åº”è¯¥æ˜¯ä¸€ä¸ªç›¸å¯¹äºæ ¹ç›®å½•çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
<p>å¯¹äºå¤§å¤šæ•°æ¨¡å—ï¼Œå®ƒæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œå…¶ä»–çš„éƒ½æ²¡å•¥ã€‚</p>
<h2 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h2><p>å¾ˆå¤šåŒ…éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶å¸Œæœ›è¢«æ”¾åˆ°PATHä¸­ã€‚npmè®©å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒäº†ï¼ˆå®é™…ä¸Šï¼Œå°±æ˜¯è¿™ä¸ªåŠŸèƒ½è®©npmå¯æ‰§è¡Œçš„ï¼‰ã€‚</p>
<p>è¦ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œç»™package.jsonä¸­çš„<code>bin</code>å­—æ®µä¸€ä¸ªå‘½ä»¤ååˆ°æ–‡ä»¶ä½ç½®çš„mapã€‚åˆå§‹åŒ–çš„æ—¶å€™npmä¼šå°†ä»–é“¾æ¥åˆ°<code>prefix/bin</code>ï¼ˆå…¨å±€åˆå§‹åŒ–ï¼‰æˆ–è€…<code>./node_modules/.bin/</code>ï¼ˆæœ¬åœ°åˆå§‹åŒ–ï¼‰ã€‚</p>
<p>æ¯”å¦‚ï¼Œnpmæœ‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;bin&quot; : &#123; &quot;npm&quot; : &quot;./cli.js&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œå½“ä½ åˆå§‹åŒ–npmï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥åˆ°<code>cli.js</code>è„šæœ¬åˆ°<code>/usr/local/bin/npm</code>ã€‚</p>
<p>å¦‚æœä½ åªæœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”åå­—å’ŒåŒ…åä¸€æ ·ã€‚é‚£ä¹ˆä½ å¯ä»¥åªç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot;: &quot;my-program&quot;</div><div class="line">, &quot;version&quot;: &quot;1.2.5&quot;</div><div class="line">, &quot;bin&quot;: &quot;./path/to/program&quot; &#125;</div></pre></td></tr></table></figure>
<p>ç»“æœå’Œè¿™ä¸ªä¸€æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot;: &quot;my-program&quot;</div><div class="line">, &quot;version&quot;: &quot;1.2.5&quot;</div><div class="line">, &quot;bin&quot; : &#123; &quot;my-program&quot; : &quot;./path/to/program&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<h2 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h2><p>æŒ‡å®šä½ çš„ä»£ç å­˜æ”¾çš„åœ°æ–¹ã€‚è¿™ä¸ªå¯¹å¸Œæœ›è´¡çŒ®çš„äººæœ‰å¸®åŠ©ã€‚å¦‚æœgitä»“åº“åœ¨githubä¸Šï¼Œé‚£ä¹ˆ<code>npm docs</code>å‘½ä»¤èƒ½æ‰¾åˆ°ä½ ã€‚</p>
<p>è¿™æ ·åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&quot;repository&quot; :</div><div class="line">  &#123; &quot;type&quot; : &quot;git&quot;</div><div class="line">  , &quot;url&quot; : &quot;http://github.com/isaacs/npm.git&quot;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&quot;repository&quot; :</div><div class="line">  &#123; &quot;type&quot; : &quot;svn&quot;</div><div class="line">  , &quot;url&quot; : &quot;http://v8.googlecode.com/svn/trunk/&quot;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>URLåº”è¯¥æ˜¯å…¬å¼€çš„ï¼ˆå³ä¾¿æ˜¯åªè¯»çš„ï¼‰èƒ½ç›´æ¥è¢«æœªç»è¿‡ä¿®æ”¹çš„ç‰ˆæœ¬æ§åˆ¶ç¨‹åºå¤„ç†çš„urlã€‚ä¸åº”è¯¥æ˜¯ä¸€ä¸ªhtmlçš„é¡¹ç›®é¡µé¢ã€‚å› ä¸ºå®ƒæ˜¯ç»™è®¡ç®—æœºçœ‹çš„ã€‚</p>
<h2 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h2><p>â€œscriptsâ€æ˜¯ä¸€ä¸ªç”±è„šæœ¬å‘½ä»¤ç»„æˆçš„hashå¯¹è±¡ï¼Œä»–ä»¬åœ¨åŒ…ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¸­è¢«æ‰§è¡Œã€‚keyæ˜¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œvalueæ˜¯è¦è¿è¡Œçš„å‘½ä»¤ã€‚å…¶ä¸­<code>start</code>å’Œ<code>test</code>å¯ä»¥ç®€å†™åƒè¿™æ ·<code>npn start</code> è€Œä¸ç”¨<code>npm run start</code></p>
<p>å‚è§ <a href="https://npmjs.org/doc/misc/npm-scripts.html" target="_blank" rel="external">npm-scripts(7)</a></p>
<h2 id="config"><a href="#config" class="headerlink" title="config"></a>config</h2><p>â€œconfigâ€ hashå¯ä»¥ç”¨æ¥é…ç½®ç”¨äºåŒ…è„šæœ¬ä¸­çš„è·¨ç‰ˆæœ¬å‚æ•°ã€‚åœ¨å®ä¾‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªåŒ…æœ‰ä¸‹é¢çš„é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;foo&quot;</div><div class="line">, &quot;config&quot; : &#123; &quot;port&quot; : &quot;8080&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<p>ç„¶åæœ‰ä¸€ä¸ªâ€œstartâ€å‘½ä»¤å¼•ç”¨äº†<code>npm_package_config_port</code>ç¯å¢ƒå˜é‡ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡<code>npm config set foo:port 8001</code>æ¥é‡å†™ä»–ã€‚</p>
<p>å‚è§ <a href="https://npmjs.org/doc/misc/npm-config.html" target="_blank" rel="external">npm-config(7)</a> å’Œ <a href="https://npmjs.org/doc/misc/npm-scripts.html" target="_blank" rel="external">npm-scripts(7)</a>ã€‚</p>
<h2 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h2><p>é¡¹ç›®è¿è¡Œéœ€è¦ä¾èµ–çš„æ’ä»¶</p>
<p><strong>è¯·ä¸è¦å°†æµ‹è¯•æˆ–è¿‡æ¸¡æ€§çš„ä¾èµ–æ”¾åœ¨<code>dependencies</code>ä¸­ã€‚</strong>è§ä¸‹æ–‡çš„<code>devDependencies</code>ã€‚</p>
<p>è¯¦è§<a href="https://npmjs.org/doc/misc/semver.html" target="_blank" rel="external">semver(7)</a>.</p>
<ul>
<li><code>version</code> å¿…é¡»å®Œå…¨å’Œ<code>version</code>ä¸€è‡´</li>
<li><code>&gt;version</code> å¿…é¡»æ¯”<code>version</code>å¤§</li>
<li><code>&gt;=version</code> åŒä¸Š</li>
<li><code>&lt;version</code> åŒä¸Š</li>
<li><code>&lt;=version</code> åŒä¸Š</li>
<li><code>~version</code> çº¦ç­‰äºï¼Œè§<a href="https://npmjs.org/doc/misc/semver.html" target="_blank" rel="external">semver(7)</a></li>
<li><code>^version</code> ç›¸åŒå¤§ç‰ˆæœ¬çš„æœ€æ–°ç‰ˆæœ¬</li>
<li><code>1.2.x</code> 1.2.0, 1.2.1, ç­‰ï¼Œä½†ä¸åŒ…æ‹¬1.3.0</li>
<li><code>http://...</code> è§ä¸‹æ–‡â€™ä¾èµ–URLâ€™</li>
<li><code>*</code> æ‰€æœ‰</li>
<li><code>&quot;&quot;</code> ç©ºï¼ŒåŒ<code>*</code></li>
<li><code>version1 - version2</code> åŒ <code>&gt;=version1 &lt;=version2</code>.</li>
<li><code>range1 || range2</code> äºŒé€‰ä¸€ã€‚</li>
<li><code>git...</code> è§ä¸‹æ–‡â€™ä¾èµ–Git URLâ€™</li>
<li><code>user/repo</code> è§ä¸‹æ–‡â€™GitHub URLsâ€™</li>
</ul>
<p>æ¯”å¦‚ä¸‹é¢éƒ½æ˜¯åˆæ³•çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;dependencies&quot; :</div><div class="line">  &#123; &quot;foo&quot; : &quot;1.0.0 - 2.9999.9999&quot;</div><div class="line">  , &quot;bar&quot; : &quot;&gt;=1.0.2 &lt;2.1.2&quot;</div><div class="line">  , &quot;baz&quot; : &quot;&gt;1.0.2 &lt;=2.3.4&quot;</div><div class="line">  , &quot;boo&quot; : &quot;2.0.1&quot;</div><div class="line">  , &quot;boo&quot; : &quot;^2.0.1&quot;</div><div class="line">  , &quot;qux&quot; : &quot;&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0&quot;</div><div class="line">  , &quot;asd&quot; : &quot;http://asdf.com/asdf.tar.gz&quot;</div><div class="line">  , &quot;til&quot; : &quot;~1.2&quot;</div><div class="line">  , &quot;elf&quot; : &quot;~1.2.3&quot;</div><div class="line">  , &quot;two&quot; : &quot;2.x&quot;</div><div class="line">  , &quot;thr&quot; : &quot;3.3.x&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä¾èµ–URL"><a href="#ä¾èµ–URL" class="headerlink" title="ä¾èµ–URL"></a>ä¾èµ–URL</h3><p>å¯ä»¥æŒ‡å®šä¸€ä¸ªtarball URLï¼Œè¿™ä¸ªtarballå°†åœ¨åŒ…è¢«åˆå§‹åŒ–çš„æ—¶å€™ä¸‹è½½å¹¶åˆå§‹åŒ–ã€‚</p>
<h3 id="ä¾èµ–Git-URL"><a href="#ä¾èµ–Git-URL" class="headerlink" title="ä¾èµ–Git URL"></a>ä¾èµ–Git URL</h3><p>Git urls å¯ä»¥æ˜¯ä¸‹é¢å‡ ç§å½¢å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git://github.com/user/project.git#commit-ish</div><div class="line">git+ssh://user@hostname:project.git#commit-ish</div><div class="line">git+ssh://user@hostname/project.git#commit-ish</div><div class="line">git+http://user@hostname/project/blah.git#commit-ish</div><div class="line">git+https://user@hostname/project/blah.git#commit-ish</div></pre></td></tr></table></figure>
<p><code>commit-ish</code>æ˜¯å¯ä»¥è¢«<code>git checkout</code>çš„ä»»ä½•tagã€shaæˆ–è€…branchã€‚é»˜è®¤ä¸º<code>master</code>ã€‚</p>
<h2 id="GitHub-URLs"><a href="#GitHub-URLs" class="headerlink" title="GitHub URLs"></a>GitHub URLs</h2><p>1.1.65ç‰ˆåï¼Œä½ å¯ä»¥ä»…ä»…ç”¨â€œuser/foo-projectâ€å¼•ç”¨GitHub urlsï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"foo"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.0"</span>,</div><div class="line">  <span class="attr">"dependencies"</span>: &#123;</div><div class="line">    <span class="attr">"express"</span>: <span class="string">"visionmedia/express"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="devDependencies"><a href="#devDependencies" class="headerlink" title="devDependencies"></a>devDependencies</h2><p>å¦‚æœæœ‰äººè¦ç”¨ä½ çš„æ¨¡å—ï¼Œä½†ä»–ä»¬å¯èƒ½ä¸éœ€è¦ä½ å¼€å‘æ‰€ä½¿ç”¨çš„å¤–éƒ¨æµ‹è¯•æˆ–è€…æ–‡æ¡£æ¡†æ¶ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½å°†è¿™äº›é™„å±çš„é¡¹ç›®åˆ—åœ¨<code>devDependencies</code>ä¸­ã€‚</p>
<p>è¿™äº›ä¸œè¥¿ä¼šåœ¨æ ¹ç›®å½•æ‰§è¡Œ<code>npm link</code>æˆ–è€…<code>npm install</code>çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå¹¶å¯ä»¥åƒå…¶ä»–npmé…ç½®å‚æ•°ä¸€æ ·ç®¡ç†</p>
<p>å¯¹äºéç‰¹å®šå¹³å°çš„æ„å»ºæ­¥éª¤ï¼Œæ¯”å¦‚éœ€è¦ç¼–è¯‘CoffeeScriptï¼Œå¯ä»¥ç”¨<code>prepublish</code>è„šæœ¬å»å®ç°ï¼Œå¹¶æŠŠå®ƒä¾èµ–çš„åŒ…æ”¾åœ¨devDependencyä¸­ã€‚ï¼ˆè¯‘è€…æ³¨ï¼š<code>prepublish</code>å®šä¹‰äº†åœ¨æ‰§è¡Œ<code>npm publish</code>çš„æ—¶å€™å…ˆè¡Œæ‰§è¡Œçš„è„šæœ¬ã€‚è¯¦è§<code>scripts</code>ï¼‰</p>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="attr">"name"</span>: <span class="string">"ethopia-waza"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">"a delightfully fruity coffee varietal"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.2.3"</span>,</div><div class="line">  <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">    <span class="attr">"coffee-script"</span>: <span class="string">"~1.6.3"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"prepublish"</span>: <span class="string">"coffee -o lib/ -c src/waza.coffee"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"lib/waza.js"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>prepublish</code>è„šæœ¬ä¼šåœ¨publishingå‰è¿è¡Œï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸ç”¨è‡ªå·±å»requireæ¥ç¼–è¯‘å°±èƒ½ä½¿ç”¨ã€‚å¹¶ä¸”åœ¨å¼€å‘æ¨¡å¼ä¸­ï¼ˆæ¯”å¦‚æœ¬åœ°è¿è¡Œ<code>npm install</code>ï¼‰ä¼šè¿è¡Œè¿™ä¸ªè„šæœ¬ä»¥ä¾¿æ›´å¥½åœ°æµ‹è¯•ã€‚</p>
<h2 id="peerDependencies"><a href="#peerDependencies" class="headerlink" title="peerDependencies"></a>peerDependencies</h2><p>åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œå¦‚åœ¨ä¸€ä¸ªhostä¸­ä¸å¿…é¡»è¿›è¡Œ<code>require</code>æ—¶å€™ï¼Œä½ æƒ³è¡¨ç°ä½ çš„packageä¸ä¸€ä¸ªhostå·¥å…·æˆ–è€…åº“çš„å…¼å®¹å…³é”®ã€‚è¿™ä¸€èˆ¬ç”¨æ¥å¼•ç”¨<em>æ’ä»¶</em>ã€‚å°¤å…¶æ˜¯ä½ çš„æ¨¡å—å¯èƒ½è¦æš´éœ²ä¸€ä¸ªç‰¹å®šçš„æ¥å£ï¼Œå¹¶ç”±hostæ–‡æ¡£æ¥é¢„æœŸå’ŒæŒ‡å®šã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;tea-latte&quot;,</div><div class="line">  &quot;version&quot;: &quot;1.3.5&quot;</div><div class="line">  &quot;peerDependencies&quot;: &#123;</div><div class="line">    &quot;tea&quot;: &quot;2.x&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™èƒ½ä¿è¯ä½ çš„packageå¯ä»¥åªå’Œteaçš„2.xç‰ˆæœ¬ä¸€èµ·åˆå§‹åŒ–ã€‚<code>npm install tea-latte</code>å¯èƒ½ä¼šäº§ç”Ÿä¸‹é¢çš„ä¾èµ–å…³ç³»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Ã¢â€Å“Ã¢â€â‚¬Ã¢â€â‚¬ tea-latte@1.3.5</div><div class="line">Ã¢â€â€Ã¢â€â‚¬Ã¢â€â‚¬ tea@2.2.0</div></pre></td></tr></table></figure>
<p>è¯•å›¾åˆå§‹åŒ–å¦ä¸€ä¸ªæœ‰ä¼šå†²çªçš„ä¾èµ–çš„æ’ä»¶å°†å¯¼è‡´ä¸€ä¸ªé”™è¯¯ã€‚å› æ­¤ï¼Œç¡®ä¿ä½ çš„æ’ä»¶çš„éœ€æ±‚çº¦æŸè¶Šå¼±è¶Šå¥½ï¼Œè€Œä¸è¦å»æŠŠå®ƒé”å®šåˆ°ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚</p>
<p>å‡è®¾è¿™ä¸ªhostéµå®ˆsemverè§„èŒƒï¼Œåªæ”¹å˜è¿™ä¸ªpackageçš„ä¸»ç‰ˆæœ¬ä¼šæ‰“ç ´ä½ çš„æ’ä»¶ã€‚å› æ­¤ï¼Œå¦‚æœä½ åœ¨packageä¸­ç”¨è¿‡æ¯ä¸ª1.xç‰ˆæœ¬ï¼Œå°±ç”¨â€^1.0â€æˆ–è€…â€1.xâ€æ¥è¡¨ç¤ºã€‚å¦‚æœä½ ä¾èµ–äºåŠŸèƒ½ä»‹ç»1.5.2ï¼Œç”¨â€&gt;= 1.5.2 &lt; 2â€ã€‚</p>
<h2 id="bundledDependencies"><a href="#bundledDependencies" class="headerlink" title="bundledDependencies"></a>bundledDependencies</h2><p>ä¸€ç»„åŒ…åï¼Œä»–ä»¬ä¼šåœ¨å‘å¸ƒçš„æ—¶å€™è¢«æ‰“åŒ…è¿›å»ã€‚</p>
<p>æ‹¼æˆ<code>&quot;bundleDependencies&quot;</code>ï¼ˆç¼ºdï¼‰ä¹Ÿå¯ä»¥ã€‚</p>
<h2 id="optionalDependencies"><a href="#optionalDependencies" class="headerlink" title="optionalDependencies"></a>optionalDependencies</h2><p>å¦‚æœä¸€ä¸ªä¾èµ–å¯ç”¨ï¼Œä½†ä½ å¸Œæœ›åœ¨å®ƒå®‰è£…é”™è¯¯çš„æ—¶å€™npmä¹Ÿèƒ½ç»§ç»­åˆå§‹åŒ–ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨<code>optionalDependencies</code> hashä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…ååˆ°ç‰ˆæœ¬æˆ–è€…urlçš„mapï¼Œå°±åƒ<code>dependencies</code> hashä¸€æ ·ã€‚åªæ˜¯å®ƒè¿è¡Œé”™è¯¯ã€‚</p>
<p>å¤„ç†ç¼ºä¹ä¾èµ–ä¹Ÿæ˜¯ä½ çš„ç¨‹åºçš„è´£ä»»ã€‚æ¯”å¦‚åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">  var foo = require(&apos;foo&apos;)</div><div class="line">  var fooVersion = require(&apos;foo/package.json&apos;).version</div><div class="line">&#125; catch (er) &#123;</div><div class="line">  foo = null</div><div class="line">&#125;</div><div class="line">if ( notGoodFooVersion(fooVersion) ) &#123;</div><div class="line">  foo = null</div><div class="line">&#125;</div><div class="line"></div><div class="line">// .. then later in your program ..</div><div class="line"></div><div class="line">if (foo) &#123;</div><div class="line">  foo.doFooThings()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>optionalDependencies</code>ä¼šè¦†ç›–<code>dependencies</code>ä¸­åŒåçš„é¡¹ï¼Œæ‰€ä»¥é€šå¸¸æ¯”åªæ”¾åœ¨ä¸€ä¸ªåœ°æ–¹å¥½ã€‚</p>
<h2 id="engines"><a href="#engines" class="headerlink" title="engines"></a>engines</h2><p>ä½ å¯ä»¥æŒ‡å®šå·¥ä½œçš„nodeçš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;engines&quot; : &#123; &quot;node&quot; : &quot;&gt;=0.10.3 &lt;0.12&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<p>å¹¶ä¸”ï¼Œåƒdependensiesä¸€æ ·ï¼Œå¦‚æœä½ ä¸æŒ‡å®šç‰ˆæœ¬æˆ–è€…æŒ‡å®šâ€œ*â€ä½œä¸ºç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ‰€æœ‰ç‰ˆæœ¬çš„nodeéƒ½å¯ä»¥ã€‚</p>
<p>å¦‚æœæŒ‡å®šä¸€ä¸ªâ€œenginesâ€å­—æ®µï¼Œé‚£ä¹ˆnpmä¼šéœ€è¦nodeåœ¨é‡Œé¢ï¼Œå¦‚æœâ€œenginesâ€è¢«çœç•¥ï¼Œnpmä¼šå‡å®šå®ƒåœ¨nodeä¸Šå·¥ä½œã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨â€œenginesâ€å­—æ®µæ¥æŒ‡å®šå“ªä¸€ä¸ªnpmç‰ˆæœ¬èƒ½æ›´å¥½åœ°åˆå§‹åŒ–ä½ çš„ç¨‹åºï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;engines&quot; : &#123; &quot;npm&quot; : &quot;~1.0.20&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<p>è®°ä½ï¼Œé™¤éç”¨æˆ·è®¾ç½®<code>engine-strict</code>æ ‡è®°ï¼Œè¿™ä¸ªå­—æ®µåªæ˜¯å»ºè®®å€¼ã€‚</p>
<h2 id="engineStrict"><a href="#engineStrict" class="headerlink" title="engineStrict"></a>engineStrict</h2><p>å¦‚æœä½ ç¡®å®šä½ çš„æ¨¡å—<em>ä¸€å®šä¸</em>ä¼šè¿è¡Œåœ¨ä½ æŒ‡å®šç‰ˆæœ¬ä¹‹å¤–çš„nodeæˆ–è€…npmä¸Šï¼Œä½ å¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­è®¾ç½®<code>&quot;engineStrict&quot;:true</code>ã€‚å®ƒä¼šé‡å†™ç”¨æˆ·çš„<code>engine-strict</code>è®¾ç½®ã€‚</p>
<p>é™¤éä½ éå¸¸éå¸¸ç¡®å®šï¼Œå¦åˆ™ä¸è¦è¿™æ ·åšã€‚å¦‚æœä½ çš„engines hashè¿‡åº¦åœ°é™åˆ¶ï¼Œå¾ˆå¯èƒ½è½»æ˜“è®©è‡ªå·±é™·å…¥çª˜å¢ƒã€‚æ…é‡åœ°è€ƒè™‘è¿™ä¸ªé€‰æ‹©ã€‚å¦‚æœå¤§å®¶æ»¥ç”¨å®ƒï¼Œå®ƒä¼šå†ä»¥åçš„npmç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚</p>
<h2 id="os"><a href="#os" class="headerlink" title="os"></a>os</h2><p>ä½ å¯ä»¥æŒ‡å®šä½ çš„æ¨¡å—è¦è¿è¡Œåœ¨å“ªäº›æ“ä½œç³»ç»Ÿä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;os&quot; : [ &quot;darwin&quot;, &quot;linux&quot; ]</div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨é»‘åå•ä»£æ›¿ç™½åå•ï¼Œåœ¨åå­—å‰é¢åŠ ä¸Šâ€œ!â€å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;os&quot; : [ &quot;!win32&quot; ]</div></pre></td></tr></table></figure>
<p>æ“ä½œç³»ç»Ÿç”¨<code>process.platform</code>æ¥æ¢æµ‹ã€‚</p>
<p>è™½ç„¶æ²¡æœ‰å¾ˆå¥½åœ°ç†ç”±ï¼Œä½†å®ƒæ˜¯åŒæ—¶æ”¯æŒé»‘åå•å’Œç™½åå•çš„ã€‚</p>
<h2 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h2><p>å¦‚æœä½ çš„ä»£ç åªèƒ½è¿è¡Œåœ¨ç‰¹å®šçš„cpuæ¶æ„ä¸‹ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;cpu&quot; : [ &quot;x64&quot;, &quot;ia32&quot; ]</div></pre></td></tr></table></figure>
<p>å°±åƒ<code>os</code>é€‰é¡¹ï¼Œä½ ä¹Ÿå¯ä»¥é»‘ä¸€ä¸ªæ¶æ„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;cpu&quot; : [ &quot;!arm&quot;, &quot;!mips&quot; ]</div></pre></td></tr></table></figure>
<p>cpuæ¶æ„ç”¨<code>process.arch</code>æ¢æµ‹ã€‚</p>
<h2 id="preferGlobal"><a href="#preferGlobal" class="headerlink" title="preferGlobal"></a>preferGlobal</h2><p>å¦‚æœåŒ…ä¸»è¦æ˜¯éœ€è¦å…¨å±€å®‰è£…çš„å‘½ä»¤è¡Œç¨‹åºï¼Œå°±è®¾ç½®å®ƒä¸º<code>true</code>æ¥æä¾›ä¸€ä¸ªwarningç»™åªåœ¨å±€éƒ¨å®‰è£…çš„äººã€‚</p>
<p>å®ƒä¸ä¼šçœŸæ­£çš„é˜²æ­¢ç”¨æˆ·åœ¨å±€éƒ¨å®‰è£…ï¼Œä½†å¦‚æœå®ƒæ²¡æœ‰æŒ‰é¢„æœŸå·¥ä½œå®ƒä¼šå¸®åŠ©é˜²æ­¢äº§ç”Ÿè¯¯ä¼šã€‚</p>
<h2 id="private"><a href="#private" class="headerlink" title="private"></a>private</h2><p>å¦‚æœä½ è®¾ç½®<code>&quot;private&quot;: true</code>ï¼Œnpmå°±ä¸ä¼šå‘å¸ƒå®ƒã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªé˜²æ­¢æ„å¤–å‘å¸ƒç§æœ‰åº“çš„æ–¹å¼ã€‚å¦‚æœä½ è¦ç¡®å®šç»™å®šçš„åŒ…æ˜¯åªå‘å¸ƒåœ¨ç‰¹å®šregistryï¼ˆå¦‚å†…éƒ¨registryï¼‰çš„ï¼Œç”¨<code>publishConfig</code>hashçš„æè¿°æ¥é‡å†™<code>registry</code>çš„publish-timeé…ç½®å‚æ•°ã€‚</p>
<h2 id="publishConfig"><a href="#publishConfig" class="headerlink" title="publishConfig"></a>publishConfig</h2><p>è¿™æ˜¯ä¸€ä¸ªåœ¨publish-timeä½¿ç”¨çš„é…ç½®é›†åˆã€‚å½“ä½ æƒ³è®¾ç½®tagæˆ–è€…registryçš„æ—¶å€™å®ƒéå¸¸æœ‰ç”¨ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç¡®å®šä¸€ä¸ªç»™å®šçš„åŒ…æ²¡æœ‰æ‰“ä¸Šâ€œlastestâ€çš„tagæˆ–è€…è¢«é»˜è®¤å‘å¸ƒåˆ°å…¨å±€çš„å…¬å¼€registryã€‚</p>
<p>ä»»ä½•é…ç½®éƒ½å¯ä»¥è¢«é‡å†™ï¼Œä½†å½“ç„¶å¯èƒ½åªæœ‰â€œtagâ€å’Œâ€œregistryâ€ä¸å‘å¸ƒçš„æ„å›¾æœ‰å…³ã€‚</p>
<p>å‚è§<a href="https://npmjs.org/doc/misc/npm-config.html" target="_blank" rel="external">npm-config(7)</a>æœ‰å¯ä»¥è¢«é‡å†™çš„åˆ—è¡¨ã€‚</p>
<h2 id="DEFAULT-VALUES"><a href="#DEFAULT-VALUES" class="headerlink" title="DEFAULT VALUES"></a>DEFAULT VALUES</h2><p>npmä¼šæ ¹æ®åŒ…çš„å†…å®¹è®¾ç½®ä¸€äº›é»˜è®¤å€¼ã€‚</p>
<ul>
<li><p><code>&quot;scripts&quot;: {&quot;start&quot;: &quot;node server.js&quot;}</code></p>
<p>å¦‚æœåŒ…çš„æ ¹ç›®å½•æœ‰<code>server.js</code>æ–‡ä»¶ï¼Œnpmä¼šé»˜è®¤å°†<code>start</code>å‘½ä»¤è®¾ç½®ä¸º<code>node server.js</code>ã€‚</p>
</li>
<li><p><code>&quot;scripts&quot;:{&quot;preinstall&quot;: &quot;node-waf clean || true; node-waf configure build&quot;}</code></p>
<p>  å¦‚æœåŒ…çš„æ ¹ç›®å½•æœ‰<code>wscript</code>æ–‡ä»¶ï¼Œnpmä¼šé»˜è®¤å°†<code>preinstall</code>å‘½ä»¤ç”¨node-wafè¿›è¡Œç¼–è¯‘ã€‚</p>
</li>
<li><p><code>&quot;scripts&quot;:{&quot;preinstall&quot;: &quot;node-gyp rebuild&quot;}</code></p>
<p>  å¦‚æœåŒ…çš„æ ¹ç›®å½•æœ‰<code>binding.gyp</code>æ–‡ä»¶ï¼Œnpmä¼šé»˜è®¤å°†<code>preinstall</code>å‘½ä»¤ç”¨node-gypè¿›è¡Œç¼–è¯‘ã€‚</p>
</li>
<li><p><code>&quot;contributors&quot;: [...]</code></p>
<p>  å¦‚æœæœ‰<code>AUTHORS</code>æ–‡ä»¶ï¼Œnpmä¼šé»˜è®¤é€è¡ŒæŒ‰<code>Name &lt;email&gt; (url)</code>æ ¼å¼å¤„ç†ï¼Œé‚®ç®±å’Œurlæ˜¯å¯é€‰çš„ã€‚<code>#</code>å·å’Œç©ºæ ¼å¼€å¤´çš„è¡Œä¼šè¢«å¿½ç•¥ã€‚</p>
</li>
</ul>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/03/11/package/" class="archive-article-date">
  	<time datetime="2017-03-11T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-03-11</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/package/">package</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-é…ç½®ç›¸å…³â€”npm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/09/é…ç½®ç›¸å…³â€”npm/">é…ç½®ç›¸å…³â€”npm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>npm</code>æœ‰ä¸¤å±‚å«ä¹‰ã€‚ä¸€å±‚å«ä¹‰æ˜¯Nodeçš„å¼€æ”¾å¼æ¨¡å—ç™»è®°å’Œç®¡ç†ç³»ç»Ÿï¼Œç½‘å€ä¸º<a href="http://npmjs.org" target="_blank" rel="external">npmjs.org</a>ã€‚å¦ä¸€å±‚å«ä¹‰æ˜¯Nodeé»˜è®¤çš„æ¨¡å—ç®¡ç†å™¨ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹çš„è½¯ä»¶ï¼Œç”¨æ¥å®‰è£…å’Œç®¡ç†Nodeæ¨¡å—ã€‚</p>
<p><code>npm</code>ä¸éœ€è¦å•ç‹¬å®‰è£…ã€‚åœ¨å®‰è£…Nodeçš„æ—¶å€™ï¼Œä¼šè¿å¸¦ä¸€èµ·å®‰è£…<code>npm</code>ã€‚ä½†æ˜¯ï¼ŒNodeé™„å¸¦çš„<code>npm</code>å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæœ€å¥½ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install npm@latest -g</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œ<code>@latest</code>è¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬ï¼Œ<code>-g</code>è¡¨ç¤ºå…¨å±€å®‰è£…ã€‚æ‰€ä»¥ï¼Œå‘½ä»¤çš„ä¸»å¹²æ˜¯<code>npm install npm</code>ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨<code>npm</code>å®‰è£…è‡ªå·±ã€‚ä¹‹æ‰€ä»¥å¯ä»¥è¿™æ ·ï¼Œæ˜¯å› ä¸º<code>npm</code>æœ¬èº«ä¸Nodeçš„å…¶ä»–æ¨¡å—æ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>ç„¶åï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å„ç§ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹ npm å‘½ä»¤åˆ—è¡¨</div><div class="line">$ npm help</div><div class="line"></div><div class="line"># æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ç®€å•ç”¨æ³•</div><div class="line">$ npm -l</div><div class="line"></div><div class="line"># æŸ¥çœ‹ npm çš„ç‰ˆæœ¬</div><div class="line">$ npm -v</div><div class="line"></div><div class="line"># æŸ¥çœ‹ npm çš„é…ç½®</div><div class="line">$ npm config list -l</div></pre></td></tr></table></figure>
<h2 id="npm-init"><a href="#npm-init" class="headerlink" title="npm init"></a>npm init</h2><p><code>npm init</code>ç”¨æ¥åˆå§‹åŒ–ç”Ÿæˆä¸€ä¸ªæ–°çš„<code>package.json</code>æ–‡ä»¶ã€‚å®ƒä¼šå‘ç”¨æˆ·æé—®ä¸€ç³»åˆ—é—®é¢˜ï¼Œå¦‚æœä½ è§‰å¾—ä¸ç”¨ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œä¸€è·¯å›è½¦å°±å¯ä»¥äº†ã€‚</p>
<p>å¦‚æœä½¿ç”¨äº†<code>-f</code>ï¼ˆä»£è¡¨forceï¼‰ã€<code>-y</code>ï¼ˆä»£è¡¨yesï¼‰ï¼Œåˆ™è·³è¿‡æé—®é˜¶æ®µï¼Œç›´æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„<code>package.json</code>æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm init -y</div></pre></td></tr></table></figure>
<h2 id="npm-set"><a href="#npm-set" class="headerlink" title="npm set"></a>npm set</h2><p><code>npm set</code>ç”¨æ¥è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm set init-author-name &apos;Your name&apos;</div><div class="line">$ npm set init-author-email &apos;Your email&apos;</div><div class="line">$ npm set init-author-url &apos;http://yourdomain.com&apos;</div><div class="line">$ npm set init-license &apos;MIT&apos;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ç­‰äºä¸º<code>npm init</code>è®¾ç½®äº†é»˜è®¤å€¼ï¼Œä»¥åæ‰§è¡Œ<code>npm init</code>çš„æ—¶å€™ï¼Œ<code>package.json</code>çš„ä½œè€…å§“åã€é‚®ä»¶ã€ä¸»é¡µã€è®¸å¯è¯å­—æ®µå°±ä¼šè‡ªåŠ¨å†™å…¥é¢„è®¾çš„å€¼ã€‚è¿™äº›ä¿¡æ¯ä¼šå­˜æ”¾åœ¨ç”¨æˆ·ä¸»ç›®å½•çš„ <code>~/.npmrc</code>æ–‡ä»¶ï¼Œä½¿å¾—ç”¨æˆ·ä¸ç”¨æ¯ä¸ªé¡¹ç›®éƒ½è¾“å…¥ã€‚å¦‚æœæŸä¸ªé¡¹ç›®æœ‰ä¸åŒçš„è®¾ç½®ï¼Œå¯ä»¥é’ˆå¯¹è¯¥é¡¹ç›®è¿è¡Œ<code>npm config</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm set save-exact true</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤è®¾ç½®åŠ å…¥æ¨¡å—æ—¶ï¼Œ<code>package.json</code>å°†è®°å½•æ¨¡å—çš„ç¡®åˆ‡ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯é€‰çš„ç‰ˆæœ¬èŒƒå›´ã€‚</p>
<h2 id="npm-config"><a href="#npm-config" class="headerlink" title="npm config"></a>npm config</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm config set prefix $dir</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤å°†æŒ‡å®šçš„<code>$dir</code>ç›®å½•ï¼Œè®¾ä¸ºæ¨¡å—çš„å…¨å±€å®‰è£…ç›®å½•ã€‚å¦‚æœå½“å‰æœ‰è¿™ä¸ªç›®å½•çš„å†™æƒé™ï¼Œé‚£ä¹ˆè¿è¡Œ<code>npm install</code>çš„æ—¶å€™ï¼Œå°±ä¸å†éœ€è¦<code>sudo</code>å‘½ä»¤æˆæƒäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm config set save-prefix ~</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤ä½¿å¾—<code>npm install --save</code>å’Œ<code>npm install --save-dev</code>å®‰è£…æ–°æ¨¡å—æ—¶ï¼Œå…è®¸çš„ç‰ˆæœ¬èŒƒå›´ä»å…‹æ‹‰ç¬¦å·ï¼ˆ<code>^</code>ï¼‰æ”¹æˆæ³¢æµªå·ï¼ˆ<code>~</code>ï¼‰ï¼Œå³ä»å…è®¸å°ç‰ˆæœ¬å‡çº§ï¼Œå˜æˆåªå…è®¸è¡¥ä¸åŒ…çš„å‡çº§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm config set init.author.name $name</div><div class="line">$ npm config set init.author.email $email</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤æŒ‡å®šä½¿ç”¨<code>npm init</code>æ—¶ï¼Œç”Ÿæˆçš„<code>package.json</code>æ–‡ä»¶çš„å­—æ®µé»˜è®¤å€¼ã€‚</p>
<h2 id="npm-info"><a href="#npm-info" class="headerlink" title="npm info"></a>npm info</h2><p><code>npm info</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ¯ä¸ªæ¨¡å—çš„å…·ä½“ä¿¡æ¯ã€‚æ¯”å¦‚ï¼ŒæŸ¥çœ‹underscoreæ¨¡å—çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ npm info underscore</div><div class="line">&#123; name: &apos;underscore&apos;,</div><div class="line">  description: &apos;JavaScript\&apos;s functional programming helper library.&apos;,</div><div class="line">  &apos;dist-tags&apos;: &#123; latest: &apos;1.5.2&apos;, stable: &apos;1.5.2&apos; &#125;,</div><div class="line">  repository:</div><div class="line">   &#123; type: &apos;git&apos;,</div><div class="line">     url: &apos;git://github.com/jashkenas/underscore.git&apos; &#125;,</div><div class="line">  homepage: &apos;http://underscorejs.org&apos;,</div><div class="line">  main: &apos;underscore.js&apos;,</div><div class="line">  version: &apos;1.5.2&apos;,</div><div class="line">  devDependencies: &#123; phantomjs: &apos;1.9.0-1&apos; &#125;,</div><div class="line">  licenses:</div><div class="line">   &#123; type: &apos;MIT&apos;,</div><div class="line">     url: &apos;https://raw.github.com/jashkenas/underscore/master/LICENSE&apos; &#125;,</div><div class="line">  files:</div><div class="line">   [ &apos;underscore.js&apos;,</div><div class="line">     &apos;underscore-min.js&apos;,</div><div class="line">     &apos;LICENSE&apos; ],</div><div class="line">  readmeFilename: &apos;README.md&apos;&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤è¿”å›ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼ŒåŒ…å«äº†underscoreæ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡çš„æ¯ä¸ªæˆå‘˜ï¼Œéƒ½å¯ä»¥ç›´æ¥ä»infoå‘½ä»¤æŸ¥è¯¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ npm info underscore description</div><div class="line">JavaScript&apos;s functional programming helper library.</div><div class="line"></div><div class="line">$ npm info underscore homepage</div><div class="line">http://underscorejs.org</div><div class="line"></div><div class="line">$ npm info underscore version</div><div class="line">1.5.2</div></pre></td></tr></table></figure>
<h2 id="npm-search"><a href="#npm-search" class="headerlink" title="npm search"></a>npm search</h2><p><code>npm search</code>å‘½ä»¤ç”¨äºæœç´¢npmä»“åº“ï¼Œå®ƒåé¢å¯ä»¥è·Ÿå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è·Ÿæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm search &lt;æœç´¢è¯&gt;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ npm search node-gyp</div><div class="line">// NAME                  DESCRIPTION</div><div class="line">// autogypi              Autogypi handles dependencies for node-gyp projects.</div><div class="line">// grunt-node-gyp        Run node-gyp commands from Grunt.</div><div class="line">// gyp-io                Temporary solution to let node-gyp run `rebuild` underâ€¦</div><div class="line">// ...</div></pre></td></tr></table></figure>
<h2 id="npm-list"><a href="#npm-list" class="headerlink" title="npm list"></a>npm list</h2><p><code>npm list</code>å‘½ä»¤ä»¥æ ‘å‹ç»“æ„åˆ—å‡ºå½“å‰é¡¹ç›®å®‰è£…çš„æ‰€æœ‰æ¨¡å—ï¼Œä»¥åŠå®ƒä»¬ä¾èµ–çš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm list</div></pre></td></tr></table></figure>
<p>åŠ ä¸Šglobalå‚æ•°ï¼Œä¼šåˆ—å‡ºå…¨å±€å®‰è£…çš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm list -global</div></pre></td></tr></table></figure>
<p><code>npm list</code>å‘½ä»¤ä¹Ÿå¯ä»¥åˆ—å‡ºå•ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm list underscore</div></pre></td></tr></table></figure>
<h2 id="npm-install"><a href="#npm-install" class="headerlink" title="npm install"></a>npm install</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>Nodeæ¨¡å—é‡‡ç”¨<code>npm install</code>å‘½ä»¤å®‰è£…ã€‚</p>
<p>æ¯ä¸ªæ¨¡å—å¯ä»¥â€œå…¨å±€å®‰è£…â€ï¼Œä¹Ÿå¯ä»¥â€œæœ¬åœ°å®‰è£…â€ã€‚â€œå…¨å±€å®‰è£…â€æŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ¨¡å—å®‰è£…åˆ°ç³»ç»Ÿç›®å½•ä¸­ï¼Œå„ä¸ªé¡¹ç›®éƒ½å¯ä»¥è°ƒç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå…¨å±€å®‰è£…åªé€‚ç”¨äºå·¥å…·æ¨¡å—ï¼Œæ¯”å¦‚<code>eslint</code>å’Œ<code>gulp</code>ã€‚â€œæœ¬åœ°å®‰è£…â€æŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ¨¡å—ä¸‹è½½åˆ°å½“å‰é¡¹ç›®çš„<code>node_modules</code>å­ç›®å½•ï¼Œç„¶ååªæœ‰åœ¨é¡¹ç›®ç›®å½•ä¹‹ä¸­ï¼Œæ‰èƒ½è°ƒç”¨è¿™ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># æœ¬åœ°å®‰è£…</div><div class="line">$ npm install &lt;package name&gt;</div><div class="line"></div><div class="line"># å…¨å±€å®‰è£…</div><div class="line">$ sudo npm install -global &lt;package name&gt;</div><div class="line">$ sudo npm install -g &lt;package name&gt;</div></pre></td></tr></table></figure>
<p><code>npm install</code>ä¹Ÿæ”¯æŒç›´æ¥è¾“å…¥Githubä»£ç åº“åœ°å€ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install git://github.com/package/path.git</div><div class="line">$ npm install git://github.com/package/path.git#0.1.0</div></pre></td></tr></table></figure>
<p>å®‰è£…ä¹‹å‰ï¼Œ<code>npm install</code>ä¼šå…ˆæ£€æŸ¥ï¼Œ<code>node_modules</code>ç›®å½•ä¹‹ä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŒ‡å®šæ¨¡å—ã€‚å¦‚æœå­˜åœ¨ï¼Œå°±ä¸å†é‡æ–°å®‰è£…äº†ï¼Œå³ä½¿è¿œç¨‹ä»“åº“å·²ç»æœ‰äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ï¼Œä¸€ä¸ªæ¨¡å—ä¸ç®¡æ˜¯å¦å®‰è£…è¿‡ï¼Œnpm éƒ½è¦å¼ºåˆ¶é‡æ–°å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨<code>-f</code>æˆ–<code>--force</code>å‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install &lt;packageName&gt; --force</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å¸Œæœ›ï¼Œæ‰€æœ‰æ¨¡å—éƒ½è¦å¼ºåˆ¶é‡æ–°å®‰è£…ï¼Œé‚£å°±åˆ é™¤<code>node_modules</code>ç›®å½•ï¼Œé‡æ–°æ‰§è¡Œ<code>npm install</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ rm -rf node_modules</div><div class="line">$ npm install</div></pre></td></tr></table></figure>
<h3 id="å®‰è£…ä¸åŒç‰ˆæœ¬"><a href="#å®‰è£…ä¸åŒç‰ˆæœ¬" class="headerlink" title="å®‰è£…ä¸åŒç‰ˆæœ¬"></a>å®‰è£…ä¸åŒç‰ˆæœ¬</h3><p>installå‘½ä»¤æ€»æ˜¯å®‰è£…æ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœè¦å®‰è£…æ¨¡å—çš„ç‰¹å®šç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨æ¨¡å—ååé¢åŠ ä¸Š@å’Œç‰ˆæœ¬å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm install sax@latest</div><div class="line">$ npm install sax@0.1.1</div><div class="line">$ npm install sax@&quot;&gt;=0.1.0 &lt;0.2.0&quot;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨<code>--save-exact</code>å‚æ•°ï¼Œä¼šåœ¨package.jsonæ–‡ä»¶æŒ‡å®šå®‰è£…æ¨¡å—çš„ç¡®åˆ‡ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install readable-stream --save --save-exact</div></pre></td></tr></table></figure>
<p>installå‘½ä»¤å¯ä»¥ä½¿ç”¨ä¸åŒå‚æ•°ï¼ŒæŒ‡å®šæ‰€å®‰è£…çš„æ¨¡å—å±äºå“ªä¸€ç§æ€§è´¨çš„ä¾èµ–å…³ç³»ï¼Œå³å‡ºç°åœ¨packages.jsonæ–‡ä»¶çš„å“ªä¸€é¡¹ä¸­ã€‚</p>
<ul>
<li>â€“saveï¼šæ¨¡å—åå°†è¢«æ·»åŠ åˆ°dependenciesï¼Œå¯ä»¥ç®€åŒ–ä¸ºå‚æ•°<code>-S</code>ã€‚</li>
<li>â€“save-dev: æ¨¡å—åå°†è¢«æ·»åŠ åˆ°devDependenciesï¼Œå¯ä»¥ç®€åŒ–ä¸ºå‚æ•°<code>-D</code>ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm install sax --save</div><div class="line">$ npm install node-tap --save-dev</div><div class="line"># æˆ–è€…</div><div class="line">$ npm install sax -S</div><div class="line">$ npm install node-tap -D</div></pre></td></tr></table></figure>
<p>å¦‚æœè¦å®‰è£…betaç‰ˆæœ¬çš„æ¨¡å—ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…æœ€æ–°çš„betaç‰ˆ</div><div class="line">$ npm install &lt;module-name&gt;@beta (latest beta)</div><div class="line"></div><div class="line"># å®‰è£…æŒ‡å®šçš„betaç‰ˆ</div><div class="line">$ npm install &lt;module-name&gt;@1.3.1-beta.3</div></pre></td></tr></table></figure>
<p><code>npm install</code>é»˜è®¤ä¼šå®‰è£…<code>dependencies</code>å­—æ®µå’Œ<code>devDependencies</code>å­—æ®µä¸­çš„æ‰€æœ‰æ¨¡å—ï¼Œå¦‚æœä½¿ç”¨<code>--production</code>å‚æ•°ï¼Œå¯ä»¥åªå®‰è£…<code>dependencies</code>å­—æ®µçš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm install --production</div><div class="line"># æˆ–è€…</div><div class="line">$ NODE_ENV=production npm install</div></pre></td></tr></table></figure>
<p>ä¸€æ—¦å®‰è£…äº†æŸä¸ªæ¨¡å—ï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­ç”¨<code>require</code>å‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var backbone = require(&apos;backbone&apos;)</div><div class="line">console.log(backbone.VERSION)</div></pre></td></tr></table></figure>
<h2 id="é¿å…ç³»ç»Ÿæƒé™"><a href="#é¿å…ç³»ç»Ÿæƒé™" class="headerlink" title="é¿å…ç³»ç»Ÿæƒé™"></a>é¿å…ç³»ç»Ÿæƒé™</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNpmå…¨å±€æ¨¡å—éƒ½å®‰è£…åœ¨ç³»ç»Ÿç›®å½•ï¼ˆæ¯”å¦‚<code>/usr/local/lib/</code>ï¼‰ï¼Œæ™®é€šç”¨æˆ·æ²¡æœ‰å†™å…¥æƒé™ï¼Œéœ€è¦ç”¨åˆ°<code>sudo</code>å‘½ä»¤ã€‚è¿™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ²¡æœ‰rootæƒé™çš„æƒ…å†µä¸‹ï¼Œå®‰è£…å…¨å±€æ¨¡å—ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨ä¸»ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶<code>.npmrc</code>ï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶ä¸­å°†<code>prefix</code>å˜é‡å®šä¹‰åˆ°ä¸»ç›®å½•ä¸‹é¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">prefix = /home/yourUsername/npm</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä¸»ç›®å½•ä¸‹æ–°å»º<code>npm</code>å­ç›®å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir ~/npm</div></pre></td></tr></table></figure>
<p>æ­¤åï¼Œå…¨å±€å®‰è£…çš„æ¨¡å—éƒ½ä¼šå®‰è£…åœ¨è¿™ä¸ªå­ç›®å½•ä¸­ï¼Œnpmä¹Ÿä¼šåˆ°<code>~/npm/bin</code>ç›®å½•å»å¯»æ‰¾å‘½ä»¤ã€‚</p>
<p>æœ€åï¼Œå°†è¿™ä¸ªè·¯å¾„åœ¨<code>.bash_profile</code>æ–‡ä»¶ï¼ˆæˆ–<code>.bashrc</code>æ–‡ä»¶ï¼‰ä¸­åŠ å…¥PATHå˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=~/npm/bin:$PATH</div></pre></td></tr></table></figure>
<h2 id="npm-updateï¼Œnpm-uninstall"><a href="#npm-updateï¼Œnpm-uninstall" class="headerlink" title="npm updateï¼Œnpm uninstall"></a>npm updateï¼Œnpm uninstall</h2><p><code>npm update</code>å‘½ä»¤å¯ä»¥æ›´æ–°æœ¬åœ°å®‰è£…çš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># å‡çº§å½“å‰é¡¹ç›®çš„æŒ‡å®šæ¨¡å—</div><div class="line">$ npm update [package name]</div><div class="line"></div><div class="line"># å‡çº§å…¨å±€å®‰è£…çš„æ¨¡å—</div><div class="line">$ npm update -global [package name]</div></pre></td></tr></table></figure>
<p>å®ƒä¼šå…ˆåˆ°è¿œç¨‹ä»“åº“æŸ¥è¯¢æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åæŸ¥è¯¢æœ¬åœ°ç‰ˆæœ¬ã€‚å¦‚æœæœ¬åœ°ç‰ˆæœ¬ä¸å­˜åœ¨ï¼Œæˆ–è€…è¿œç¨‹ç‰ˆæœ¬è¾ƒæ–°ï¼Œå°±ä¼šå®‰è£…ã€‚</p>
<p>ä½¿ç”¨<code>-S</code>æˆ–<code>--save</code>å‚æ•°ï¼Œå¯ä»¥åœ¨å®‰è£…çš„æ—¶å€™æ›´æ–°<code>package.json</code>é‡Œé¢æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// æ›´æ–°ä¹‹å‰çš„package.json</div><div class="line">dependencies: &#123;</div><div class="line">  dep1: &quot;^1.1.1&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// æ›´æ–°ä¹‹åçš„package.json</div><div class="line">dependencies: &#123;</div><div class="line">  dep1: &quot;^1.2.2&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œä»npm v2.6.1 å¼€å§‹ï¼Œ<code>npm update</code>åªæ›´æ–°é¡¶å±‚æ¨¡å—ï¼Œè€Œä¸æ›´æ–°ä¾èµ–çš„ä¾èµ–ï¼Œä»¥å‰ç‰ˆæœ¬æ˜¯é€’å½’æ›´æ–°çš„ã€‚å¦‚æœæƒ³å–åˆ°è€ç‰ˆæœ¬çš„æ•ˆæœï¼Œè¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm --depth 9999 update</div></pre></td></tr></table></figure>
<p><code>npm uninstall</code>å‘½ä»¤ï¼Œå¸è½½å·²å®‰è£…çš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm uninstall [package name]</div><div class="line"></div><div class="line"># å¸è½½å…¨å±€æ¨¡å—</div><div class="line">$ npm uninstall [package name] -global</div></pre></td></tr></table></figure>
<h2 id="npm-run"><a href="#npm-run" class="headerlink" title="npm run"></a>npm run</h2><p><code>npm</code>ä¸ä»…å¯ä»¥ç”¨äºæ¨¡å—ç®¡ç†ï¼Œè¿˜å¯ä»¥ç”¨äºæ‰§è¡Œè„šæœ¬ã€‚<code>package.json</code>æ–‡ä»¶æœ‰ä¸€ä¸ª<code>scripts</code>å­—æ®µï¼Œå¯ä»¥ç”¨äºæŒ‡å®šè„šæœ¬å‘½ä»¤ï¼Œä¾›<code>npm</code>ç›´æ¥è°ƒç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;myproject&quot;,</div><div class="line">  &quot;devDependencies&quot;: &#123;</div><div class="line">    &quot;jshint&quot;: &quot;latest&quot;,</div><div class="line">    &quot;browserify&quot;: &quot;latest&quot;,</div><div class="line">    &quot;mocha&quot;: &quot;latest&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;scripts&quot;: &#123;</div><div class="line">    &quot;lint&quot;: &quot;jshint **.js&quot;,</div><div class="line">    &quot;test&quot;: &quot;mocha test/&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>scripts</code>å­—æ®µæŒ‡å®šäº†ä¸¤é¡¹å‘½ä»¤<code>lint</code>å’Œ<code>test</code>ã€‚å‘½ä»¤è¡Œè¾“å…¥<code>npm run-script lint</code>æˆ–è€…<code>npm run lint</code>ï¼Œå°±ä¼šæ‰§è¡Œ<code>jshint **.js</code>ï¼Œè¾“å…¥<code>npm run-script test</code>æˆ–è€…<code>npm run test</code>ï¼Œå°±ä¼šæ‰§è¡Œ<code>mocha test/</code>ã€‚<code>npm run</code>æ˜¯<code>npm run-script</code>çš„ç¼©å†™ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨å‰è€…ï¼Œä½†æ˜¯åè€…å¯ä»¥æ›´å¥½åœ°ååº”è¿™ä¸ªå‘½ä»¤çš„æœ¬è´¨ã€‚</p>
<p><code>npm run</code>å‘½ä»¤ä¼šè‡ªåŠ¨åœ¨ç¯å¢ƒå˜é‡<code>$PATH</code>æ·»åŠ <code>node_modules/.bin</code>ç›®å½•ï¼Œæ‰€ä»¥<code>scripts</code>å­—æ®µé‡Œé¢è°ƒç”¨å‘½ä»¤æ—¶ä¸ç”¨åŠ ä¸Šè·¯å¾„ï¼Œè¿™å°±é¿å…äº†å…¨å±€å®‰è£…NPMæ¨¡å—ã€‚</p>
<p><code>npm run</code>å¦‚æœä¸åŠ ä»»ä½•å‚æ•°ï¼Œç›´æ¥è¿è¡Œï¼Œä¼šåˆ—å‡º<code>package.json</code>é‡Œé¢æ‰€æœ‰å¯ä»¥æ‰§è¡Œçš„è„šæœ¬å‘½ä»¤ã€‚</p>
<p>npmå†…ç½®äº†ä¸¤ä¸ªå‘½ä»¤ç®€å†™ï¼Œ<code>npm test</code>ç­‰åŒäºæ‰§è¡Œ<code>npm run test</code>ï¼Œ<code>npm start</code>ç­‰åŒäºæ‰§è¡Œ<code>npm run start</code>ã€‚</p>
<p><code>npm run</code>ä¼šåˆ›å»ºä¸€ä¸ªShellï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œå¹¶ä¸´æ—¶å°†<code>node_modules/.bin</code>åŠ å…¥PATHå˜é‡ï¼Œè¿™æ„å‘³ç€æœ¬åœ°æ¨¡å—å¯ä»¥ç›´æ¥è¿è¡Œã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œä½ æ‰§è¡ŒESLintçš„å®‰è£…å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm i eslint --save-dev</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œä¼šäº§ç”Ÿä¸¤ä¸ªç»“æœã€‚é¦–å…ˆï¼ŒESLintè¢«å®‰è£…åˆ°å½“å‰ç›®å½•çš„<code>node_modules</code>å­ç›®å½•ï¼›å…¶æ¬¡ï¼Œ<code>node_modules/.bin</code>ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ªç¬¦å·é“¾æ¥<code>node_modules/.bin/eslint</code>ï¼ŒæŒ‡å‘ESLintæ¨¡å—çš„å¯æ‰§è¡Œè„šæœ¬ã€‚</p>
<p>ç„¶åï¼Œä½ å°±å¯ä»¥åœ¨<code>package.json</code>çš„<code>script</code>å±æ€§é‡Œé¢ï¼Œä¸å¸¦è·¯å¾„çš„å¼•ç”¨<code>eslint</code>è¿™ä¸ªè„šæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;Test Project&quot;,</div><div class="line">  &quot;devDependencies&quot;: &#123;</div><div class="line">    &quot;eslint&quot;: &quot;^1.10.3&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;scripts&quot;: &#123;</div><div class="line">    &quot;lint&quot;: &quot;eslint .&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç­‰åˆ°è¿è¡Œ<code>npm run lint</code>çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰§è¡Œ<code>./node_modules/.bin/eslint .</code>ã€‚</p>
<p>å¦‚æœç›´æ¥è¿è¡Œ<code>npm run</code>ä¸ç»™å‡ºä»»ä½•å‚æ•°ï¼Œå°±ä¼šåˆ—å‡º<code>scripts</code>å±æ€§ä¸‹æ‰€æœ‰å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ npm run</div><div class="line">Available scripts in the user-service package:</div><div class="line">  lint</div><div class="line">     jshint **.js</div><div class="line">  test</div><div class="line">    mocha test/</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶çš„ä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;watch&quot;: &quot;watchify client/main.js -o public/app.js -v&quot;,</div><div class="line">  &quot;build&quot;: &quot;browserify client/main.js -o public/app.js&quot;,</div><div class="line">  &quot;start&quot;: &quot;npm run watch &amp; nodemon server.js&quot;,</div><div class="line">  &quot;test&quot;: &quot;node test/all.js&quot;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç åœ¨<code>scripts</code>é¡¹ï¼Œå®šä¹‰äº†å››ä¸ªåˆ«åï¼Œæ¯ä¸ªåˆ«åéƒ½æœ‰å¯¹åº”çš„è„šæœ¬å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm run watch</div><div class="line">$ npm run build</div><div class="line">$ npm run start</div><div class="line">$ npm run test</div></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>start</code>å’Œ<code>test</code>å±äºç‰¹æ®Šå‘½ä»¤ï¼Œå¯ä»¥çœç•¥<code>run</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm start</div><div class="line">$ npm test</div></pre></td></tr></table></figure>
<p>å¦‚æœå¸Œæœ›ä¸€ä¸ªæ“ä½œçš„è¾“å‡ºï¼Œæ˜¯å¦ä¸€ä¸ªæ“ä½œçš„è¾“å…¥ï¼Œå¯ä»¥å€Ÿç”¨Linuxç³»ç»Ÿçš„ç®¡é“å‘½ä»¤ï¼Œå°†ä¸¤ä¸ªæ“ä½œè¿åœ¨ä¸€èµ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;build-js&quot;: &quot;browserify browser/main.js | uglifyjs -mc &gt; static/bundle.js&quot;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œæ›´æ–¹ä¾¿çš„å†™æ³•æ˜¯å¼•ç”¨å…¶ä»–<code>npm run</code>å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;build&quot;: &quot;npm run build-js &amp;&amp; npm run build-css&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å†™æ³•æ˜¯å…ˆè¿è¡Œ<code>npm run build-js</code>ï¼Œç„¶åå†è¿è¡Œ<code>npm run build-css</code>ï¼Œä¸¤ä¸ªå‘½ä»¤ä¸­é—´ç”¨<code>&amp;&amp;</code>è¿æ¥ã€‚å¦‚æœå¸Œæœ›ä¸¤ä¸ªå‘½ä»¤åŒæ—¶å¹³è¡Œæ‰§è¡Œï¼Œå®ƒä»¬ä¸­é—´å¯ä»¥ç”¨<code>&amp;</code>è¿æ¥ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæµæ“ä½œçš„ä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&quot;devDependencies&quot;: &#123;</div><div class="line">  &quot;autoprefixer&quot;: &quot;latest&quot;,</div><div class="line">  &quot;cssmin&quot;: &quot;latest&quot;</div><div class="line">&#125;,</div><div class="line"></div><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;build:css&quot;: &quot;autoprefixer -b &apos;last 2 versions&apos; &lt; assets/styles/main.css | cssmin &gt; dist/main.css&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†™åœ¨<code>scripts</code>å±æ€§ä¸­çš„å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥åœ¨<code>node_modules/.bin</code>ç›®å½•ä¸­ç›´æ¥å†™æˆbashè„šæœ¬ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªbashè„šæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">cd site/main</div><div class="line">browserify browser/main.js | uglifyjs -mc &gt; static/bundle.js</div></pre></td></tr></table></figure>
<p>å‡å®šä¸Šé¢çš„è„šæœ¬æ–‡ä»¶åä¸ºbuild.shï¼Œå¹¶ä¸”æƒé™ä¸ºå¯æ‰§è¡Œï¼Œå°±å¯ä»¥åœ¨scriptså±æ€§ä¸­å¼•ç”¨è¯¥æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;build-js&quot;: &quot;bin/build.sh&quot;</div></pre></td></tr></table></figure>
<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><p><code>npm run</code>å‘½ä»¤è¿˜å¯ä»¥æ·»åŠ å‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;test&quot;: &quot;mocha test/&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æŒ‡å®š<code>npm test</code>ï¼Œå®é™…è¿è¡Œ<code>mocha test/</code>ã€‚å¦‚æœè¦é€šè¿‡<code>npm test</code>å‘½ä»¤ï¼Œå°†å‚æ•°ä¼ åˆ°mochaï¼Œåˆ™å‚æ•°ä¹‹å‰è¦åŠ ä¸Šä¸¤ä¸ªè¿è¯çº¿ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm run test -- anothertest.js</div><div class="line"># ç­‰åŒäº</div><div class="line">$ mocha test/ anothertest.js</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œmochaè¦è¿è¡Œæ‰€æœ‰<code>test</code>å­ç›®å½•çš„æµ‹è¯•è„šæœ¬ï¼Œä»¥åŠå¦å¤–ä¸€ä¸ªæµ‹è¯•è„šæœ¬<code>anothertest.js</code>ã€‚</p>
<p><code>npm run</code>æœ¬èº«æœ‰ä¸€ä¸ªå‚æ•°<code>-s</code>ï¼Œè¡¨ç¤ºå…³é—­npmæœ¬èº«çš„è¾“å‡ºï¼Œåªè¾“å‡ºè„šæœ¬äº§ç”Ÿçš„ç»“æœã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// è¾“å‡ºnpmå‘½ä»¤å¤´</div><div class="line">$ npm run test</div><div class="line"></div><div class="line">// ä¸è¾“å‡ºnpmå‘½ä»¤å¤´</div><div class="line">$ npm run -s test</div></pre></td></tr></table></figure>
<h3 id="scriptsè„šæœ¬å‘½ä»¤æœ€ä½³å®è·µ"><a href="#scriptsè„šæœ¬å‘½ä»¤æœ€ä½³å®è·µ" class="headerlink" title="scriptsè„šæœ¬å‘½ä»¤æœ€ä½³å®è·µ"></a>scriptsè„šæœ¬å‘½ä»¤æœ€ä½³å®è·µ</h3><p><code>scripts</code>å­—æ®µçš„è„šæœ¬å‘½ä»¤ï¼Œæœ‰ä¸€äº›æœ€ä½³å®è·µï¼Œå¯ä»¥æ–¹ä¾¿å¼€å‘ã€‚é¦–å…ˆï¼Œå®‰è£…<code>npm-run-all</code>æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install npm-run-all --save-dev</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ¨¡å—ç”¨äºè¿è¡Œå¤šä¸ª<code>scripts</code>è„šæœ¬å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># ç»§å‘æ‰§è¡Œ</div><div class="line">$ npm-run-all build:html build:js</div><div class="line"># ç­‰åŒäº</div><div class="line">$ npm run build:html &amp;&amp; npm run build:js</div><div class="line"></div><div class="line"># å¹¶è¡Œæ‰§è¡Œ</div><div class="line">$ npm-run-all --parallel watch:html watch:js</div><div class="line"># ç­‰åŒäº</div><div class="line">$ npm run watch:html &amp; npm run watch:js</div><div class="line"></div><div class="line"># æ··åˆæ‰§è¡Œ</div><div class="line">$ npm-run-all clean lint --parallel watch:html watch:js</div><div class="line"># ç­‰åŒäº</div><div class="line">$ npm-run-all clean lint</div><div class="line">$ npm-run-all --parallel watch:html watch:js</div><div class="line"></div><div class="line"># é€šé…ç¬¦</div><div class="line">$ npm-run-all --parallel watch:*</div></pre></td></tr></table></figure>
<p>ï¼ˆ1ï¼‰startè„šæœ¬å‘½ä»¤</p>
<p><code>start</code>è„šæœ¬å‘½ä»¤ï¼Œç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;start&quot;: &quot;npm-run-all --parallel dev serve&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤å¹¶è¡Œæ‰§è¡Œ<code>dev</code>è„šæœ¬å‘½ä»¤å’Œ<code>serve</code>è„šæœ¬å‘½ä»¤ï¼Œç­‰åŒäºä¸‹é¢çš„å½¢å¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run dev &amp; npm run serve</div></pre></td></tr></table></figure>
<p>å¦‚æœstartè„šæœ¬æ²¡æœ‰é…ç½®ï¼Œ<code>npm start</code>å‘½ä»¤é»˜è®¤æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ï¼Œå‰ææ˜¯æ¨¡å—çš„æ ¹ç›®å½•å­˜åœ¨ä¸€ä¸ªserver.jsæ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ node server.js</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰devè„šæœ¬å‘½ä»¤</p>
<p><code>dev</code>è„šæœ¬å‘½ä»¤ï¼Œè§„å®šå¼€å‘é˜¶æ®µæ‰€è¦åšçš„å¤„ç†ï¼Œæ¯”å¦‚æ„å»ºç½‘é¡µèµ„æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;dev&quot;: &quot;npm-run-all dev:*&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ç”¨äºç»§å‘æ‰§è¡Œæ‰€æœ‰<code>dev</code>çš„å­å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;predev:sass&quot;: &quot;node-sass --source-map src/css/hoodie.css.map --output-style nested src/sass/base.scss src/css/hoodie.css&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤å°†sassæ–‡ä»¶ç¼–è¯‘ä¸ºcssæ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆsource mapæ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;dev:sass&quot;: &quot;node-sass --source-map src/css/hoodie.css.map --watch --output-style nested src/sass/base.scss src/css/hoodie.css&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä¼šç›‘è§†sassæ–‡ä»¶çš„å˜åŠ¨ï¼Œåªè¦æœ‰å˜åŠ¨ï¼Œå°±è‡ªåŠ¨å°†å…¶ç¼–è¯‘ä¸ºcssæ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;dev:autoprefix&quot;: &quot;postcss --use autoprefixer --autoprefixer.browsers \&quot;&gt; 5%\&quot; --output src/css/hoodie.css src/css/hoodie.css&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä¸ºcssæ–‡ä»¶åŠ ä¸Šæµè§ˆå™¨å‰ç¼€ï¼Œé™åˆ¶æ¡ä»¶æ˜¯åªè€ƒè™‘å¸‚åœºä»½é¢å¤§äº5%çš„æµè§ˆå™¨ã€‚</p>
<p>ï¼ˆ3ï¼‰serveè„šæœ¬å‘½ä»¤</p>
<p><code>serve</code>è„šæœ¬å‘½ä»¤ç”¨äºå¯åŠ¨æœåŠ¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;serve&quot;: &quot;live-server dist/ --port=9090&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼Œç”¨çš„æ˜¯<a href="http://npmjs.com/package/live-server" target="_blank" rel="external">live-server</a>æ¨¡å—ï¼Œå°†æœåŠ¡å¯åŠ¨åœ¨9090ç«¯å£ï¼Œå±•ç¤º<code>dist</code>å­ç›®å½•ã€‚</p>
<p><code>live-server</code>æ¨¡å—æœ‰ä¸‰ä¸ªåŠŸèƒ½ã€‚</p>
<ul>
<li>å¯åŠ¨ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå±•ç¤ºæŒ‡å®šç›®å½•çš„<code>index.html</code>æ–‡ä»¶ï¼Œé€šè¿‡è¯¥æ–‡ä»¶åŠ è½½å„ç§ç½‘ç»œèµ„æºï¼Œè¿™æ˜¯<code>file://</code>åè®®åšä¸åˆ°çš„ã€‚</li>
<li>æ·»åŠ è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ã€‚åªè¦æŒ‡å®šç›®å½•ä¹‹ä¸­ï¼Œæ–‡ä»¶æœ‰ä»»ä½•å˜åŒ–ï¼Œå®ƒå°±ä¼šåˆ·æ–°é¡µé¢ã€‚</li>
<li><code>npm run serve</code>å‘½ä»¤æ‰§è¡Œä»¥åï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€‚ã€</li>
</ul>
<p>ä»¥å‰ï¼Œä¸Šé¢ä¸‰ä¸ªåŠŸèƒ½éœ€è¦ä¸‰ä¸ªæ¨¡å—æ¥å®Œæˆï¼š<code>http-server</code>ã€<code>live-reload</code>å’Œ<code>opener</code>ï¼Œç°åœ¨åªè¦<code>live-server</code>ä¸€ä¸ªæ¨¡å—å°±å¤Ÿäº†ã€‚</p>
<p>ï¼ˆ4ï¼‰testè„šæœ¬å‘½ä»¤</p>
<p><code>test</code>è„šæœ¬å‘½ä»¤ç”¨äºæ‰§è¡Œæµ‹è¯•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&quot;test&quot;: &quot;npm-run-all test:*&quot;,</div><div class="line">&quot;test:lint&quot;: &quot;sass-lint --verbose --config .sass-lint.yml src/sass/*&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤è§„å®šï¼Œæ‰§è¡Œæµ‹è¯•æ—¶ï¼Œè¿è¡Œ<code>lint</code>è„šæœ¬ï¼Œæ£€æŸ¥è„šæœ¬ä¹‹ä¸­çš„è¯­æ³•é”™è¯¯ã€‚</p>
<p>ï¼ˆ5ï¼‰prodè„šæœ¬å‘½ä»¤</p>
<p><code>prod</code>è„šæœ¬å‘½ä»¤ï¼Œè§„å®šè¿›å…¥ç”Ÿäº§ç¯å¢ƒæ—¶éœ€è¦åšçš„å¤„ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;prod&quot;: &quot;npm-run-all prod:*&quot;,</div><div class="line">&quot;prod:sass&quot;: &quot;node-sass --output-style compressed src/sass/base.scss src/css/prod/hoodie.min.css&quot;,</div><div class="line">&quot;prod:autoprefix&quot;: &quot;postcss --use autoprefixer --autoprefixer.browsers &quot;&gt; 5%&quot; --output src/css/prod/hoodie.min.css src/css/prod/hoodie.min.css&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤å°†sassæ–‡ä»¶è½¬ä¸ºcssæ–‡ä»¶ï¼Œå¹¶åŠ ä¸Šæµè§ˆå™¨å‰ç¼€ã€‚</p>
<p>ï¼ˆ6ï¼‰helpè„šæœ¬å‘½ä»¤</p>
<p><code>help</code>è„šæœ¬å‘½ä»¤ç”¨äºå±•ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;help&quot;: &quot;markdown-chalk --input DEVELOPMENT.md&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä¹‹ä¸­ï¼Œ<code>markdown-chalk</code>æ¨¡å—ç”¨äºå°†æŒ‡å®šçš„markdownæ–‡ä»¶ï¼Œè½¬ä¸ºå½©è‰²æ–‡æœ¬æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¹‹ä¸­ã€‚</p>
<p>ï¼ˆ7ï¼‰docsè„šæœ¬å‘½ä»¤</p>
<p><code>docs</code>è„šæœ¬å‘½ä»¤ç”¨äºç”Ÿæˆæ–‡æ¡£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;docs&quot;: &quot;kss-node --source src/sass --homepage ../../styleguide.md&quot;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨<code>kss-node</code>æ¨¡å—ï¼Œæä¾›æºç çš„æ³¨é‡Šç”Ÿæˆmarkdownæ ¼å¼çš„æ–‡æ¡£ã€‚</p>
<h3 id="pre-å’Œ-post-è„šæœ¬"><a href="#pre-å’Œ-post-è„šæœ¬" class="headerlink" title="pre- å’Œ post- è„šæœ¬"></a>pre- å’Œ post- è„šæœ¬</h3><p><code>npm run</code>ä¸ºæ¯æ¡å‘½ä»¤æä¾›äº†<code>pre-</code>å’Œ<code>post-</code>ä¸¤ä¸ªé’©å­ï¼ˆhookï¼‰ã€‚ä»¥<code>npm run lint</code>ä¸ºä¾‹ï¼Œæ‰§è¡Œè¿™æ¡å‘½ä»¤ä¹‹å‰ï¼Œnpmä¼šå…ˆæŸ¥çœ‹æœ‰æ²¡æœ‰å®šä¹‰prelintå’Œpostlintä¸¤ä¸ªé’©å­ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±ä¼šå…ˆæ‰§è¡Œ<code>npm run prelint</code>ï¼Œç„¶åæ‰§è¡Œ<code>npm run lint</code>ï¼Œæœ€åæ‰§è¡Œ<code>npm run postlint</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;myproject&quot;,</div><div class="line">  &quot;devDependencies&quot;: &#123;</div><div class="line">    &quot;eslint&quot;: &quot;latest&quot;</div><div class="line">    &quot;karma&quot;: &quot;latest&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;scripts&quot;: &#123;</div><div class="line">    &quot;lint&quot;: &quot;eslint --cache --ext .js --ext .jsx src&quot;,</div><div class="line">    &quot;test&quot;: &quot;karma start --log-leve=error karma.config.js --single-run=true&quot;,</div><div class="line">    &quot;pretest&quot;: &quot;npm run lint&quot;,</div><div class="line">    &quot;posttest&quot;: &quot;echo &apos;Finished running tests&apos;&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶çš„ä¾‹å­ã€‚å¦‚æœæ‰§è¡Œ<code>npm test</code>ï¼Œä¼šæŒ‰ä¸‹é¢çš„é¡ºåºæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚</p>
<ol>
<li><code>pretest</code></li>
<li><code>test</code></li>
<li><code>posttest</code></li>
</ol>
<p>å¦‚æœæ‰§è¡Œè¿‡ç¨‹å‡ºé”™ï¼Œå°±ä¸ä¼šæ‰§è¡Œæ’åœ¨åé¢çš„è„šæœ¬ï¼Œå³å¦‚æœprelintè„šæœ¬æ‰§è¡Œå‡ºé”™ï¼Œå°±ä¸ä¼šæ¥ç€æ‰§è¡Œlintå’Œpostlintè„šæœ¬ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;test&quot;: &quot;karma start&quot;,</div><div class="line">  &quot;test:lint&quot;: &quot;eslint . --ext .js --ext .jsx&quot;,</div><div class="line">  &quot;pretest&quot;: &quot;npm run test:lint&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨è¿è¡Œ<code>npm run test</code>ä¹‹å‰ï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥ä»£ç ï¼Œå³è¿è¡Œ<code>npm run test:lint</code>å‘½ä»¤ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„<code>pre-</code>å’Œ<code>post-</code>è„šæœ¬ã€‚</p>
<ul>
<li><code>prepublish</code>ï¼šå‘å¸ƒä¸€ä¸ªæ¨¡å—å‰æ‰§è¡Œã€‚</li>
<li><code>postpublish</code>ï¼šå‘å¸ƒä¸€ä¸ªæ¨¡å—åæ‰§è¡Œã€‚</li>
<li><code>preinstall</code>ï¼šç”¨æˆ·æ‰§è¡Œ<code>npm install</code>å‘½ä»¤æ—¶ï¼Œå…ˆæ‰§è¡Œè¯¥è„šæœ¬ã€‚</li>
<li><code>postinstall</code>ï¼šç”¨æˆ·æ‰§è¡Œ<code>npm install</code>å‘½ä»¤æ—¶ï¼Œå®‰è£…ç»“æŸåæ‰§è¡Œè¯¥è„šæœ¬ï¼Œé€šå¸¸ç”¨äºå°†ä¸‹è½½çš„æºç ç¼–è¯‘æˆç”¨æˆ·éœ€è¦çš„æ ¼å¼ï¼Œæ¯”å¦‚æœ‰äº›æ¨¡å—éœ€è¦åœ¨ç”¨æˆ·æœºå™¨ä¸Šè·Ÿæœ¬åœ°çš„C++æ¨¡å—ä¸€èµ·ç¼–è¯‘ã€‚</li>
<li><code>preuninstall</code>ï¼šå¸è½½ä¸€ä¸ªæ¨¡å—å‰æ‰§è¡Œã€‚</li>
<li><code>postuninstall</code>ï¼šå¸è½½ä¸€ä¸ªæ¨¡å—åæ‰§è¡Œã€‚</li>
<li><code>preversion</code>ï¼šæ›´æ”¹æ¨¡å—ç‰ˆæœ¬å‰æ‰§è¡Œã€‚</li>
<li><code>postversion</code>ï¼šæ›´æ”¹æ¨¡å—ç‰ˆæœ¬åæ‰§è¡Œã€‚</li>
<li><code>pretest</code>ï¼šè¿è¡Œ<code>npm test</code>å‘½ä»¤å‰æ‰§è¡Œã€‚</li>
<li><code>posttest</code>ï¼šè¿è¡Œ<code>npm test</code>å‘½ä»¤åæ‰§è¡Œã€‚</li>
<li><code>prestop</code>ï¼šè¿è¡Œ<code>npm stop</code>å‘½ä»¤å‰æ‰§è¡Œã€‚</li>
<li><code>poststop</code>ï¼šè¿è¡Œ<code>npm stop</code>å‘½ä»¤åæ‰§è¡Œã€‚</li>
<li><code>prestart</code>ï¼šè¿è¡Œ<code>npm start</code>å‘½ä»¤å‰æ‰§è¡Œã€‚</li>
<li><code>poststart</code>ï¼šè¿è¡Œ<code>npm start</code>å‘½ä»¤åæ‰§è¡Œã€‚</li>
<li><code>prerestart</code>ï¼šè¿è¡Œ<code>npm restart</code>å‘½ä»¤å‰æ‰§è¡Œã€‚</li>
<li><code>postrestart</code>ï¼šè¿è¡Œ<code>npm restart</code>å‘½ä»¤åæ‰§è¡Œã€‚</li>
</ul>
<p>å¯¹äºæœ€åä¸€ä¸ª<code>npm restart</code>å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®<code>restart</code>è„šæœ¬ï¼Œ<code>prerestart</code>å’Œ<code>postrestart</code>ä¼šä¾æ¬¡æ‰§è¡Œstopå’Œstartè„šæœ¬ã€‚</p>
<p>å¦å¤–ï¼Œä¸èƒ½åœ¨<code>pre</code>è„šæœ¬ä¹‹å‰å†åŠ <code>pre</code>ï¼Œå³<code>prepretest</code>è„šæœ¬ä¸èµ·ä½œç”¨ã€‚</p>
<p>æ³¨æ„ï¼Œå³ä½¿Npmå¯ä»¥è‡ªåŠ¨è¿è¡Œ<code>pre</code>å’Œ<code>post</code>è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå®ƒä»¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run prepublish</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯<code>post install</code>çš„ä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;postinstall&quot;: &quot;node lib/post_install.js&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„è¿™ä¸ªå‘½ä»¤ï¼Œä¸»è¦ç”¨äºå¤„ç†ä»Gitä»“åº“æ‹‰ä¸‹æ¥çš„æºç ã€‚æ¯”å¦‚ï¼Œæœ‰äº›æºç æ˜¯ç”¨TypeScriptå†™çš„ï¼Œå¯èƒ½éœ€è¦è½¬æ¢ä¸€ä¸‹ã€‚</p>
<p>ä¸‹é¢æ˜¯<code>publish</code>é’©å­çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;dist:modules&quot;: &quot;babel ./src --out-dir ./dist-modules&quot;,</div><div class="line">  &quot;gh-pages&quot;: &quot;webpack&quot;,</div><div class="line">  &quot;gh-pages:deploy&quot;: &quot;gh-pages -d gh-pages&quot;,</div><div class="line">  &quot;prepublish&quot;: &quot;npm run dist:modules&quot;,</div><div class="line">  &quot;postpublish&quot;: &quot;npm run gh-pages &amp;&amp; npm run gh-pages:deploy&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤åœ¨è¿è¡Œ<code>npm run publish</code>æ—¶ï¼Œä¼šå…ˆæ‰§è¡ŒBabelç¼–è¯‘ï¼Œç„¶åè°ƒç”¨Webpackæ„å»ºï¼Œæœ€åå‘åˆ°Github Pagesä¸Šé¢ã€‚</p>
<p>ä»¥ä¸Šéƒ½æ˜¯npmç›¸å…³æ“ä½œçš„é’©å­ï¼Œå¦‚æœå®‰è£…æŸäº›æ¨¡å—ï¼Œè¿˜èƒ½æ”¯æŒGitç›¸å…³çš„é’©å­ã€‚ä¸‹é¢ä»¥<a href="https://github.com/typicode/husky" target="_blank" rel="external">husky</a>æ¨¡å—ä¸ºä¾‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install husky --save-dev</div></pre></td></tr></table></figure>
<p>å®‰è£…ä»¥åï¼Œå°±èƒ½åœ¨<code>package.json</code>æ·»åŠ <code>precommit</code>ã€<code>prepush</code>ç­‰é’©å­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;scripts&quot;: &#123;</div><div class="line">        &quot;lint&quot;: &quot;eslint yourJsFiles.js&quot;,</div><div class="line">        &quot;precommit&quot;: &quot;npm run test &amp;&amp; npm run lint&quot;,</div><div class="line">        &quot;prepush&quot;: &quot;npm run test &amp;&amp; npm run lint&quot;,</div><div class="line">        &quot;...&quot;: &quot;...&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç±»ä¼¼ä½œç”¨çš„æ¨¡å—è¿˜æœ‰<code>pre-commit</code>ã€<code>precommit-hook</code>ç­‰ã€‚</p>
<h3 id="å†…éƒ¨å˜é‡-scriptå­—æ®µå’Œconfigå­—æ®µ"><a href="#å†…éƒ¨å˜é‡-scriptå­—æ®µå’Œconfigå­—æ®µ" class="headerlink" title="å†…éƒ¨å˜é‡(scriptå­—æ®µå’Œconfigå­—æ®µ)"></a>å†…éƒ¨å˜é‡(scriptå­—æ®µå’Œconfigå­—æ®µ)</h3><p>scriptså­—æ®µå¯ä»¥ä½¿ç”¨ä¸€äº›å†…éƒ¨å˜é‡ï¼Œä¸»è¦æ˜¯package.jsonçš„å„ç§å­—æ®µã€‚</p>
<p>æ¯”å¦‚ï¼Œpackage.jsonçš„å†…å®¹æ˜¯<code>{&quot;name&quot;:&quot;foo&quot;, &quot;version&quot;:&quot;1.2.5&quot;}</code>ï¼Œé‚£ä¹ˆå˜é‡<code>npm_package_name</code>çš„å€¼æ˜¯<code>foo</code>ï¼Œå˜é‡<code>npm_package_version</code>çš„å€¼æ˜¯1.2.5ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;scripts&quot;:&#123;</div><div class="line">    &quot;bundle&quot;: &quot;mkdir -p build/$npm_package_version/&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œ<code>npm run bundle</code>ä»¥åï¼Œå°†ä¼šç”Ÿæˆ<code>build/1.2.5/</code>å­ç›®å½•ã€‚</p>
<p><code>config</code>å­—æ®µä¹Ÿå¯ä»¥ç”¨äºè®¾ç½®å†…éƒ¨å­—æ®µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;name&quot;: &quot;fooproject&quot;,</div><div class="line">&quot;config&quot;: &#123;</div><div class="line">  &quot;reporter&quot;: &quot;xunit&quot;</div><div class="line">&#125;,</div><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;test&quot;: &quot;mocha test/ --reporter $npm_package_config_reporter&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>npm_package_config_reporter</code>å¯¹åº”çš„å°±æ˜¯reporterã€‚</p>
<h3 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h3><p>npmçš„é€šé…ç¬¦çš„è§„åˆ™å¦‚ä¸‹ã€‚</p>
<ul>
<li><code>*</code> åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</li>
<li><code>?</code> åŒ¹é…1ä¸ªå­—ç¬¦</li>
<li><code>[...]</code> åŒ¹é…æŸä¸ªèŒƒå›´çš„å­—ç¬¦ã€‚å¦‚æœè¯¥èŒƒå›´çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯<code>!</code>æˆ–<code>^</code>ï¼Œåˆ™åŒ¹é…ä¸åœ¨è¯¥èŒƒå›´çš„å­—ç¬¦ã€‚</li>
<li><code>!(pattern|pattern|pattern)</code> åŒ¹é…ä»»ä½•ä¸ç¬¦åˆç»™å®šçš„æ¨¡å¼</li>
<li><code>?(pattern|pattern|pattern)</code> åŒ¹é…0ä¸ªæˆ–1ä¸ªç»™å®šçš„æ¨¡å¼</li>
<li><code>+(pattern|pattern|pattern)</code> åŒ¹é…1ä¸ªæˆ–å¤šä¸ªç»™å®šçš„æ¨¡å¼</li>
<li><code>*(a|b|c)</code> åŒ¹é…0ä¸ªæˆ–å¤šä¸ªç»™å®šçš„æ¨¡å¼</li>
<li><code>@(pattern|pat*|pat?erN)</code> åªåŒ¹é…ç»™å®šæ¨¡å¼ä¹‹ä¸€</li>
<li><code>**</code> å¦‚æœå‡ºç°åœ¨è·¯å¾„éƒ¨åˆ†ï¼Œè¡¨ç¤º0ä¸ªæˆ–å¤šä¸ªå­ç›®å½•ã€‚</li>
</ul>
<h2 id="npm-link"><a href="#npm-link" class="headerlink" title="npm link"></a>npm link</h2><p>å¼€å‘NPMæ¨¡å—çš„æ—¶å€™ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šå¸Œæœ›ï¼Œè¾¹å¼€å‘è¾¹è¯•ç”¨ï¼Œæ¯”å¦‚æœ¬åœ°è°ƒè¯•çš„æ—¶å€™ï¼Œ<code>require(&#39;myModule&#39;)</code>ä¼šè‡ªåŠ¨åŠ è½½æœ¬æœºå¼€å‘ä¸­çš„æ¨¡å—ã€‚Nodeè§„å®šï¼Œä½¿ç”¨ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œéœ€è¦å°†å…¶å®‰è£…åˆ°å…¨å±€çš„æˆ–é¡¹ç›®çš„<code>node_modules</code>ç›®å½•ä¹‹ä¸­ã€‚å¯¹äºå¼€å‘ä¸­çš„æ¨¡å—ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯åœ¨å…¨å±€çš„<code>node_modules</code>ç›®å½•ä¹‹ä¸­ï¼Œç”Ÿæˆä¸€ä¸ªç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘æ¨¡å—çš„æœ¬åœ°ç›®å½•ã€‚</p>
<p><code>npm link</code>å°±èƒ½èµ·åˆ°è¿™ä¸ªä½œç”¨ï¼Œä¼šè‡ªåŠ¨å»ºç«‹è¿™ä¸ªç¬¦å·é“¾æ¥ã€‚</p>
<p>è¯·è®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½ å¼€å‘äº†ä¸€ä¸ªæ¨¡å—<code>myModule</code>ï¼Œç›®å½•ä¸º<code>src/myModule</code>ï¼Œä½ è‡ªå·±çš„é¡¹ç›®<code>myProject</code>è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—ï¼Œé¡¹ç›®ç›®å½•ä¸º<code>src/myProject</code>ã€‚é¦–å…ˆï¼Œåœ¨æ¨¡å—ç›®å½•ï¼ˆ<code>src/myModule</code>ï¼‰ä¸‹è¿è¡Œ<code>npm link</code>å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/myModule$ npm link</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨NPMçš„å…¨å±€æ¨¡å—ç›®å½•å†…ï¼Œç”Ÿæˆä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„åå­—å°±æ˜¯<code>package.json</code>æ–‡ä»¶ä¸­æŒ‡å®šçš„æ¨¡å—åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/path/to/global/node_modules/myModule -&gt; src/myModule</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå·²ç»å¯ä»¥å…¨å±€è°ƒç”¨<code>myModule</code>æ¨¡å—äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦è®©è¿™ä¸ªæ¨¡å—å®‰è£…åœ¨é¡¹ç›®å†…ï¼Œè¿˜è¦è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚</p>
<p>åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•ï¼Œå†æ¬¡è¿è¡Œ<code>npm link</code>å‘½ä»¤ï¼Œå¹¶æŒ‡å®šæ¨¡å—åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/myProject$ npm link myModule</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ç­‰åŒäºç”Ÿæˆäº†æœ¬åœ°æ¨¡å—çš„ç¬¦å·é“¾æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/myProject/node_modules/myModule -&gt; /path/to/global/node_modules/myModule</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼ŒåŠ è½½è¯¥æ¨¡å—äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var myModule = require(&apos;myModule&apos;);</div></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œ<code>myModule</code>çš„ä»»ä½•å˜åŒ–ï¼Œéƒ½å¯ä»¥ç›´æ¥åæ˜ åœ¨<code>myProject</code>é¡¹ç›®ä¹‹ä¸­ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ä¹Ÿå‡ºç°äº†é£é™©ï¼Œä»»ä½•åœ¨<code>myProject</code>ç›®å½•ä¸­å¯¹<code>myModule</code>çš„ä¿®æ”¹ï¼Œéƒ½ä¼šåæ˜ åˆ°æ¨¡å—çš„æºç ä¸­ã€‚</p>
<p>å¦‚æœä½ çš„é¡¹ç›®ä¸å†éœ€è¦è¯¥æ¨¡å—ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•å†…ä½¿ç”¨<code>npm unlink</code>å‘½ä»¤ï¼Œåˆ é™¤ç¬¦å·é“¾æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/myProject$ npm unlink myModule</div></pre></td></tr></table></figure>
<h2 id="npm-bin"><a href="#npm-bin" class="headerlink" title="npm bin"></a>npm bin</h2><p><code>npm bin</code>å‘½ä»¤æ˜¾ç¤ºç›¸å¯¹äºå½“å‰ç›®å½•çš„Nodeæ¨¡å—çš„å¯æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼ˆå³<code>.bin</code>ç›®å½•ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</div><div class="line">$ npm bin</div><div class="line">./node_modules/.bin</div></pre></td></tr></table></figure>
<h2 id="npm-adduser"><a href="#npm-adduser" class="headerlink" title="npm adduser"></a>npm adduser</h2><p><code>npm adduser</code>ç”¨äºåœ¨npmjs.comæ³¨å†Œä¸€ä¸ªç”¨æˆ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm adduser</div><div class="line">Username: YOUR_USER_NAME</div><div class="line">Password: YOUR_PASSWORD</div><div class="line">Email: YOUR_EMAIL@domain.com</div></pre></td></tr></table></figure>
<h2 id="npm-publish"><a href="#npm-publish" class="headerlink" title="npm publish"></a>npm publish</h2><p><code>npm publish</code>ç”¨äºå°†å½“å‰æ¨¡å—å‘å¸ƒåˆ°<code>npmjs.com</code>ã€‚æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦å‘<code>npmjs.com</code>ç”³è¯·ç”¨æˆ·åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm adduser</div></pre></td></tr></table></figure>
<p>å¦‚æœå·²ç»æ³¨å†Œè¿‡ï¼Œå°±ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç™»å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm login</div></pre></td></tr></table></figure>
<p>ç™»å½•ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨<code>npm publish</code>å‘½ä»¤å‘å¸ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm publish</div></pre></td></tr></table></figure>
<p>å¦‚æœå½“å‰æ¨¡å—æ˜¯ä¸€ä¸ªbetaç‰ˆï¼Œæ¯”å¦‚<code>1.3.1-beta.3</code>ï¼Œé‚£ä¹ˆå‘å¸ƒçš„æ—¶å€™éœ€è¦ä½¿ç”¨<code>tag</code>å‚æ•°ï¼Œå°†å…¶å‘å¸ƒåˆ°æŒ‡å®šæ ‡ç­¾ï¼Œé»˜è®¤çš„å‘å¸ƒæ ‡ç­¾æ˜¯<code>latest</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm publish --tag beta</div></pre></td></tr></table></figure>
<p>å¦‚æœå‘å¸ƒç§æœ‰æ¨¡å—ï¼Œæ¨¡å—åˆå§‹åŒ–çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Š<code>scope</code>å‚æ•°ã€‚åªæœ‰npmçš„ä»˜è´¹ç”¨æˆ·æ‰èƒ½å‘å¸ƒç§æœ‰æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm init --scope=&lt;yourscope&gt;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çš„æ¨¡å—æ˜¯ç”¨ES6å†™çš„ï¼Œé‚£ä¹ˆå‘å¸ƒçš„æ—¶å€™ï¼Œæœ€å¥½è½¬æˆES5ã€‚é¦–å…ˆï¼Œéœ€è¦å®‰è£…Babelã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save-dev babel-cli@6 babel-preset-es2015@6</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨<code>package.json</code>é‡Œé¢å†™å…¥<code>build</code>è„šæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;build&quot;: &quot;babel source --presets babel-preset-es2015 --out-dir distribution&quot;,</div><div class="line">  &quot;prepublish&quot;: &quot;npm run build&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„è„šæœ¬ï¼Œä¼šå°†<code>source</code>ç›®å½•é‡Œé¢çš„ES6æºç æ–‡ä»¶ï¼Œè½¬ä¸º<code>distribution</code>ç›®å½•é‡Œé¢çš„ES5æºç æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶<code>.npmignore</code>å’Œ<code>.gitignore</code>ï¼Œåˆ†åˆ«å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// .npmignore</div><div class="line">source</div><div class="line"></div><div class="line">// .gitignore</div><div class="line">node_modules</div><div class="line">distribution</div></pre></td></tr></table></figure>
<h2 id="npm-deprecate"><a href="#npm-deprecate" class="headerlink" title="npm deprecate"></a>npm deprecate</h2><p>å¦‚æœæƒ³åºŸå¼ƒæŸä¸ªç‰ˆæœ¬çš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨<code>npm deprecate</code>å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm deprecate my-thing@&quot;&lt; 0.2.3&quot; &quot;critical bug fixed in v0.2.3&quot;</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œå°äº<code>0.2.3</code>ç‰ˆæœ¬çš„æ¨¡å—çš„<code>package.json</code>éƒ½ä¼šå†™å…¥ä¸€è¡Œè­¦å‘Šï¼Œç”¨æˆ·å®‰è£…è¿™äº›ç‰ˆæœ¬æ—¶ï¼Œè¿™è¡Œè­¦å‘Šå°±ä¼šåœ¨å‘½ä»¤è¡Œæ˜¾ç¤ºã€‚</p>
<h2 id="npm-owner"><a href="#npm-owner" class="headerlink" title="npm owner"></a>npm owner</h2><p>æ¨¡å—çš„ç»´æŠ¤è€…å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚<code>npm owner</code>å‘½ä»¤ç”¨äºç®¡ç†æ¨¡å—çš„ç»´æŠ¤è€…ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># åˆ—å‡ºæŒ‡å®šæ¨¡å—çš„ç»´æŠ¤è€…</div><div class="line">$ npm owner ls &lt;package name&gt;</div><div class="line"></div><div class="line"># æ–°å¢ç»´æŠ¤è€…</div><div class="line">$ npm owner add &lt;user&gt; &lt;package name&gt;</div><div class="line"></div><div class="line"># åˆ é™¤ç»´æŠ¤è€…</div><div class="line">$ npm owner rm &lt;user&gt; &lt;package name&gt;</div></pre></td></tr></table></figure>
<h2 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h2><h3 id="npm-homeï¼Œnpm-repo"><a href="#npm-homeï¼Œnpm-repo" class="headerlink" title="npm homeï¼Œnpm repo"></a>npm homeï¼Œnpm repo</h3><p><code>npm home</code>å‘½ä»¤å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ¨¡å—çš„ä¸»é¡µï¼Œ<code>npm repo</code>å‘½ä»¤åˆ™æ˜¯æ‰“å¼€ä¸€ä¸ªæ¨¡å—çš„ä»£ç ä»“åº“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm home $package</div><div class="line">$ npm repo $package</div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªå‘½ä»¤ä¸éœ€è¦æ¨¡å—å…ˆå®‰è£…ã€‚</p>
<h3 id="npm-outdated"><a href="#npm-outdated" class="headerlink" title="npm outdated"></a>npm outdated</h3><p><code>npm outdated</code>å‘½ä»¤æ£€æŸ¥å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ¨¡å—ï¼Œæ˜¯å¦å·²ç»æœ‰æ–°ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm outdated</div></pre></td></tr></table></figure>
<p>å®ƒä¼šè¾“å‡ºå½“å‰ç‰ˆæœ¬ï¼ˆcurrent versionï¼‰ã€åº”å½“å®‰è£…çš„ç‰ˆæœ¬ï¼ˆwanted versionï¼‰å’Œæœ€æ–°å‘å¸ƒçš„ç‰ˆæœ¬ï¼ˆlatest versionï¼‰ã€‚</p>
<h3 id="npm-prune"><a href="#npm-prune" class="headerlink" title="npm prune"></a>npm prune</h3><p><code>npm prune</code>æ£€æŸ¥å½“å‰é¡¹ç›®çš„<code>node_modules</code>ç›®å½•ä¸­ï¼Œæ˜¯å¦æœ‰<code>package.json</code>é‡Œé¢æ²¡æœ‰æåˆ°çš„æ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—è¾“å‡ºåœ¨å‘½ä»¤è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm prune</div></pre></td></tr></table></figure>
<h3 id="npm-shrinkwrap"><a href="#npm-shrinkwrap" class="headerlink" title="npm shrinkwrap"></a>npm shrinkwrap</h3><p><code>npm shrinkwrap</code>çš„ä½œç”¨æ˜¯é”å®šå½“å‰é¡¹ç›®çš„ä»¥æ¥æ¨¡å—çš„ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm shrinkwrap</div></pre></td></tr></table></figure>
<p>è¿è¡Œè¯¥å‘½ä»¤åï¼Œä¼šåœ¨å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>npm-shrinkwrap.json</code>æ–‡ä»¶ï¼Œå†…å®¹æ˜¯<code>node_modules</code>ç›®å½•ä¸‹æ‰€æœ‰å·²ç»å®‰è£…æ¨¡å—çš„ç‰ˆæœ¬ã€‚</p>
<p>ä¸‹æ¬¡è¿è¡Œ<code>npm install</code>å‘½ä»¤æ—¶ï¼Œ<code>npm</code>å‘ç°å½“å‰ç›®å½•ä¸‹æœ‰<code>npm-shrinkwrap.json</code>æ–‡ä»¶ï¼Œå°±ä¼šåªå®‰è£…é‡Œé¢æåˆ°çš„æ¨¡å—ï¼Œä¸”ç‰ˆæœ¬ä¹Ÿä¼šä¿æŒä¸€è‡´ã€‚</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/03/09/é…ç½®ç›¸å…³â€”npm/" class="archive-article-date">
  	<time datetime="2017-03-09T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-03-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/é…ç½®æ–‡ä»¶/">é…ç½®æ–‡ä»¶</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-react-redux,applyMiddleware" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/27/react-redux,applyMiddleware/">react-redux,applyMiddleware</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>react-reduxè¯¦ç»†æ•™ç¨‹è¯·å‚è€ƒé˜®ä¸€å³°çš„æ–‡ç« :<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html" target="_blank" rel="external">react-redux</a>,è¿™é‡Œåªæ˜¯ä»‹ç»ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼ŒåŠè‡ªå·±é‡åˆ°çš„ä¸€ç‚¹ç—›ç‚¹ï¼Œ<code>applyMiddleware</code>å…ˆä»‹ç» ä¸¤ä¸ªå¸¸ç”¨çš„<code>redux-thunk</code>å’Œ<code>redux-logger</code></p>
</blockquote>
<h2 id="ç»Ÿä¸€æ•´ç†-æƒ³åˆ°å“ªå†™åˆ°å“ªâ€¦"><a href="#ç»Ÿä¸€æ•´ç†-æƒ³åˆ°å“ªå†™åˆ°å“ªâ€¦" class="headerlink" title="ç»Ÿä¸€æ•´ç†(æƒ³åˆ°å“ªå†™åˆ°å“ªâ€¦)"></a>ç»Ÿä¸€æ•´ç†(æƒ³åˆ°å“ªå†™åˆ°å“ªâ€¦)</h2><p>é¡¹ç›®æºç åœ¨githubä¸Šæˆ³<a href="https://github.com/Jasonellen/react-plus" target="_blank" rel="external">react-plus</a></p>
<h3 id="ä¸€ï¼Œreact-reduxæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#ä¸€ï¼Œreact-reduxæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="ä¸€ï¼Œreact-reduxæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>ä¸€ï¼Œ<code>react-redux</code>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>â€‹    React-Redux å°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼šUI ç»„ä»¶ï¼ˆpresentational componentï¼‰å’Œå®¹å™¨ç»„ä»¶ï¼ˆcontainer component)ã€‚</p>
<ul>
<li><p>UIç»„ä»¶åªè´Ÿè´£ UI çš„å‘ˆç°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">    /**</div><div class="line">     *state,add,delæ˜¯å“ªé‡Œçš„ï¼Ÿå°±æ˜¯å‡½æ•°mapStateToPropså’ŒmapDispatchToPropsè¿”å›çš„</div><div class="line">     **/</div><div class="line">    const &#123;state,add,del&#125;=this.props;</div><div class="line">    return (</div><div class="line">        &lt;View style=&#123;styles.container&#125;&gt;</div><div class="line">            &lt;View style=&#123;styles.item&#125;&gt;</div><div class="line">                &lt;Text style=&#123;&#123;color: &apos;red&apos;&#125;&#125;&gt;&#123;state.sum&#125;&lt;/Text&gt;</div><div class="line">            &lt;/View&gt;</div><div class="line">            &lt;View style=&#123;[styles.item, &#123;top: 10&#125;]&#125;&gt;</div><div class="line">                &lt;TouchableWithoutFeedback onPress=&#123;add&#125; &gt;</div><div class="line">                    &lt;View style=&#123;styles.touch&#125;&gt;</div><div class="line">                        &lt;Text style=&#123;styles.but&#125;&gt;+&lt;/Text&gt;</div><div class="line">                    &lt;/View&gt;</div><div class="line">                &lt;/TouchableWithoutFeedback&gt;</div><div class="line">            &lt;View&gt;</div><div class="line">        &lt;View&gt;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>æ‰€æœ‰æ•°æ®éƒ½ç”±å‚æ•°ï¼ˆ<code>this.props</code>ï¼‰æä¾›</p>
<ul>
<li><p>React-Redux æä¾›<code>Provider</code>ç»„ä»¶ï¼Œå¯ä»¥è®©å®¹å™¨ç»„ä»¶æ‹¿åˆ°<code>state</code>ã€‚</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">render(</div><div class="line">  &lt;Provider store=&#123;store&#125;&gt; </div><div class="line">    &lt;App /&gt;</div><div class="line">    //ç„¶åAppç»„ä»¶å°±å¯ä»¥é€šè¿‡this.propsè·å–`æ¯ä¸ªç»„ä»¶JSæ–‡ä»¶å†…éƒ¨å®šä¹‰çš„mapStateToPropsä¸­è¿”å›çš„stateå’ŒmapDispatchToPropsä¸­è¿”å›çš„å›è°ƒæ–¹æ³•</div><div class="line">  &lt;/Provider&gt;,</div><div class="line">  document.getElementById(&apos;root&apos;)</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>React-Redux æä¾›<code>connect</code>æ–¹æ³•ï¼Œç”¨äºä» UI ç»„ä»¶ç”Ÿæˆå®¹å™¨ç»„ä»¶</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function mapStateToProps(state)&#123;</div><div class="line">  return &#123;</div><div class="line">    state: state.Index1 </div><div class="line">    //stateæ˜¯å…¨å±€çš„state,Index1æ˜¯Index1(reducer)è¿”å›çš„state,å› ä¸ºstateå†…éƒ¨åŒ…å«æ‰€æœ‰reducerè¿”å›çš„state,æ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨.è¯­æ³•ç¡®å®šéœ€è¦ä¼ é€’é‚£ä¸ªreducerè¿”å›çš„çŠ¶æ€ç»™UIç»„ä»¶ä½¿ç”¨</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function mapDispatchToProps(dispatch) &#123;</div><div class="line">  return&#123;</div><div class="line">	add: () =&gt;   dispatch(IndexAction.add())â‘ </div><div class="line">	//IndexAction.add()æ‰§è¡ŒActionä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªactionå¯¹è±¡</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*action add()å‡½æ•°ä¸‹é¢è¿™æ ·</div><div class="line">  export function add() &#123;</div><div class="line">      return &#123;</div><div class="line">          type: &apos;INDEX_ADD&apos;</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">*/</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export default connect(  mapStateToProps,  mapDispatchToProps)(UIComponent)</div><div class="line">//å¯¼å‡ºå®¹å™¨ç»„ä»¶</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å®¹å™¨ç»„ä»¶è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘</p>
</li>
<li><p>Reducerè§¦å‘äº†mapDispatchToPropsä¸­çš„æ–¹æ³•åè‡ªåŠ¨æ‰§è¡Œ</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">import * as types from &apos;../constant/ActionTypes&apos;;</div><div class="line"></div><div class="line">const initialState = &#123;</div><div class="line">    sum:0</div><div class="line">&#125;;</div><div class="line">export default function IndexReducer(state = initialState, action = &#123;&#125;) &#123;</div><div class="line">    switch (action.type)&#123; </div><div class="line">        case types.INDEX_ADD: â‘¡</div><div class="line">            return &#123;</div><div class="line">                ...state,</div><div class="line">                sum:state.sum+1</div><div class="line">            &#125;;</div><div class="line">            break;</div><div class="line">        case types.INDEX_DEL:</div><div class="line">            return &#123;</div><div class="line">                ...state,</div><div class="line">                sum:state.sum-1</div><div class="line">            &#125;;</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            return state;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>//æ‰§è¡Œäº†ä¸Šé¢â‘ å‡ºçš„dispatchæ–¹æ³•åâ‘¡å‡ºçš„reducerå°±ä¼šæ‰§è¡Œå¹¶è¿”å›æœ€æ–°çš„çŠ¶æ€ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†,å¦‚æœæˆ‘æƒ³å†æ¥ä¸€ä¸ªâ•1çš„UIï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿç›´æ¥å¢åŠ ä¸€ä¸ªUIå®¹å™¨ç»„ä»¶ï¼Œç„¶ååŠ ä¸€ä¸ªreduceråƒä¸‹é¢è¿™æ ·ï¼Ÿ</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">import * as types from &apos;../constant/ActionTypes&apos;;</div><div class="line">const initialState = &#123;</div><div class="line">    sum:0</div><div class="line">&#125;;</div><div class="line">export default function IndexReducer2(state = initialState, action = &#123;&#125;) &#123;</div><div class="line">    switch (action.type)&#123;</div><div class="line">        case types.INDEX_ADD:</div><div class="line">            return &#123;</div><div class="line">                ...state,</div><div class="line">                sum:state.sum+1</div><div class="line">            &#125;;</div><div class="line">            break;</div><div class="line">        case types.INDEX_DEL:</div><div class="line">            return &#123;</div><div class="line">                ...state,</div><div class="line">                sum:state.sum-1</div><div class="line">            &#125;;</div><div class="line">            break;</div><div class="line">        case types.INDEX_INIT:</div><div class="line">            return &#123;</div><div class="line">                ...state,</div><div class="line">                sum:action.param!=undefined</div><div class="line">            &#125;;</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            return state;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»“æœå°±æ˜¯ä¸¤ä¸ªåŠ æ“ä½œä¼šä¸€èµ·æ‰§è¡Œï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªåŠ æŒ‰é’®ï¼Œç¬¬äºŒä¸ªä¸€èµ·å¢åŠ ï¼ŒåŸå› æ˜¯å› ä¸ºç‚¹å‡»ç¬¬ä¸€ä¸ªåŠ æŒ‰é’®å’Œç‚¹å‡»ç¬¬äºŒä¸ªåŠ æŒ‰é’®æ‰§è¡Œçš„<code>mapDispatchToProps</code>æ–¹æ³•éƒ½æ˜¯è§¦å‘ç›¸åŒçš„<code>action:{ type: &#39;INDEX_ADD&#39;}</code>æ‰€ä»¥ä¼šè§¦å‘æ‰€æœ‰ç›‘å¬æ­¤<code>action</code>çš„æ‰€æœ‰çš„reducer,è§£å†³çš„åŠæ³•å°±æ˜¯æ¯ä¸ª<code>reducer</code>ç›‘å¬è‡ªå·±çš„<code>action</code>,åªè¦åœ¨actionå¢åŠ ä¸€ä¸ªfunction add2(){ return {  type: types.INDEX2_ADD} },ç„¶åè®¾ç½®IndexReducer2ï¼Œ</p>
<p> case types.INDEX2_ADD:<br>â€‹            return {<br>â€‹                â€¦state,<br>â€‹                sum:state.sum+1<br>â€‹            };<br>â€‹            break;</p>
<p>å³å¯å®Œå„è‡ªreducerç›‘å¬å„è‡ªçš„actionæ‰§è¡Œå¹¶è¿”å›å„è‡ªçš„state</p>
</li>
</ul>
</li>
</ul>
<h3 id="äºŒï¼Œredux-loggeræœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#äºŒï¼Œredux-loggeræœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="äºŒï¼Œredux-loggeræœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>äºŒï¼Œ<code>redux-logger</code>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>å°±æ˜¯è¯´ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œ<code>redux-logger</code>ä¸­é—´é”®ä¼šåŠ å…¥åˆ°<code>store</code>ä¸­åä¼š<code>è‡ªåŠ¨ç›‘å¬</code>çŠ¶æ€æ›´æ–°ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°å‡ºå‘ç›¸å…³ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">action @ 00:29:13.950 INDEX_ADD</div><div class="line"> prev state  Object</div><div class="line"> 			 IndexReduer:Object</div><div class="line"> 			 	sum:0</div><div class="line"> action Object</div><div class="line"> 		type:&apos;INDEX_ADD&apos;</div><div class="line"> next state  Object</div><div class="line"> 			 IndexReduer:Object</div><div class="line"> 			 	sum:1</div><div class="line">è¿™æ ·çš„ç›¸å…³ä¿¡æ¯...</div></pre></td></tr></table></figure>
<h3 id="ä¸‰ï¼ŒåŠ å…¥ä¸­é—´é”®åstoreçš„åˆ›å»ºæ–¹å¼"><a href="#ä¸‰ï¼ŒåŠ å…¥ä¸­é—´é”®åstoreçš„åˆ›å»ºæ–¹å¼" class="headerlink" title="ä¸‰ï¼ŒåŠ å…¥ä¸­é—´é”®åstoreçš„åˆ›å»ºæ–¹å¼"></a>ä¸‰ï¼ŒåŠ å…¥ä¸­é—´é”®åstoreçš„åˆ›å»ºæ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">// rootReducer.js</div><div class="line">import &#123; combineReducers &#125; from &apos;redux&apos;;</div><div class="line">import IndexReducer from &apos;./IndexReducer&apos;;</div><div class="line">import IndexReducer2 from &apos;./indexReducer2&apos;;</div><div class="line">const RootReducer = combineReducers(&#123;</div><div class="line">    IndexReducer,IndexReducer2  //é€šè¿‡combineReducersåˆæˆä¸€ä¸ªæ€»rootReducer</div><div class="line">&#125;);</div><div class="line">export default RootReducer;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">// configure-store.js  //ç”¨äºç”Ÿæˆstore</div><div class="line">import &#123;createStore, applyMiddleware&#125; from &apos;redux&apos;;</div><div class="line">import  rootReducer from &apos;../reducer/RootReducer&apos;;</div><div class="line">import thunk from &apos;redux-thunk&apos;;</div><div class="line">const middlewares = [thunk];</div><div class="line"></div><div class="line">const createLogger = require(&apos;redux-logger&apos;);</div><div class="line">if (process.env.NODE_ENV === &apos;development&apos;) &#123;</div><div class="line">    const logger = createLogger();</div><div class="line">    //redux æ—¥å¿—æ‰“å°</div><div class="line">    middlewares.push(logger);</div><div class="line">&#125;</div><div class="line">// storeç”Ÿæˆæ–¹å¼ä¸€ï¼Œç½‘ä¸Šå¥½åƒè¿™æ ·æ–¹å¼è¿˜æ¯”è¾ƒå¤š</div><div class="line">const createStoreWithMiddleware = applyMiddleware(...middlewares)(createStore);</div><div class="line">export default function configureStore(initialState) &#123;</div><div class="line">    const store = createStoreWithMiddleware(rootReducer, initialState);</div><div class="line">    return store;</div><div class="line">&#125;</div><div class="line">// storeç”Ÿæˆæ–¹å¼äºŒï¼Œè¿˜æ˜¯æ„Ÿè§‰è¿™ç§æ¯”è¾ƒç®€å•(å¯ä»¥ç›´æ¥åœ¨ä¸»ç•Œé¢ä½¿ç”¨)</div><div class="line">export default function configureStore(initialState) &#123;</div><div class="line">   const store = createStore(rootReducer, initialState, applyMiddleware(...middlewares));</div><div class="line">    return store;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä¸‰ï¼Œredux-thunkæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#ä¸‰ï¼Œredux-thunkæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="ä¸‰ï¼Œredux-thunkæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>ä¸‰ï¼Œ<code>redux-thunk</code>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>redux-thunk,æ˜¯ä¸ºäº†å¼‚æ­¥ä½¿ç”¨dispatchæ–¹æ³•è€Œä½¿ç”¨çš„ï¼Œå’Œ<code>redux-logger</code>ä¸€æ ·ï¼Œç”±storeåŠ å…¥åè‡ªåŠ¨ç”Ÿæ•ˆï¼Œä½¿ç”¨åœºæ™¯ï¼Ÿæˆ‘æ¥å°ä¸¾ä¸€ä¾‹ï¼š</p>
<p>ä¾‹å¦‚ä¸Šé¢çš„ç‚¹å‡»åŠ ä¸€æ“ä½œæ˜¯è¿™æ ·çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1ï¼Œ  const &#123;state,add,del&#125;=this.props;</div><div class="line">2ï¼Œ &lt;Text style=&#123;styles.but&#125; onPress=&#123;add&#125;&gt;+&lt;/Text&gt;</div><div class="line">3ï¼Œ function mapDispatchToProps(dispatch) &#123;</div><div class="line">  		return&#123;</div><div class="line">			add: () =&gt;   dispatch(&#123;type:&apos;INDEX_ADD&apos;&#125;)</div><div class="line">  		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ç°åœ¨æˆ‘éœ€è¦å®ç°ç‚¹å‡»ç¬¬ä¸€ä¸ªåŠ ä¸€æŒ‰é’®3ç§’æ‰æ‰§è¡ŒåŠ ä¸€ï¼Œ</p>
<p>ä¸ç”¨<code>redux-thunk</code>æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1ï¼Œ const &#123;state,add,del&#125;=this.props;</div><div class="line">2ï¼Œ startAdd()&#123;</div><div class="line">		setTimeout(function()&#123;</div><div class="line">          add();</div><div class="line">		&#125;,3000)</div><div class="line">	&#125;</div><div class="line">3ï¼Œ &lt;Text style=&#123;styles.but&#125; onPress=&#123;this.startAdd&#125;&gt;+&lt;/Text&gt;</div><div class="line">4ï¼Œ function mapDispatchToProps(dispatch) &#123;</div><div class="line">  		return&#123;</div><div class="line">			add: () =&gt;   dispatch(&#123;type:&apos;INDEX_ADD&apos;&#125;)</div><div class="line">  		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨äº†<code>redux-thunk</code>åå¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1ï¼Œ const &#123;state,add,del&#125;=this.props;</div><div class="line">2ï¼Œ &lt;Text style=&#123;styles.but&#125; onPress=&#123;add&#125;&gt;+&lt;/Text&gt;</div><div class="line">3ï¼Œ function mapDispatchToProps(dispatch) &#123;</div><div class="line">  		return&#123;</div><div class="line">			add: () =&gt; dispatch(function(dispatch,getState)&#123;</div><div class="line">			  console.log(getState())</div><div class="line">              setTimeout(function()&#123;</div><div class="line">                dispatch(&#123;type:&apos;INDEX_ADD&apos;&#125;)</div><div class="line">              &#125;,3000)</div><div class="line">			&#125;)</div><div class="line">  		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´æœ¬æ¥åªèƒ½ä¼ å…¥<code>{}</code>ä½œä¸ºå‚æ•°çš„dispatchç”¨äº†<code>redux-thunk</code>åå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç„¶åå†è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œdispatchå°±å¯ä»¥äº†ï¼Œæ‰€æœ‰å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨æ‰§è¡ŒsetTimeoutå’Œfetchç­‰æ–¹æ³•äº†ï¼Œå®ç°å¼‚æ­¥çš„reduxæ“ä½œï¼ŒåŒæ—¶thunkè¿˜æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥è·å–å…¨å±€state!</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/27/react-redux,applyMiddleware/" class="archive-article-date">
  	<time datetime="2017-02-26T17:09:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-27</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-import" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/21/import/">import</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>ä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œåœ¨å¦‚ä½•å¯¼å…¥/å¯¼å‡ºè‡ªå·±å†™çš„ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶ä¹Ÿæ˜¯æ‘¸ä¸ç€å¤´è„‘ï¼Œæƒ³æˆ‘å½“å¹´ä¸€æ ·å–½â˜º</p>
</blockquote>
<h1 id="ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ —å­ğŸŒ°"><a href="#ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ —å­ğŸŒ°" class="headerlink" title="ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ —å­ğŸŒ°"></a>ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ —å­ğŸŒ°</h1><h3 id="1-import-React-Component-from-â€˜reactâ€™"><a href="#1-import-React-Component-from-â€˜reactâ€™" class="headerlink" title="1. import React ,{ Component } from â€˜reactâ€™;"></a>1. import React ,{ Component } from â€˜reactâ€™;</h3><pre><code>è¿™æ˜¯RN 0.26åå¯¼å…¥Reactçš„æ–¹å¼ï¼Œè¿™æ„æ€æ˜¯ï¼Œå¯¼å…¥â€˜reactâ€™æ–‡ä»¶é‡Œexportçš„ä¸€ä¸ªé»˜è®¤çš„ç»„ä»¶ï¼Œå°†å…¶å‘½åä¸ºReactä»¥åŠComponentè¿™ä¸ªéé»˜è®¤ç»„ä»¶
</code></pre><p>â€‹    </p>
<h3 id="2-import-Home-from-â€˜-Homeâ€™"><a href="#2-import-Home-from-â€˜-Homeâ€™" class="headerlink" title="2.import Home from â€˜./Homeâ€™;"></a>2.import Home from â€˜./Homeâ€™;</h3><pre><code>è¿™æ˜¯å¯¼å…¥â€˜Homeâ€™æ–‡ä»¶é‡Œexportçš„å¸¦defaultå…³é”®å­—çš„ç»„ä»¶ï¼Œå³é»˜è®¤ç»„ä»¶,å°†å…¶å‘½åä¸ºHome(å¯ä»¥è‡ªå®šä¹‰å‘½å)
</code></pre><p><img src="http://wx4.sinaimg.cn/mw690/908edb0egy1fckd559kn5j20ea0b43z3.jpg" alt=""></p>
<h3 id="3-import-Home-from-â€˜-Homeâ€™"><a href="#3-import-Home-from-â€˜-Homeâ€™" class="headerlink" title="3.import { Home } from â€˜./Homeâ€™;"></a>3.import { Home } from â€˜./Homeâ€™;</h3><pre><code>å¯¼å…¥â€˜Homeâ€™æ–‡ä»¶é‡Œexportçš„å«Homeçš„ éé»˜è®¤ç»„ä»¶ï¼Œæ³¨æ„ï¼Œéé»˜è®¤ï¼Œéé»˜è®¤ï¼Œéé»˜è®¤ï¼Œä»¥åŠå‘½åHome,å‘½åHome,å‘½åHome
</code></pre><p>â€‹    </p>
<h3 id="4-import-Home-Discover-from-â€˜-Homeâ€™"><a href="#4-import-Home-Discover-from-â€˜-Homeâ€™" class="headerlink" title="4.import { Home , Discover } from â€˜/Homeâ€™;"></a>4.import { Home , Discover } from â€˜/Homeâ€™;</h3><pre><code>è·Ÿ3çš„å·®ä¸å¤šï¼Œä¸è¿‡æ˜¯{  },å¯ä»¥å¯¼å…¥å¤šä¸ªç»„ä»¶ï¼Œç”¨ï¼Œéš”å¼€å°±å¯ä»¥
</code></pre><p>â€‹    </p>
<h3 id="5-import-as-Home-fromâ€™-compoments-Homeâ€™"><a href="#5-import-as-Home-fromâ€™-compoments-Homeâ€™" class="headerlink" title="5.import * as Home fromâ€™./compoments/Homeâ€™;"></a>5.import * as Home fromâ€™./compoments/Homeâ€™;</h3><pre><code>æ„æ€æ˜¯å°†./compoments/Home&apos;æ–‡ä»¶é‡Œçš„æ‰€æœ‰éé»˜è®¤ç»„ä»¶ï¼Œå…¨éƒ¨é›†ç»“æˆä¸€ä¸ªHomeæ¨¡å‹ç»„ä»¶ï¼Œå‘½åå¯ä»¥è‡ªå®šä¹‰ï¼Œç„¶åå¯ä»¥é€šè¿‡ç‚¹è¯­æ³•ï¼Œæ¥ä½¿ç”¨ç»„ä»¶é‡Œé¢çš„æ‰€æœ‰exportçš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š
</code></pre><p><img src="http://wx1.sinaimg.cn/mw690/908edb0egy1fckda4pc8gj20hx0bgmy0.jpg" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/21/import/" class="archive-article-date">
  	<time datetime="2017-02-21T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-21</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/import/">import</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-reduxå…¥é—¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/21/reduxå…¥é—¨/">reduxå…¥é—¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>ä¸ªäººåªæ˜¯æŠŠreduxå’Œvuexå½“åšè¿›è¡Œç»Ÿä¸€çŠ¶æ€ç®¡ç†çš„å·¥å…·ï¼Œé‚£ä¸ªå’Œä¸Šä¸€ç¯‡vuexä¸€æ ·ï¼Œè¿™é‡Œè¿˜æ˜¯ä¸¾ä¸ªç›¸åŒçš„åŠ å‡æ —å­æ¥å¯¹reduxåšä¸ªå…¥é—¨ä»‹ç»</p>
</blockquote>
<h1 id="Redux-åŸºç¡€æ¦‚å¿µ"><a href="#Redux-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="Redux åŸºç¡€æ¦‚å¿µ"></a>Redux åŸºç¡€æ¦‚å¿µ</h1><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><pre><code>State æè¿°ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å…¨éƒ¨çŠ¶æ€,æ‰€æœ‰éœ€è¦æ§åˆ¶çš„çŠ¶æ€éƒ½åº”è®¾è®¡åˆ° state å¯¹è±¡ä¸­
</code></pre><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><pre><code>Action ç”¨æ¥æè¿°ä¸€ä¸ªè¡Œä¸ºï¼Œå¹¶è´Ÿè½½ç›¸åº”çš„ä¿¡æ¯ã€‚
</code></pre><h3 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h3><pre><code>Reducer æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰çŠ¶æ€ï¼Œè€Œç¬¬äºŒå‚æ•°æ˜¯ action, è¿”å›æ›´æ–°åçš„çŠ¶æ€ã€‚
ç”¨æ¥æ‰§è¡Œstoreè§¦å‘çš„Actionå¯¹åº”çš„æ–¹æ³•
</code></pre><h3 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h3><pre><code>Store æ˜¯ç®¡ç†åº”ç”¨ç¨‹åº state çš„å®¹å™¨

store = {
    getState,
    dispatch,
    subscribe,
    replaceReducer
}
</code></pre><h4 id="å¦‚ä¸Šï¼Œstoreå…±æœ‰4ä¸ªAPI"><a href="#å¦‚ä¸Šï¼Œstoreå…±æœ‰4ä¸ªAPI" class="headerlink" title="å¦‚ä¸Šï¼Œstoreå…±æœ‰4ä¸ªAPI,"></a>å¦‚ä¸Šï¼Œstoreå…±æœ‰4ä¸ªAPI,</h4><pre><code>getState: (æ•°æ®æ¥å£)
ä½¿ç”¨æ–¹å¼: store.getState()
åŠŸèƒ½ç‚¹: reduxå¯¹å¤–å¯¼å‡ºæ•°æ®çš„æ¥å£(getter)

subscribe: (è®¢é˜…æ¥å£)
ä½¿ç”¨æ–¹å¼: store.subscribe(å›è°ƒå‡½æ•°)
åŠŸèƒ½ç‚¹: åœ¨æ¯æ¬¡æ‰§è¡Œdispatchçš„æ—¶å€™ï¼Œç”¨äºæ‰§è¡Œè‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°æ“ä½œ

dispatch: (æ‰§è¡Œæ¥å£)
ä½¿ç”¨æ–¹å¼: store.dispatch(action)
åŠŸèƒ½ç‚¹: åœ¨æ‰§è¡Œreduxçš„stateæ›´æ–°çš„åŒæ—¶ï¼Œæ‰§è¡Œæ‰€æœ‰subscribeè¿‡çš„å›è°ƒå‡½æ•°

replaceReducer: (é‡ç½®storeæ¥å£)
ä½¿ç”¨æ–¹å¼: store.replaceReducer(nextReducer)
åŠŸèƒ½ç‚¹: é‡ç½®reduxçš„reducerï¼Œé‡æ–°å¯åŠ¨storeæµç¨‹
</code></pre><h3 id="æµç¨‹å›¾å¦‚ä¸‹"><a href="#æµç¨‹å›¾å¦‚ä¸‹" class="headerlink" title="æµç¨‹å›¾å¦‚ä¸‹"></a>æµç¨‹å›¾å¦‚ä¸‹</h3><p><img src="http://wx4.sinaimg.cn/mw690/908edb0egy1fchwn37a5fj20jf0d5mx6.jpg" alt=""></p>
<h2 id="é¡¹ç›®å®æˆ˜ï¼š"><a href="#é¡¹ç›®å®æˆ˜ï¼š" class="headerlink" title="é¡¹ç›®å®æˆ˜ï¼š"></a>é¡¹ç›®å®æˆ˜ï¼š</h2><p><strong>é¦–å…ˆå®‰è£…reduxåˆ°é¡¹ç›®ä¸­</strong></p>
<pre><code>npm install --save redux
</code></pre><p><strong>ä»£ç ç¼–å†™</strong></p>
<h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><pre><code>&lt;p&gt;
    Clicked: &lt;span id=&quot;value&quot;&gt;0&lt;/span&gt;
    &lt;button id=&quot;increment&quot;&gt;+&lt;/button&gt;
    &lt;button id=&quot;decrement&quot;&gt;-&lt;/button&gt;
&lt;/p&gt;
</code></pre><h4 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h4><pre><code>//å¯¼å…¥createStroe
import { createStore } from &apos;redux&apos;

//åˆå§‹åŒ–çŠ¶æ€
let initState = {
      count: 0,
      score: 0,
      description:&apos;æè¿°&apos;
}

//åˆ›å»ºä¸€ä¸ªReducer
function counter(state = initState, action) {
    switch (action.type) {
        case &apos;INCREMENT&apos;:
              return{
                  count:state.count + 1,
                score:state.score + 2,
                description:action.data
              } 
        case &apos;DECREMENT&apos;:
              return{
                  count:state.count - 1,
                score:state.score - 2,
                description:action.data
              } 
        default:
              return state;
          }
    }

//å°†åˆ›å»ºå¥½çš„Reducerä¼ å…¥åˆ›å»ºStore
let store = Redux.createStore(counter);

//è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œå¹¶ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»åstoreå°†è§¦å‘ç›¸åº”çš„åŠ¨ä½œAction
let valueEl = document.getElementById(&apos;value&apos;);
document.getElementById(&apos;increment&apos;).addEventListener(&apos;click&apos;, function() {
    store.dispatch({
          type: &apos;INCREMENT&apos;,
          data:&apos;å¢åŠ çš„&apos;
    })
})
document.getElementById(&apos;decrement&apos;).addEventListener(&apos;click&apos;, function() {
    store.dispatch({
          type: &apos;DECREMENT&apos;,
          data:&apos;å‡å°‘çš„&apos;,
    })
})

//å†™ä¸€ä¸ªrenderæ–¹æ³•ï¼Œåœ¨è¿™é‡ŒåŠ¨æ€æ”¹å˜å…ƒç´ çš„å†…å®¹
function render() {
    valueEl.innerHTML = &apos;ç‚¹å‡»&apos;+store.getState().count.toString()+&apos;æ¬¡-å¾—        åˆ†&apos;+store.getState().score.toString()+store.getState().description;
}

//æ‰§è¡Œrenderæ–¹æ³•
render();

//ç»‘å®šsubscribeå›è°ƒ
store.subscribe(render);
</code></pre><h5 id="ä¸Šè¿°JSæ–‡ä»¶ï¼Œå½“æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™-reduxçš„çŠ¶æ€ç®¡ç†è€…storeè°ƒç”¨dispatch-APIè§¦å‘ç›¸åº”typeçš„Action-ç„¶åReducerå°±ä¼šé€šè¿‡å¯¹åº”çš„Actonæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œæ”¹å˜Reduxçš„çŠ¶æ€ï¼Œæ­¤æ—¶è™½ç„¶çŠ¶æ€æ”¹å˜äº†ï¼Œä½†æ˜¯valueEl-innerHTMLçš„å€¼å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ­¤æ—¶éœ€è¦è°ƒç”¨store-subscribe-render-å‡½æ•°æ‰§è¡Œå›è°ƒå‡½æ•°render"><a href="#ä¸Šè¿°JSæ–‡ä»¶ï¼Œå½“æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™-reduxçš„çŠ¶æ€ç®¡ç†è€…storeè°ƒç”¨dispatch-APIè§¦å‘ç›¸åº”typeçš„Action-ç„¶åReducerå°±ä¼šé€šè¿‡å¯¹åº”çš„Actonæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œæ”¹å˜Reduxçš„çŠ¶æ€ï¼Œæ­¤æ—¶è™½ç„¶çŠ¶æ€æ”¹å˜äº†ï¼Œä½†æ˜¯valueEl-innerHTMLçš„å€¼å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ­¤æ—¶éœ€è¦è°ƒç”¨store-subscribe-render-å‡½æ•°æ‰§è¡Œå›è°ƒå‡½æ•°render" class="headerlink" title="ä¸Šè¿°JSæ–‡ä»¶ï¼Œå½“æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™ reduxçš„çŠ¶æ€ç®¡ç†è€…storeè°ƒç”¨dispatch APIè§¦å‘ç›¸åº”typeçš„Action,ç„¶åReducerå°±ä¼šé€šè¿‡å¯¹åº”çš„Actonæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œæ”¹å˜Reduxçš„çŠ¶æ€ï¼Œæ­¤æ—¶è™½ç„¶çŠ¶æ€æ”¹å˜äº†ï¼Œä½†æ˜¯valueEl.innerHTMLçš„å€¼å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ­¤æ—¶éœ€è¦è°ƒç”¨store.subscribe(render)å‡½æ•°æ‰§è¡Œå›è°ƒå‡½æ•°render()"></a>ä¸Šè¿°JSæ–‡ä»¶ï¼Œå½“æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™ reduxçš„çŠ¶æ€ç®¡ç†è€…storeè°ƒç”¨dispatch APIè§¦å‘ç›¸åº”typeçš„Action,ç„¶åReducerå°±ä¼šé€šè¿‡å¯¹åº”çš„Actonæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œæ”¹å˜Reduxçš„çŠ¶æ€ï¼Œæ­¤æ—¶è™½ç„¶çŠ¶æ€æ”¹å˜äº†ï¼Œä½†æ˜¯valueEl.innerHTMLçš„å€¼å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ­¤æ—¶éœ€è¦è°ƒç”¨store.subscribe(render)å‡½æ•°æ‰§è¡Œå›è°ƒå‡½æ•°render()</h5><h1 id="OVER"><a href="#OVER" class="headerlink" title="OVER"></a>OVER</h1>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/21/reduxå…¥é—¨/" class="archive-article-date">
  	<time datetime="2017-02-21T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-21</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-fetch_faild_in_reactnative" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/14/fetch_faild_in_reactnative/">fetch faild in reactnative</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>fetchåœ¨ReactNativeä¸­å¯èƒ½ä¼šæŠ¥é”™å¦‚ä¸‹ï¼šPossible unhandled promise rejection (id:0: Network request failed</p>
</blockquote>
<h3 id="According-to-this-post-you-should-enable-it-in-XCode"><a href="#According-to-this-post-you-should-enable-it-in-XCode" class="headerlink" title="According to this post, you should enable it in XCode."></a>According to this post, you should enable it in XCode.</h3><ol>
<li>Click on your project in the Project Navigator</li>
<li>Open the Info tab</li>
<li>Click on the down arrow left to the â€œApp Transport Security Settingsâ€</li>
<li>Right click on â€œApp Transport Security Settingsâ€ and select Add Row</li>
<li>For created row set the key â€œAllow Arbitrary Loadsâ€œ, type to boolean and value to YES.</li>
</ol>
<p><img src="http://wx4.sinaimg.cn/mw690/908edb0egy1fd057agsrdj20hk07yjuv.jpg" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/02/14/fetch_faild_in_reactnative/" class="archive-article-date">
  	<time datetime="2017-02-14T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-02-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ReactNative/">ReactNative</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
    <article id="post-vuex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/24/vuex/">vuex</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>å…³äºvuexåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œçœ‹åˆ°çœ¼çƒ­å°±å»æŸ¥äº†ä¸‹èµ„æ–™ï¼Œç„¶åæ‰¯å‡ºæ¥ä¸€å †fluxã€reduxã€stateã€stateä¹‹ç±»çš„æ¦‚å¿µï¼Œä»¥åŠå¤§å‹å·¥ç¨‹å¿…è¦æ€§ä¹‹ç±»çš„ï¼Œæˆ‘åªæƒ³è¯´ï¼Œæ•´è¿™ä¹ˆå¤æ‚å¹²ä»€ä¹ˆï¼Ÿèµ°è¿œäº†..</p>
</blockquote>
<h1 id="ä»€ä¹ˆæ˜¯vuex-ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯vuex-ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯vuex,ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä»€ä¹ˆæ˜¯vuex,ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ</h1><blockquote>
<p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ ã€‚è¿™é‡Œçš„å…³é”®åœ¨äº é›†ä¸­å¼å­˜å‚¨ç®¡ç† ã€‚è¿™æ„å‘³ç€æœ¬æ¥éœ€è¦å…±äº«çŠ¶æ€çš„æ›´æ–°æ˜¯éœ€è¦ç»„ä»¶ä¹‹é—´é€šè®¯çš„ï¼Œè€Œç°åœ¨æœ‰äº†vuexï¼Œå°±ç»„ä»¶å°±éƒ½å’Œstoreé€šè®¯äº†</p>
<h3 id="ç®€è¨€ä¹‹å°±æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†ä¸­é—´ä»¶"><a href="#ç®€è¨€ä¹‹å°±æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†ä¸­é—´ä»¶" class="headerlink" title="ç®€è¨€ä¹‹å°±æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†ä¸­é—´ä»¶"></a>ç®€è¨€ä¹‹å°±æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†ä¸­é—´ä»¶</h3><p><code>åº”ç”¨åœºæ™¯ï¼š</code><br></p>
<ul>
<li>å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€ã€‚ä¼ å‚çš„æ–¹æ³•å¯¹äºå¤šå±‚åµŒå¥—çš„ç»„ä»¶å°†ä¼šéå¸¸ç¹çï¼Œå¹¶ä¸”å¯¹äºå…„å¼Ÿç»„ä»¶é—´çš„çŠ¶æ€ä¼ é€’æ— èƒ½ä¸ºåŠ›ã€‚</li>
<li>æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€ã€‚æˆ‘ä»¬ç»å¸¸ä¼šé‡‡ç”¨çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨æˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´å’ŒåŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ã€‚<h1 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h1><strong>å½“æˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€ä¸ªåŠ ä¸€ï¼Œå‡ä¸€æ“ä½œæŒ‰é’®çš„æ—¶å€™ï¼Œç”¨ä¸‹é¢ä¸¤ä¸ªdemoåšä¸€ä¸ªæ¼”ç¤º</strong><h3 id="æœªä½¿ç”¨vuex"><a href="#æœªä½¿ç”¨vuex" class="headerlink" title="æœªä½¿ç”¨vuex"></a>æœªä½¿ç”¨vuex</h3></li>
<li>å•çº¯ä¾èµ–äºvue.js</li>
</ul>
</blockquote>
<p>   <script src="https://unpkg.com/vue/dist/vue.js"></script><br>       <div id="app"><br>             <p><br>                   <button @click="inc">+</button><br>                   <button @click="dec">-</button><br>             </p><br>         </div><br>         <script><br>         new Vue({<br>           el:â€™#appâ€™,<br>           data () {<br>             return {<br>               count: 0<br>             }<br>           },<br>           methods: {<br>             inc () {<br>               this.count++<br>             },<br>             dec () {<br>               this.countâ€“<br>             }<br>           }<br>         })<br>         </script><br>   æ•´ä¸ªä»£ç ç»“æ„éå¸¸æ¸…æ™°ï¼Œä»£ç æ˜¯ä»£ç ï¼Œæ•°æ®æ˜¯æ•°æ®ï¼Œä»£ç å°±æ˜¯æ”¾åœ¨methodsæ•°ç»„å†…çš„ä¸¤ä¸ªå‡½æ•°incã€decï¼Œè¢«æŒ‡ä»¤@clickå…³è”åˆ°buttonä¸Šã€‚è€Œdataå†…è¿”å›ä¸€ä¸ªå±æ€§countï¼Œæ­¤å±æ€§é€šè¿‡ç»‘å®šåˆ°æ ‡ç­¾på†…ã€‚ä»è€Œå¯ä»¥åŠ¨æ€çš„æ”¹ä¸ºcountçš„å€¼ã€‚</p>
<h2 id="ä½¿ç”¨vuex"><a href="#ä½¿ç”¨vuex" class="headerlink" title="ä½¿ç”¨vuex"></a>ä½¿ç”¨vuex</h2><ul>
<li><p>ä¾èµ–vue.jsï¼Œä¹Ÿä½¿ç”¨äº†vuexæŠ€æœ¯</p>
<p> <script src="https://unpkg.com/vue/dist/vue.js"></script></p>
<pre><code>&lt;script src=&quot;https://unpkg.com/vuex@next&quot;&gt;&lt;/script&gt;
&lt;div id=&quot;app&quot;&gt;
    &lt;p&gt;{{count}}
        &lt;button @click=&quot;inc&quot;&gt;+&lt;/button&gt;
        &lt;button @click=&quot;dec&quot;&gt;-&lt;/button&gt;
    &lt;/p&gt;
&lt;/div&gt;
&lt;script&gt;
    const store = new Vuex.Store({
        state: {
          count: 0
        },
        mutations: {
            inc: state =&gt; state.count++,
          dec: state =&gt; state.count--
        }
    })
      const app = new Vue({
        el: &apos;#app&apos;,
        computed: {
          count () {
             return store.state.count
          }
        },
        methods: {
          inc () {
                store.commit(&apos;inc&apos;) //æ‰§è¡Œstore.incæ”¾å¤§
          },
          dec () {
              store.commit(&apos;dec&apos;)
          }
        }
    })
&lt;/script&gt;
</code></pre><h4 id="æˆ‘ä»¬å…ˆçœ‹åˆ°æœ‰å“ªäº›é‡è¦çš„å˜åŒ–ï¼š"><a href="#æˆ‘ä»¬å…ˆçœ‹åˆ°æœ‰å“ªäº›é‡è¦çš„å˜åŒ–ï¼š" class="headerlink" title="æˆ‘ä»¬å…ˆçœ‹åˆ°æœ‰å“ªäº›é‡è¦çš„å˜åŒ–ï¼š"></a>æˆ‘ä»¬å…ˆçœ‹åˆ°æœ‰å“ªäº›é‡è¦çš„å˜åŒ–ï¼š</h4></li>
</ul>
<ol>
<li>æ–°çš„ä»£ç æ·»åŠ äº†å¯¹vuex@nextè„šæœ¬çš„ä¾èµ–ã€‚è¿™æ˜¯å½“ç„¶çš„ï¼Œå› ä¸ºä½ éœ€è¦ä½¿ç”¨vuexçš„æŠ€æœ¯ï¼Œå½“ç„¶éœ€è¦å¼•ç”¨å®ƒ</li>
<li>methodsæ•°ç»„è¿˜æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™å’Œdemo1æ˜¯ä¸€æ ·çš„ï¼›ä½†æ˜¯æ–¹æ³•å†…çš„è®¡ç®—é€»è¾‘ï¼Œä¸å†æ˜¯åœ¨å‡½æ•°å†…è¿›è¡Œï¼Œè€Œæ˜¯æäº¤ç»™storeå¯¹è±¡ï¼è¿™æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼</li>
<li>countæ•°æ®ä¹Ÿä¸å†æ˜¯ä¸€ä¸ªdataå‡½æ•°è¿”å›çš„å¯¹è±¡çš„å±æ€§ï¼›è€Œæ˜¯é€šè¿‡è®¡ç®—å­—æ®µæ¥è¿”å›ï¼Œå¹¶ä¸”åœ¨è®¡ç®—å­—æ®µå†…çš„ä»£ç ä¹Ÿä¸æ˜¯è‡ªå·±ç®—çš„ï¼Œè€Œæ˜¯è½¬å‘ç»™storeå¯¹è±¡</li>
<li>storeå¯¹è±¡æ˜¯Vuex.Storeçš„å®ä¾‹ã€‚åœ¨storeå†…æœ‰åˆ†ä¸ºstateå¯¹è±¡å’Œmutationså¯¹è±¡ï¼Œå…¶ä¸­çš„stateæ”¾ç½® çŠ¶æ€ ,mutationsåˆ™æ˜¯ä¸€ä¸ªä¼šå¼•å‘çŠ¶æ€æ”¹å˜çš„æ‰€æœ‰æ–¹æ³•ã€‚æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œç›®å‰çš„stateå¯¹è±¡ï¼Œå…¶ä¸­çš„çŠ¶æ€å°±åªæœ‰ä¸€ä¸ªcountã€‚è€Œmutationsæœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œå®ƒä»¬å‚æ•°ä¸ºstateï¼Œåœ¨å‡½æ•°ä½“å†…å¯¹stateå†…çš„countæˆå‘˜åšåŠ 1å’Œå‡1çš„æ“ä½œã€‚</li>
</ol>
<p><strong>æ€»ç»“ï¼š</strong>å°±æ˜¯è¯´ï¼Œä¹‹å‰åœ¨vueå®ä¾‹å†…åšçš„æ“ä½œå’Œæ•°æ®çš„è®¡ç®—ç°åœ¨éƒ½ä¸å†è‡ªå·±åšäº†ï¼Œè€Œæ˜¯äº¤ç”±å¯¹è±¡storeæ¥åšäº†ã€‚</p>
<h4 id="ç”¨äº†vuexæ„Ÿè§‰æ›´å¤æ‚äº†ï¼Ÿ"><a href="#ç”¨äº†vuexæ„Ÿè§‰æ›´å¤æ‚äº†ï¼Ÿ" class="headerlink" title="ç”¨äº†vuexæ„Ÿè§‰æ›´å¤æ‚äº†ï¼Ÿ"></a>ç”¨äº†<code>vuex</code>æ„Ÿè§‰æ›´å¤æ‚äº†ï¼Ÿ</h4><p>ä½ çš„æ„Ÿè§‰æ²¡é”™ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®˜ç½‘å†æ¬¡ä¼šæåˆ°Vuexæ„å»ºå¤§å‹åº”ç”¨çš„ä»·å€¼ã€‚ å¦‚æœæ‚¨ä¸æ‰“ç®—å¼€å‘å¤§å‹å•é¡µåº”ç”¨ï¼Œä½¿ç”¨ Vuex å¯èƒ½æ˜¯ç¹çå†—ä½™çš„ã€‚ç¡®å®æ˜¯å¦‚æ­¤â€”â€”å¦‚æœæ‚¨çš„åº”ç”¨å¤Ÿç®€å•ï¼Œæ‚¨æœ€å¥½ä¸è¦ä½¿ç”¨ Vuex ã€‚</p>
<h1 id="OVER"><a href="#OVER" class="headerlink" title="OVER"></a>OVER</h1>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/01/24/vuex/" class="archive-article-date">
  	<time datetime="2017-01-24T08:59:48.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-01-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>













  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Jasonellen
    	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">å…¨éƒ¨</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">æ ‡ç­¾</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">å‹é“¾</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">æˆ‘</span><i class="icon-smile"></i></li>
    
  </ul>

  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Array/" style="font-size: 10px;">Array</a> <a href="/tags/CDNåŠ é€Ÿ/" style="font-size: 10px;">CDNåŠ é€Ÿ</a> <a href="/tags/CSS/" style="font-size: 13.33px;">CSS</a> <a href="/tags/ES6/" style="font-size: 13.33px;">ES6</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/IScroll/" style="font-size: 10px;">IScroll</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/JSè¯•é¢˜/" style="font-size: 10px;">JSè¯•é¢˜</a> <a href="/tags/MYSQL/" style="font-size: 13.33px;">MYSQL</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/ReactNative/" style="font-size: 13.33px;">ReactNative</a> <a href="/tags/Remé€‚é…/" style="font-size: 10px;">Remé€‚é…</a> <a href="/tags/SVG/" style="font-size: 10px;">SVG</a> <a href="/tags/UpLoad/" style="font-size: 10px;">UpLoad</a> <a href="/tags/Vue/" style="font-size: 20px;">Vue</a> <a href="/tags/ZnPicker/" style="font-size: 10px;">ZnPicker</a> <a href="/tags/canvas/" style="font-size: 16.67px;">canvas</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/filter/" style="font-size: 10px;">filter</a> <a href="/tags/import/" style="font-size: 10px;">import</a> <a href="/tags/jQuery/" style="font-size: 13.33px;">jQuery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/mobiscroll/" style="font-size: 10px;">mobiscroll</a> <a href="/tags/package/" style="font-size: 10px;">package</a> <a href="/tags/php/" style="font-size: 16.67px;">php</a> <a href="/tags/react/" style="font-size: 16.67px;">react</a> <a href="/tags/react-router/" style="font-size: 10px;">react-router</a> <a href="/tags/regexp/" style="font-size: 13.33px;">regexp</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/upload/" style="font-size: 10px;">upload</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/å…¶ä»–/" style="font-size: 10px;">å…¶ä»–</a> <a href="/tags/åŸå‹é“¾/" style="font-size: 10px;">åŸå‹é“¾</a> <a href="/tags/å¼‚æ­¥å‡½æ•°/" style="font-size: 10px;">å¼‚æ­¥å‡½æ•°</a> <a href="/tags/å¼¹çƒ/" style="font-size: 10px;">å¼¹çƒ</a> <a href="/tags/å¾®ä¿¡å°ç¨‹åº/" style="font-size: 10px;">å¾®ä¿¡å°ç¨‹åº</a> <a href="/tags/ç§»åŠ¨ç«¯/" style="font-size: 13.33px;">ç§»åŠ¨ç«¯</a> <a href="/tags/ç®€ç‰ˆæ—¥å†/" style="font-size: 10px;">ç®€ç‰ˆæ—¥å†</a> <a href="/tags/è¿ç®—ç¬¦/" style="font-size: 10px;">è¿ç®—ç¬¦</a> <a href="/tags/é…ç½®æ–‡ä»¶/" style="font-size: 10px;">é…ç½®æ–‡ä»¶</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://cn.bing.com/">å¿…åº”</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://gold.xitu.io/">æ˜é‡‘</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="//vuefe.cn/guide/">Vue</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.baidu.com/">ç™¾åº¦</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://yaomengyyu.github.io/">å®¶æµ©</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://wangyalijas.github.io/">ç‹é›…ä¸½</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">å¾ˆæƒ­æ„§&lt;br&gt;&lt;br&gt;æˆ‘åªæ˜¯æƒ³å­¦è®°å½•ç‚¹ä¸œè¥¿&lt;br&gt;è°¢è°¢å¤§å®¶</div>
  	  	
    	</section>
    
  </div>
  
</div>


    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>
</div>
  </div>
</body>
</html>